{"version":3,"sources":["demand.js"],"names":["global","setTimeout","clearTimeout","demand","provide","queue","processor","document","options","settings","version","cache","timeout","pattern","modules","handler","DEMAND_ID","MODULE_PREFIX","MODULE_PREFIX_ABSTRACT","MODULE_PREFIX_HANDLER","MODULE_PREFIX_PLUGIN","MODULE_PREFIX_FUNCTION","MODULE_PREFIX_VALIDATOR","MOCK_PREFIX","NULL","UNDEFINED","undefined","FALSE","TRUE","STRING_UNDEFINED","STRING_STRING","STRING_OBJECT","STRING_FUNCTION","STRING_NUMBER","FUNCTION_EMPTY","EVENT_PRE_CONFIGURE","EVENT_PREFIX","EVENT_POST_CONFIGURE","EVENT_POSTFIX","EVENT_CACHE","EVENT_CACHE_MISS","EVENT_CACHE_EXCEED","EVENT_PRE_RESOLVE","EVENT_POST_RESOLVE","EVENT_PRE_REQUEST","EVENT_POST_REQUEST","EVENT_PRE_PROCESS","EVENT_POST_PROCESS","EVENT_QUEUE_ENQUEUE","EVENT_QUEUE","ERROR_LOAD","ERROR_RESOLVE","arrayPrototype","Array","prototype","arrayPrototypeSlice","slice","arrayPrototypeConcat","concat","object","Object","objectPrototypeToString","toString","objectCreate","create","objectDefineProperty","defineProperty","objectGetOwnPropertyNames","getOwnPropertyNames","objectGetOwnPropertyDescriptor","getOwnPropertyDescriptor","linkElement","createElement","ClassDescriptor","value","writable","configurable","enumerable","__proto__","validatorIsTypeOf","type","validatorIsObject","validatorIsPositive","isFinite","Math","floor","validatorIsInstanceOf","module","functionIterate","source","callback","context","property","properties","keys","i","call","strPrototype","objectDefine","name","this","functionExtends","names","constructor","e","TypeError","Function","define","storage","element","fallback","hasSetImmediate","functionMerge","mergeProperties","targetPropertyIsObject","targetProperty","length","target","arguments","functionUuid","regex","RegExp","randomize","character","r","random","replace","functionDefer","fn","MutationObserver","observe","attributes","setAttribute","addEventListener","event","data","uuid","postMessage","onreadystatechange","parentNode","removeChild","body","appendChild","setImmediate","functionToArray","arrayLikeObject","start","end","singletonEvent","TYPE_ON","regexMatchEvent","listener","addListener","events","pointer","split","shift","test","on","after","push","filter","Event","emit","parameter","item","apply","functionGetTimestamp","Date","regexMatchRegex","functionEscapeRegex","functionResolveUrl","url","href","regexIsAbsoluteUri","regexIsAbsolutePath","regexMatchSourcemap","regexMatchBaseUrl","regexMatchInternal","regexMatchParameter","functionResolvePath","uri","path","functionResolveId","match","singletonCache","STORAGE_PREFIX","STORAGE_SUFFIX_STATE","regexMatchState","regexMatchProperties","supportsLocalStorage","localStorage","exception","supportsRemainingSpace","enabled","dependency","indexOf","weight","state","getKey","key","getItem","setKey","getState","matches","setState","join","id","Cache","clear","expired","bind","then","cacheDispose","set","get","lifetime","invalid","resolve","spaceBefore","remainingSpace","Error","error","ClassDependency","all","ClassWeakmap","WeakMap","prefix","getEntry","entry","delete","has","ClassPledge","PLEDGE_PENDING","PLEDGE_RESOLVED","PLEDGE_REJECTED","pledge","index","resolved","count","check","rejected","total","dfd","reject","executor","handle","result","catch","always","alwaysListener","resolveListener","rejectListener","defer","isPending","isResolved","isRejected","self","pledges","race","ClassRegistry","remove","ClassFailure","message","stack","traverse","depth","indention","registry","placeholder","setProperty","addPending","addResolved","addRejected","register","mock","enqueue","isInternal","node","querySelector","list","pending","ClassPattern","regexMatchTrailingSlash","location","process","current","ClassXhr","XMLHttpRequest","XDomainRequest","xhr","boundCheckState","readyState","abort","ontimeout","onerror","onabort","status","onprogress","onload","responseText","getResponseHeader","open","send","validatorIsArray","functionHash","input","charCodeAt","AbstractUuid","updateCacheSettings","updatePatternSettings","updateModuleSettings","temp","dependencies","configure","base","min","max","regexMatchEmptySearch","response","validate","load","search","onPostRequest","EVENT_CACHE_HIT","onPreRequest","onPreProcess","isFunction","definition","console","/demand","ClassQueue","dequeue","extends","ClassProcessor","functionResolveSourcemaps","replacement","exec","protocol","host","pathname","abstractHandler","handlerModule","getElementsByTagName","regexMatchType","HandlerModule","script","async","text","handlerBundle","updateDependencies","HandlerBundle","getType","handlerComponent","HandlerComponent","container","innerHTML","firstElementChild","getAttribute","textContent","pluginGenie","matchPattern","addPattern","resolveBundles","JSON","stringify","bundle","configuration","/demand/handler/bundle","generateConfiguration","bundles","assignModule","main","parent"],"mappings":"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","file":"demand.js","sourcesContent":["(function(global, setTimeout, clearTimeout) {\n    \"use strict\";\n    var document = global.document,\n        options = \"demand\" in global && global.demand,\n        settings = {\n            version: \"1.0.0\",\n            cache: {},\n            timeout: 8e3,\n            pattern: {},\n            modules: {},\n            handler: \"module\"\n        },\n        demand, provide, queue, processor;\n    var DEMAND_ID = \"demand\",\n        PROVIDE_ID = \"provide\",\n        PATH_ID = \"path\",\n        MODULE_PREFIX = \"/\" + DEMAND_ID + \"/\",\n        MODULE_PREFIX_ABSTRACT = MODULE_PREFIX + \"abstract/\",\n        MODULE_PREFIX_HANDLER = MODULE_PREFIX + \"handler/\",\n        MODULE_PREFIX_PLUGIN = MODULE_PREFIX + \"plugin/\",\n        MODULE_PREFIX_FUNCTION = MODULE_PREFIX + \"function/\",\n        MODULE_PREFIX_VALIDATOR = MODULE_PREFIX + \"validator/\",\n        MOCK_PREFIX = \"mock:\",\n        NULL = null,\n        UNDEFINED = undefined,\n        FALSE = false,\n        TRUE = true,\n        STRING_UNDEFINED = \"undefined\",\n        STRING_STRING = \"string\",\n        STRING_BOOLEAN = \"boolean\",\n        STRING_OBJECT = \"object\",\n        STRING_FUNCTION = \"function\",\n        STRING_NUMBER = \"number\",\n        FUNCTION_EMPTY = function() {},\n        EVENT_PREFIX = \"pre\",\n        EVENT_POSTFIX = \"post\",\n        EVENT_CONFIGURE = \"Configure\",\n        EVENT_PRE_CONFIGURE = EVENT_PREFIX + EVENT_CONFIGURE,\n        EVENT_POST_CONFIGURE = EVENT_POSTFIX + EVENT_CONFIGURE,\n        EVENT_CACHE = \"cache\",\n        EVENT_CACHE_MISS = EVENT_CACHE + \"Miss\",\n        EVENT_CACHE_HIT = EVENT_CACHE + \"Hit\",\n        EVENT_CACHE_CLEAR = EVENT_CACHE + \"Clear\",\n        EVENT_CACHE_EXCEED = EVENT_CACHE + \"Exceed\",\n        EVENT_PRE_CACHE = EVENT_PREFIX + \"Cache\",\n        EVENT_POST_CACHE = EVENT_POSTFIX + \"Cache\",\n        EVENT_RESOLVE = \"Resolve\",\n        EVENT_PRE_RESOLVE = EVENT_PREFIX + EVENT_RESOLVE,\n        EVENT_POST_RESOLVE = EVENT_POSTFIX + EVENT_RESOLVE,\n        EVENT_REQUEST = \"Request\",\n        EVENT_PRE_REQUEST = EVENT_PREFIX + EVENT_REQUEST,\n        EVENT_POST_REQUEST = EVENT_POSTFIX + EVENT_REQUEST,\n        EVENT_PROCESS = \"Process\",\n        EVENT_PRE_PROCESS = EVENT_PREFIX + EVENT_PROCESS,\n        EVENT_POST_PROCESS = EVENT_POSTFIX + EVENT_PROCESS,\n        EVENT_QUEUE = \"queue\",\n        EVENT_QUEUE_ENQUEUE = EVENT_QUEUE + \"Enqueue\",\n        EVENT_QUEUE_DEQUEUE = EVENT_QUEUE + \"Dequeue\",\n        ERROR_LOAD = \"error loading\",\n        ERROR_PROVIDE = \"error providing\",\n        ERROR_RESOLVE = \"error resolving\",\n        ERROR_PROVIDE_ANONYMOUS = \"unspecified anonymous provide\";\n    var arrayPrototype = Array.prototype,\n        arrayPrototypeSlice = arrayPrototype.slice,\n        arrayPrototypeConcat = arrayPrototype.concat,\n        object = Object,\n        objectPrototype = object.prototype,\n        objectPrototypeToString = objectPrototype.toString,\n        objectCreate = object.create,\n        objectDefineProperty = object.defineProperty,\n        objectGetOwnPropertyNames = object.getOwnPropertyNames,\n        objectGetOwnPropertyDescriptor = object.getOwnPropertyDescriptor,\n        linkElement = document.createElement(\"a\");\n\n    function ClassDescriptor(value, writable, configurable, enumerable) {\n        return {\n            __proto__: NULL,\n            value: value,\n            enumerable: !!enumerable,\n            configurable: !!configurable,\n            writable: !!writable\n        }\n    }(function(strPrototype) {\n        function objectDefine(name, value, writable, configurable, enumerable) {\n            objectDefineProperty(this, name, new ClassDescriptor(value, writable, configurable, enumerable))\n        }\n\n        function functionExtends(source) {\n            var self = this,\n                prototype = self[strPrototype],\n                names = objectGetOwnPropertyNames(prototype),\n                properties = {\n                    constructor: new ClassDescriptor(self, TRUE, TRUE)\n                },\n                i = 0,\n                property;\n            for (;\n                (property = names[i]) && !properties[property]; i++) {\n                properties[property] = objectGetOwnPropertyDescriptor(prototype, property)\n            }\n            try {\n                self[strPrototype] = objectCreate(source[strPrototype] || source, properties)\n            } catch (e) {}\n            if (self[strPrototype] === prototype) {\n                throw new TypeError(\"Unable to extend, prototype is not writable\")\n            }\n            return self\n        }\n        objectDefine.call(Object.prototype, \"define\", objectDefine);\n        objectDefine.call(global.Object.prototype, \"define\", objectDefine);\n        Function.prototype.define(\"extends\", functionExtends);\n        global.Function.prototype.define(\"extends\", functionExtends)\n    })(\"prototype\");\n\n    function validatorIsTypeOf(object, type) {\n        return typeof object === type\n    }\n\n    function validatorIsObject(object) {\n        return object && validatorIsTypeOf(object, STRING_OBJECT)\n    }\n\n    function validatorIsPositive(value) {\n        return validatorIsTypeOf(value, STRING_NUMBER) && isFinite(value) && Math.floor(value) === value && value >= 0\n    }\n\n    function validatorIsInstanceOf(object, module) {\n        return object instanceof module\n    }\n\n    function functionIterate(source, callback, context) {\n        var properties = object.keys(source),\n            i = 0,\n            property;\n        for (;\n            (property = properties[i]) !== UNDEFINED; i++) {\n            if (callback.call(context, property, source[property]) === FALSE) {\n                break\n            }\n        }\n        return context\n    }\n    var functionMerge = function() {\n        function mergeProperties(property, value) {\n            var targetProperty = this[property],\n                targetPropertyIsObject;\n            if (value !== UNDEFINED) {\n                if (validatorIsObject(value)) {\n                    targetPropertyIsObject = validatorIsObject(targetProperty);\n                    if (value.length !== UNDEFINED) {\n                        targetProperty = targetPropertyIsObject && targetProperty.length !== UNDEFINED ? targetProperty : []\n                    } else {\n                        targetProperty = targetPropertyIsObject && targetProperty.length === UNDEFINED ? targetProperty : {}\n                    }\n                    this[property] = functionMerge(targetProperty, value)\n                } else {\n                    this[property] = value\n                }\n            }\n        }\n        return function functionMerge() {\n            var target = arguments[0],\n                i = 1,\n                properties;\n            for (;\n                (properties = arguments[i]) !== UNDEFINED; i++) {\n                functionIterate(properties, mergeProperties, target)\n            }\n            return target\n        }\n    }();\n    var functionUuid = function() {\n        var regex = new RegExp(\"[xy]\", \"g\");\n\n        function randomize(character) {\n            var r = Math.random() * 16 | 0;\n            return (character === \"x\" ? r : r & 3 | 8).toString(16)\n        }\n        return function functionUuid() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(regex, randomize)\n        }\n    }();\n    var functionDefer = function() {\n        var hasSetImmediate = \"setImmediate\" in global,\n            element, fallback;\n        if (\"MutationObserver\" in global) {\n            return function functionDefer(fn) {\n                element = document.createElement(\"div\");\n                new MutationObserver(function() {\n                    fn()\n                }).observe(element, {\n                    attributes: TRUE\n                });\n                element.setAttribute(\"i\", \"1\")\n            }\n        }\n        if (!hasSetImmediate && \"postMessage\" in global && !(\"importScripts\" in global) && \"addEventListener\" in global) {\n            return function() {\n                var storage = {};\n\n                function onMessage(event) {\n                    var fn;\n                    if (event.source === global && event.data && (fn = storage[event.data])) {\n                        fn();\n                        delete storage[event.data]\n                    }\n                }\n                global.addEventListener(\"message\", onMessage, FALSE);\n                return function functionDefer(fn) {\n                    var uuid = functionUuid();\n                    storage[uuid] = fn;\n                    global.postMessage(uuid, \"*\")\n                }\n            }()\n        }\n        if (!hasSetImmediate && \"onreadystatechange\" in (element = document.createElement(\"script\"))) {\n            return function functionDefer(fn) {\n                element.onreadystatechange = function onreadystatechange() {\n                    element.onreadystatechange = NULL;\n                    element.parentNode.removeChild(element);\n                    fn()\n                };\n                document.body.appendChild(element)\n            }\n        }\n        fallback = hasSetImmediate ? setImmediate : setTimeout;\n        return function functionDefer(fn) {\n            fallback(fn)\n        }\n    }();\n\n    function functionToArray(arrayLikeObject, start, end) {\n        return arrayPrototypeSlice.call(arrayLikeObject, start, end)\n    }\n    var singletonEvent = function() {\n        var TYPE_ON = \"on\",\n            TYPE_AFTER = \"after\",\n            regexMatchEvent = /^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)$/,\n            listener = {};\n\n        function addListener(type, events, callback) {\n            var event, pointer;\n            if (validatorIsTypeOf(events, STRING_STRING) && validatorIsTypeOf(callback, STRING_FUNCTION)) {\n                events = events.split(\" \");\n                while (event = events.shift()) {\n                    event = event.split(\":\");\n                    if (regexMatchEvent.test(event[0])) {\n                        (listener[event[0]] || (listener[event[0]] = {\n                            on: [],\n                            after: []\n                        }))[type].push({\n                            callback: callback,\n                            filter: event[1]\n                        });\n                        if (type === TYPE_ON && event[0] === EVENT_POST_CONFIGURE && (pointer = settings.modules[event[1]])) {\n                            callback(pointer)\n                        }\n                    }\n                }\n            }\n        }\n\n        function Event() {}\n        Event.prototype = {\n            emit: function(event, filter) {\n                var pointer = listener[event],\n                    parameter, i, item;\n                if (pointer) {\n                    parameter = functionToArray(arguments, 2);\n                    for (i = 0; item = pointer[TYPE_ON][i]; i++) {\n                        if (!item.filter || item.filter === filter) {\n                            item.callback.apply(NULL, parameter)\n                        }\n                    }\n                    for (i = 0; item = pointer[TYPE_AFTER][i]; i++) {\n                        if (!item.filter || item.filter === filter) {\n                            item.callback.apply(NULL, parameter)\n                        }\n                    }\n                }\n                return this\n            },\n            on: function(events, callback) {\n                addListener(TYPE_ON, events, callback);\n                return this\n            },\n            after: function(events, callback) {\n                addListener(TYPE_AFTER, events, callback);\n                return this\n            }\n        };\n        return new Event\n    }();\n\n    function functionGetTimestamp() {\n        return +new Date\n    }\n    var functionEscapeRegex = function() {\n        var regexMatchRegex = /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;\n        return function functionEscapeRegex(value) {\n            return value.replace(regexMatchRegex, \"\\\\$&\")\n        }\n    }();\n\n    function functionResolveUrl(url) {\n        linkElement.href = url;\n        return linkElement.href\n    }\n    var regexIsAbsoluteUri = /^(http(s?):)?\\/\\//i,\n        regexIsAbsolutePath = /^\\//,\n        regexMatchSourcemap = /((?:\\/\\/|\\/\\*)#)\\s*(sourceMappingURL)\\s*=\\s*(?!(?:http[s]?:)?\\/\\/)(.+?)\\.map(?:\\s+)?(\\*\\/)?/g,\n        regexMatchBaseUrl = new RegExp(\"^\" + functionEscapeRegex(functionResolveUrl(\"/\"))),\n        regexMatchInternal = new RegExp(\"^\" + DEMAND_ID + \"|\" + PROVIDE_ID + \"|\" + PATH_ID + \"$\"),\n        regexMatchParameter = /^(mock:)?([+-])?((?:[-\\w]+\\/?)+)?(?:@(.+?))?(?:#(\\d+))?!/;\n\n    function functionResolvePath(uri, context) {\n        var path = uri.replace(regexMatchParameter, \"\");\n        if (!regexIsAbsolutePath.test(path) && !regexIsAbsoluteUri.test(path)) {\n            path = \"/\" + functionResolveUrl((context && functionResolveUrl(context + \"/../\") || \"/\") + path).replace(regexMatchBaseUrl, \"\")\n        }\n        return path\n    }\n\n    function functionResolveId(uri, context) {\n        var parameter = uri.match(regexMatchParameter);\n        return (parameter && parameter[1] ? \"mock:\" : \"\") + (parameter && parameter[3] || settings.handler) + \"!\" + functionResolvePath(uri, context)\n    }\n    var singletonCache = function() {\n        var STORAGE_PREFIX = \"[\" + DEMAND_ID + \"]\",\n            STORAGE_SUFFIX_STATE = \"[state]\",\n            STORAGE_SUFFIX_VALUE = \"[value]\",\n            regexMatchState = new RegExp(\"^\" + functionEscapeRegex(STORAGE_PREFIX) + \"\\\\[(.+?)\\\\]\" + functionEscapeRegex(STORAGE_SUFFIX_STATE) + \"$\"),\n            regexMatchProperties = /^(.+?),(\\d+),(\\d*),(.+?),(\\d+)$/,\n            supportsLocalStorage = function() {\n                try {\n                    return \"localStorage\" in global && global.localStorage\n                } catch (exception) {\n                    return FALSE\n                }\n            }(),\n            localStorage = supportsLocalStorage ? global.localStorage : NULL,\n            supportsRemainingSpace = supportsLocalStorage && \"remainingSpace\" in localStorage,\n            storage = {},\n            cache;\n        singletonEvent.on(EVENT_CACHE_MISS, function(dependency) {\n            functionDefer(function() {\n                cache.clear(dependency.id)\n            })\n        }).on(EVENT_CACHE_EXCEED, function(dependency) {\n            demand(\"-!/\" + DEMAND_ID + \"/cache/dispose\").then(function(cacheDispose) {\n                functionDefer(function() {\n                    cacheDispose(dependency.source.length);\n                    cache.set(dependency)\n                })\n            })\n        }).on(EVENT_POST_REQUEST, function(dependency) {\n            if (dependency.source && enabled(dependency)) {\n                storage[dependency.id] = TRUE\n            }\n        }).after(EVENT_POST_PROCESS, function(dependency) {\n            if (storage[dependency.id]) {\n                functionDefer(function() {\n                    cache.set(dependency)\n                })\n            }\n        });\n\n        function enabled(dependency) {\n            var match;\n            if (dependency.cache !== NULL) {\n                return dependency.cache\n            }\n            functionIterate(settings.cache, function(property, value) {\n                if (dependency.path.indexOf(property) === 0 && (!match || value.weight > match.weight)) {\n                    match = value\n                }\n            });\n            return match ? match.state : FALSE\n        }\n\n        function getKey(key) {\n            return localStorage.getItem(key)\n        }\n\n        function setKey(key, value) {\n            localStorage[value ? \"setItem\" : \"removeItem\"](key, value)\n        }\n\n        function getState(key) {\n            var state = getKey(key),\n                matches;\n            if (state && (matches = state.match(regexMatchProperties))) {\n                return functionToArray(matches, 1)\n            }\n        }\n\n        function setState(key, state) {\n            state[4] = functionGetTimestamp();\n            setKey(key, state.join(\",\"))\n        }\n\n        function emit(event, dependency, state) {\n            singletonEvent.emit(event, dependency.id, dependency, state)\n        }\n\n        function Cache() {\n            functionDefer(this.clear.expired.bind(this.clear))\n        }\n        Cache.prototype = {\n            get: supportsLocalStorage ? function(dependency) {\n                var id, state;\n                if (enabled(dependency)) {\n                    id = STORAGE_PREFIX + \"[\" + dependency.id + \"]\";\n                    state = getState(id + STORAGE_SUFFIX_STATE);\n                    if (!state) {\n                        return\n                    }\n                    if (state[0] !== dependency.version || state[2] && dependency.lifetime && state[2] <= functionGetTimestamp()) {\n                        dependency.invalid = true;\n                        return\n                    }\n                    dependency.source = getKey(id + STORAGE_SUFFIX_VALUE);\n                    functionDefer(function() {\n                        setState(id + STORAGE_SUFFIX_STATE, state)\n                    });\n                    return TRUE\n                }\n            } : FUNCTION_EMPTY,\n            resolve: supportsLocalStorage ? function(dependency) {\n                var self = this;\n                if (self.get(dependency)) {\n                    emit(EVENT_CACHE_HIT, dependency)\n                } else {\n                    emit(EVENT_CACHE_MISS, dependency)\n                }\n            } : function(dependency) {\n                emit(EVENT_CACHE_MISS, dependency)\n            },\n            set: supportsLocalStorage ? function(dependency) {\n                var state, id, spaceBefore;\n                if (enabled(dependency)) {\n                    state = [dependency.version, dependency.source.length, dependency.lifetime ? functionGetTimestamp() + dependency.lifetime : NULL, demand.version];\n                    id = STORAGE_PREFIX + \"[\" + dependency.id + \"]\";\n                    emit(EVENT_PRE_CACHE, dependency, state);\n                    try {\n                        spaceBefore = supportsRemainingSpace ? localStorage.remainingSpace : NULL;\n                        setKey(id + STORAGE_SUFFIX_VALUE, dependency.source);\n                        setState(id + STORAGE_SUFFIX_STATE, state);\n                        if (spaceBefore !== NULL && localStorage.remainingSpace === spaceBefore) {\n                            throw new Error\n                        }\n                        emit(EVENT_POST_CACHE, dependency, state)\n                    } catch (error) {\n                        emit(EVENT_CACHE_EXCEED, dependency)\n                    }\n                }\n            } : FUNCTION_EMPTY,\n            clear: supportsLocalStorage ? function(path) {\n                var id = functionResolveId(path),\n                    key = STORAGE_PREFIX + \"[\" + id + \"]\";\n                if (getKey(key + STORAGE_SUFFIX_STATE)) {\n                    setKey(key + STORAGE_SUFFIX_STATE);\n                    setKey(key + STORAGE_SUFFIX_VALUE);\n                    emit(EVENT_CACHE_CLEAR, ClassDependency.get(id) || new ClassDependency(id, NULL, FALSE))\n                }\n            } : function() {}\n        };\n        Cache.prototype.clear.all = supportsLocalStorage ? function() {\n            var match;\n            functionIterate(localStorage, function(property) {\n                match = property.match(regexMatchState);\n                match && this(match[1])\n            }, this)\n        } : FUNCTION_EMPTY;\n        Cache.prototype.clear.expired = supportsLocalStorage ? function() {\n            var match, state;\n            functionIterate(localStorage, function(property) {\n                match = property.match(regexMatchState);\n                if (match) {\n                    state = getState(STORAGE_PREFIX + \"[\" + match[1] + \"]\" + STORAGE_SUFFIX_STATE);\n                    if (state && state[2] > 0 && state[2] <= functionGetTimestamp()) {\n                        this(match[1])\n                    }\n                }\n            }, this)\n        } : FUNCTION_EMPTY;\n        return cache = new Cache\n    }();\n    var ClassWeakmap = \"WeakMap\" in global ? global.WeakMap : function() {\n        var prefix = \"weakmap-\";\n\n        function getEntry(context, key) {\n            var entry;\n            if ((entry = key[context.id]) && entry[0] === key) {\n                return entry\n            }\n        }\n\n        function ClassWeakmap() {\n            this.define(\"id\", prefix + functionUuid())\n        }\n        ClassWeakmap.prototype = {\n            set: function(key, value) {\n                var entry = getEntry(this, key);\n                if (entry) {\n                    entry[1] = value\n                } else {\n                    key.define(this.id, [key, value])\n                }\n                return this\n            },\n            get: function(key) {\n                var entry = getEntry(this, key);\n                if (entry) {\n                    return entry[1]\n                }\n            },\n            delete: function(key) {\n                var entry = getEntry(this, key);\n                if (entry) {\n                    entry.length = 0;\n                    delete key[this.id]\n                }\n            },\n            has: function(key) {\n                return !!getEntry(this, key)\n            }\n        };\n        return ClassWeakmap\n    }();\n    var ClassPledge = function() {\n        var PLEDGE_PENDING = \"pending\",\n            PLEDGE_RESOLVED = \"resolved\",\n            PLEDGE_REJECTED = \"rejected\",\n            storage = new ClassWeakmap;\n\n        function resolve() {\n            storage.get(this).handle(PLEDGE_RESOLVED, arguments)\n        }\n\n        function reject() {\n            storage.get(this).handle(PLEDGE_REJECTED, arguments)\n        }\n\n        function handle(state, parameter) {\n            var properties = storage.get(this),\n                pointer, result;\n            if (properties.state === PLEDGE_PENDING) {\n                properties.state = state;\n                properties.value = parameter\n            }\n            while (pointer = properties[properties.state].shift()) {\n                result = pointer.handler.apply(NULL, properties.value);\n                if (result && typeof result.then === \"function\") {\n                    result.then(pointer.dfd.resolve, pointer.dfd.reject)\n                } else {\n                    pointer.dfd[properties.state === PLEDGE_RESOLVED ? \"resolve\" : \"reject\"].apply(NULL, properties.value)\n                }\n            }\n            properties[PLEDGE_RESOLVED].length = 0;\n            properties[PLEDGE_REJECTED].length = 0\n        }\n\n        function observe(pledge, index, properties) {\n            pledge.then(function() {\n                properties.resolved[index] = functionToArray(arguments);\n                properties.count++;\n                check(properties)\n            }, function() {\n                properties.rejected.push(functionToArray(arguments));\n                check(properties)\n            })\n        }\n\n        function check(properties) {\n            if (properties.count === properties.total) {\n                properties.dfd.resolve.apply(NULL, arrayPrototypeConcat.apply([], properties.resolved))\n            } else if (properties.rejected.length + properties.count === properties.total) {\n                properties.dfd.reject.apply(NULL, arrayPrototypeConcat.apply([], properties.rejected))\n            }\n        }\n\n        function ClassPledge(executor) {\n            var self = this;\n            storage.set(this, {\n                state: PLEDGE_PENDING,\n                handle: handle.bind(self),\n                value: NULL,\n                resolved: [],\n                rejected: [],\n                count: 0\n            });\n            executor(resolve.bind(self), reject.bind(self));\n            return self\n        }\n        ClassPledge.prototype = {\n            catch: function(listener) {\n                return this.then(FUNCTION_EMPTY, listener)\n            },\n            always: function(alwaysListener) {\n                return this.then(alwaysListener, alwaysListener)\n            },\n            then: function(resolveListener, rejectListener) {\n                var properties = storage.get(this),\n                    dfd = ClassPledge.defer();\n                resolveListener && properties[PLEDGE_RESOLVED].push({\n                    handler: resolveListener,\n                    dfd: dfd\n                });\n                rejectListener && properties[PLEDGE_REJECTED].push({\n                    handler: rejectListener,\n                    dfd: dfd\n                });\n                if (properties.state !== PLEDGE_PENDING) {\n                    functionDefer(properties.handle)\n                }\n                return dfd.pledge\n            },\n            isPending: function() {\n                return storage.get(this).state === PLEDGE_PENDING\n            },\n            isResolved: function() {\n                return storage.get(this).state === PLEDGE_RESOLVED\n            },\n            isRejected: function() {\n                return storage.get(this).state === PLEDGE_REJECTED\n            }\n        };\n        ClassPledge.defer = function() {\n            var self = {};\n            self.pledge = new ClassPledge(function(resolveListener, rejectListener) {\n                self.resolve = resolveListener;\n                self.reject = rejectListener\n            });\n            return self\n        };\n        ClassPledge.all = function(pledges) {\n            var dfd = ClassPledge.defer(),\n                properties, i = 0,\n                pledge;\n            if (pledges.length) {\n                properties = {\n                    dfd: dfd,\n                    resolved: [],\n                    rejected: [],\n                    total: pledges.length,\n                    count: 0\n                };\n                for (; pledge = pledges[i]; i++) {\n                    observe(pledge, i, properties)\n                }\n            } else {\n                dfd.resolve()\n            }\n            return dfd.pledge\n        };\n        ClassPledge.race = function(pledges) {\n            var dfd = ClassPledge.defer(),\n                i = 0,\n                pledge;\n            for (; pledge = pledges[i]; i++) {\n                pledge.then(dfd.resolve, dfd.reject)\n            }\n            if (!pledges.length) {\n                dfd.resolve()\n            }\n            return dfd.pledge\n        };\n        return ClassPledge\n    }();\n    var ClassRegistry = function() {\n        var storage = new ClassWeakmap;\n\n        function ClassRegistry() {\n            storage.set(this, {})\n        }\n        ClassRegistry.prototype = {\n            get: function(key) {\n                return key ? storage.get(this)[key] : storage.get(this)\n            },\n            set: function(key, value) {\n                storage.get(this)[key] = value\n            },\n            remove: function(key) {\n                delete storage.get(this)[key]\n            }\n        };\n        return ClassRegistry\n    }();\n\n    function ClassFailure(message, module, stack) {\n        var self = this;\n        self.message = message;\n        module && (self.module = module);\n        stack && (self.stack = functionToArray(stack));\n        return self\n    }\n    ClassFailure.prototype = {\n        toString: function() {\n            var self = this,\n                result = DEMAND_ID + \": \" + self.message + \" \" + (self.module ? '\"' + self.module + '\"' : \"\");\n            if (self.stack) {\n                result = ClassFailure.traverse(self.stack, result, 1)\n            }\n            return result\n        }\n    };\n    ClassFailure.traverse = function(stack, value, depth) {\n        var indention = new Array(depth + 1).join(\" \"),\n            i = 0,\n            item;\n        for (; item = stack[i]; i++) {\n            value += \"\\n\" + indention + \"> \" + item.message + \" \" + (item.module ? '\"' + item.module + '\"' : \"\");\n            if (item.stack) {\n                value = ClassFailure.traverse(item.stack, value, depth + 1)\n            }\n        }\n        return value\n    };\n    var ClassDependency = function() {\n        var PREFIX_INTERNAL = \"internal!\",\n            registry = new ClassRegistry,\n            placeholder = [];\n\n        function setProperty(property, value) {\n            this[property] = value\n        }\n\n        function addPending(id, dependency) {\n            if (dependency.pledge.isPending()) {\n                this.push(id)\n            }\n        }\n\n        function addResolved(id, dependency) {\n            if (dependency.pledge.isResolved()) {\n                this.push(id)\n            }\n        }\n\n        function addRejected(id, dependency) {\n            if (dependency.pledge.isRejected()) {\n                this.push(id)\n            }\n        }\n\n        function ClassDependency(uri, context, register) {\n            var self = this,\n                parameter = uri.match(regexMatchParameter) || placeholder;\n            self.path = functionResolvePath(uri, context);\n            self.mock = parameter[1] ? TRUE : FALSE;\n            self.cache = parameter[2] ? parameter[1] === \"+\" : NULL;\n            self.type = parameter[3] || settings.handler;\n            self.version = parameter[4] || settings.version;\n            self.lifetime = parameter[5] && parameter[5] * 1e3 || settings.lifetime;\n            self.id = (self.mock ? MOCK_PREFIX : \"\") + self.type + \"!\" + self.path;\n            self.uri = (self.mock ? MOCK_PREFIX : \"\") + self.type + \"@\" + self.version + (validatorIsPositive(self.lifetime) && self.lifetime > 0 ? \"#\" + self.lifetime : \"\") + \"!\" + self.path;\n            self.dfd = ClassPledge.defer();\n            self.pledge = self.dfd.pledge;\n            self.invalid = false;\n            self.pledge.then(function() {\n                self.value = functionToArray(arguments)\n            });\n            register !== FALSE && registry.set(self.id, self);\n            return self\n        }\n        ClassDependency.prototype = {\n            enqueue: true\n        };\n        ClassDependency.get = function(uri, context) {\n            return registry.get(functionResolveId(uri, context))\n        };\n        ClassDependency.resolve = function(uri, context) {\n            var isInternal = context && regexMatchInternal.test(uri),\n                dependency = isInternal ? this.get(PREFIX_INTERNAL + context + \"/\" + uri) : this.get(uri, context),\n                value;\n            if (!dependency) {\n                if (isInternal) {\n                    dependency = new ClassDependency(PREFIX_INTERNAL + context + \"/\" + uri);\n                    switch (uri) {\n                        case DEMAND_ID:\n                            value = function() {\n                                return functionIterate(demand, setProperty, demand.bind(context))\n                            }();\n                            break;\n                        case PROVIDE_ID:\n                            value = provide.bind(context);\n                            break;\n                        case PATH_ID:\n                            value = context;\n                            break\n                    }\n                    dependency.dfd.resolve(value)\n                } else {\n                    dependency = new ClassDependency(uri, context);\n                    demand(MODULE_PREFIX_HANDLER + dependency.type).then(function(handler) {\n                        dependency.handler = handler;\n                        if (dependency.mock) {\n                            dependency.dfd.resolve(handler)\n                        } else {\n                            singletonCache.resolve(dependency)\n                        }\n                    }, function() {\n                        dependency.dfd.reject(new ClassFailure(ERROR_LOAD + \" (handler)\", self.id))\n                    })\n                }\n            }\n            return dependency\n        };\n        ClassDependency.remove = function(uri, context, cache) {\n            var id = functionResolveId(uri, context),\n                node = document.querySelector(\"[\" + DEMAND_ID + '-id=\"' + id + '\"]');\n            registry.remove(id);\n            registry.remove(MOCK_PREFIX + id);\n            node && node.parentNode.removeChild(node);\n            cache !== FALSE && singletonCache.clear(id)\n        };\n        ClassDependency.list = {\n            all: function() {\n                return object.keys(registry.get())\n            },\n            pending: function() {\n                return functionIterate(registry.get(), addPending, [])\n            },\n            resolved: function() {\n                return functionIterate(registry.get(), addResolved, [])\n            },\n            rejected: function() {\n                return functionIterate(registry.get(), addRejected, [])\n            }\n        };\n        return ClassDependency\n    }();\n    var ClassPattern = function() {\n        var regexMatchTrailingSlash = /(.+)\\/$/;\n\n        function setProperty(property, value) {\n            this[property] = {\n                url: functionResolveUrl(value).replace(regexMatchTrailingSlash, \"$1\"),\n                match: new RegExp(\"^\" + functionEscapeRegex(value))\n            }\n        }\n\n        function ClassPattern(pattern, url) {\n            var self = this;\n            self.weight = pattern.length;\n            self.match = new RegExp(\"^\" + functionEscapeRegex(pattern));\n            self.location = [].concat(url);\n            functionIterate(self.location, setProperty, self.location)\n        }\n        ClassPattern.prototype = {\n            matches: function(path) {\n                return this.match.test(path)\n            },\n            process: function(path, index) {\n                var current = this.location[index];\n                if (current) {\n                    return path.replace(this.match, current.url)\n                }\n            }\n        };\n        return ClassPattern\n    }();\n    var ClassXhr = function(XMLHttpRequest) {\n        var XDomainRequest = \"XDomainRequest\" in global && global.XDomainRequest || XMLHttpRequest;\n\n        function checkState() {\n            if (this.readyState < 4) {\n                this.abort()\n            }\n        }\n        return function ClassXhr(url) {\n            var dfd = ClassPledge.defer(),\n                xhr = regexMatchBaseUrl.test(url) ? new XMLHttpRequest : new XDomainRequest,\n                boundCheckState = checkState.bind(xhr),\n                timeout = settings.timeout,\n                pointer;\n            xhr.ontimeout = xhr.onerror = xhr.onabort = function() {\n                dfd.reject(xhr.status)\n            };\n            xhr.onprogress = xhr.onreadystatechange = function() {\n                clearTimeout(pointer);\n                pointer = setTimeout(boundCheckState, timeout)\n            };\n            xhr.onload = function() {\n                pointer = clearTimeout(pointer);\n                if (!(\"status\" in xhr) || xhr.status === 200) {\n                    dfd.resolve(xhr.responseText, xhr.getResponseHeader && xhr.getResponseHeader(\"content-type\"))\n                } else {\n                    dfd.reject(xhr.status)\n                }\n            };\n            xhr.open(\"GET\", url, TRUE);\n            xhr.send();\n            pointer = setTimeout(boundCheckState, timeout);\n            return dfd.pledge\n        }\n    }(XMLHttpRequest);\n\n    function ClassLoader(dependency) {\n        var regexMatchEmptySearch = /^(?:\\?|)$/,\n            pattern;\n\n        function resolve(response, type) {\n            if (!type || !dependency.handler.validate || dependency.handler.validate(type)) {\n                dependency.source = response;\n                singletonEvent.emit(EVENT_POST_REQUEST, dependency.type, dependency)\n            } else {\n                dependency.dfd.reject(new ClassFailure(ERROR_LOAD + \" (content-type)\", dependency.id))\n            }\n        }\n\n        function reject(status) {\n            dependency.dfd.reject(new ClassFailure(ERROR_LOAD + (status ? \" (status)\" : \"\"), dependency.id))\n        }\n\n        function load(location) {\n            location = location || 0;\n            dependency.url = document.createElement(\"a\");\n            dependency.url.href = pattern ? functionResolveUrl(pattern.process(dependency.path, location)) : dependency.path;\n            if (dependency.invalid) {\n                dependency.url.search += (regexMatchEmptySearch.test(dependency.url.search) ? \"\" : \"&\") + functionGetTimestamp()\n            }\n            singletonEvent.emit(EVENT_PRE_REQUEST, dependency.type, dependency);\n            new ClassXhr(dependency.url).then(resolve, pattern ? function() {\n                location++;\n                if (pattern.location[location]) {\n                    load(location)\n                } else {\n                    reject()\n                }\n            } : reject)\n        }\n        if (!regexIsAbsoluteUri.test(dependency.path)) {\n            functionIterate(settings.pattern, function(property, value) {\n                value.matches(dependency.path) && (!pattern || pattern.weight < value.weight) && (pattern = value)\n            })\n        }\n        load()\n    }\n    demand = function() {\n        function updateCacheSettings(property, value) {\n            this[property] = {\n                weight: property.length,\n                state: value\n            }\n        }\n\n        function updatePatternSettings(property, value) {\n            property !== \"base\" && (this[property] = new ClassPattern(property, value))\n        }\n\n        function updateModuleSettings(property, value) {\n            var temp = this[property] = this[property] || {};\n            singletonEvent.emit(EVENT_PRE_CONFIGURE, property, temp);\n            functionMerge(temp, value);\n            singletonEvent.emit(EVENT_POST_CONFIGURE, property, temp)\n        }\n\n        function demand() {\n            var dependencies = functionToArray(arguments),\n                context = this !== global ? this : NULL,\n                i = 0,\n                uri, dfd, result;\n            singletonEvent.emit(EVENT_PRE_RESOLVE, NULL, dependencies, context);\n            for (; uri = dependencies[i]; i++) {\n                if (validatorIsTypeOf(uri, STRING_STRING)) {\n                    dependencies[i] = ClassDependency.resolve(uri, context).pledge\n                } else {\n                    dependencies[i] = (dfd = ClassPledge.defer()).pledge;\n                    dfd.resolve(uri)\n                }\n            }\n            if (dependencies.length > 1) {\n                result = ClassPledge.all(dependencies)\n            } else {\n                result = dependencies[0]\n            }\n            return result.always(function() {\n                singletonEvent.emit(EVENT_POST_RESOLVE, NULL, dependencies, context)\n            })\n        }\n        demand.configure = function(options) {\n            var cache = options.cache,\n                version = options.version,\n                timeout = options.timeout,\n                lifetime = options.lifetime,\n                base = options.base,\n                pattern = options.pattern,\n                modules = options.modules,\n                pointer = settings.modules;\n            if (validatorIsTypeOf(cache, STRING_BOOLEAN)) {\n                settings.cache[\"\"] = {\n                    weight: 0,\n                    state: cache\n                }\n            } else if (validatorIsObject(cache)) {\n                functionIterate(cache, updateCacheSettings, settings.cache)\n            }\n            if (validatorIsTypeOf(version, STRING_STRING)) {\n                settings.version = version\n            }\n            if (validatorIsPositive(timeout)) {\n                settings.timeout = Math.min(Math.max(timeout, 2), 12) * 1e3\n            }\n            if (validatorIsPositive(lifetime) && lifetime > 0) {\n                settings.lifetime = lifetime * 1e3\n            }\n            if (validatorIsTypeOf(base, STRING_STRING) && base !== \"\") {\n                settings.pattern.base = new ClassPattern(\"\", base)\n            }\n            if (validatorIsObject(pattern)) {\n                functionIterate(pattern, updatePatternSettings, settings.pattern)\n            }\n            if (validatorIsObject(modules)) {\n                functionIterate(modules, updateModuleSettings, pointer)\n            }\n            return demand\n        };\n        demand.version = \"{{gulp:package.version}}\";\n        demand.on = singletonEvent.on.bind(demand);\n        demand.get = function(uri, context) {\n            var dependency = ClassDependency.get(uri, context);\n            return dependency && dependency.value\n        };\n        demand.list = ClassDependency.list;\n        demand.remove = ClassDependency.remove;\n        demand.cache = {\n            clear: singletonCache.clear\n        };\n        singletonEvent.after(EVENT_CACHE_MISS, function(dependency) {\n            new ClassLoader(dependency)\n        }).after(EVENT_POST_REQUEST, function(dependency) {\n            var pointer = dependency.handler.onPostRequest;\n            pointer && pointer(dependency)\n        }).after(EVENT_CACHE_HIT + \" \" + EVENT_POST_REQUEST, function(dependency) {\n            singletonEvent.emit(EVENT_PRE_PROCESS, dependency.id, dependency)\n        }).after(EVENT_PRE_REQUEST, function(dependency) {\n            var pointer = dependency.handler.onPreRequest;\n            pointer && pointer(dependency)\n        }).after(EVENT_PRE_PROCESS, function(dependency) {\n            var pointer = dependency.handler.onPreProcess;\n            pointer && pointer(dependency);\n            dependency.pledge.then(function() {\n                singletonEvent.emit(EVENT_POST_PROCESS, dependency.id, dependency)\n            });\n            if (dependency.enqueue === true) {\n                queue.enqueue(dependency)\n            } else if (validatorIsInstanceOf(dependency.enqueue, ClassPledge)) {\n                dependency.enqueue.then(function() {\n                    queue.enqueue(dependency)\n                })\n            }\n        });\n        return demand\n    }();\n    global.define(\"demand\", demand);\n\n    function validatorIsArray(value) {\n        return objectPrototypeToString.call(value) === \"[object Array]\"\n    }\n    provide = function provide() {\n        var uri = validatorIsTypeOf(arguments[0], STRING_STRING) ? arguments[0] : NULL,\n            context = this !== global ? this : NULL,\n            dependencies = validatorIsArray(arguments[uri ? 1 : 0]) ? arguments[uri ? 1 : 0] : NULL,\n            definition = dependencies ? arguments[uri ? 2 : 1] : arguments[uri ? 1 : 0],\n            module, isFunction;\n        if (!uri && processor.current) {\n            module = processor.current;\n            uri = module.uri;\n            processor.process()\n        }\n        if (uri) {\n            module = module || new ClassDependency(uri, context);\n            isFunction = validatorIsTypeOf(definition, STRING_FUNCTION);\n            if (dependencies) {\n                demand.apply(module.path, dependencies).then(function() {\n                    module.dfd.resolve(isFunction ? definition.apply(NULL, arguments) : definition)\n                }, function() {\n                    module.dfd.reject(new ClassFailure(ERROR_PROVIDE, module.id, arguments))\n                })\n            } else {\n                module.dfd.resolve(isFunction ? definition() : definition)\n            }\n            return module.dfd.pledge\n        } else {\n            !validatorIsTypeOf(console, STRING_UNDEFINED) && console.error(new ClassFailure(ERROR_PROVIDE_ANONYMOUS))\n        }\n    };\n    global.define(\"provide\", provide);\n    demand.configure({\n        cache: TRUE,\n        base: \"/\",\n        pattern: {\n            \"/demand\": functionResolveUrl((options && options.url || location.href) + \"/../\").slice(0, -1)\n        }\n    });\n    options && options.settings && demand.configure(options.settings);\n\n    function functionHash(input) {\n        var value = 5381,\n            i = input.length;\n        while (i) {\n            value = value * 33 ^ input.charCodeAt(--i)\n        }\n        return value >>> 0\n    }\n\n    function AbstractUuid() {\n        if (validatorIsTypeOf(this.uuid, STRING_UNDEFINED)) {\n            this.define(\"uuid\", functionUuid())\n        }\n        return this\n    }\n    var ClassQueue = function() {\n        var storage = new ClassWeakmap;\n\n        function ClassQueue() {\n            var self = AbstractUuid.call(this);\n            storage.set(self, []);\n            return self\n        }\n        ClassQueue.prototype = {\n            enqueue: function() {\n                storage.set(this, storage.get(this).concat(functionToArray(arguments)));\n                singletonEvent.emit(EVENT_QUEUE_ENQUEUE, this.uuid)\n            },\n            dequeue: function() {\n                singletonEvent.emit(EVENT_QUEUE_DEQUEUE, this.uuid);\n                return storage.get(this).shift()\n            },\n            get current() {\n                return storage.get(this)[0]\n            },\n            get length() {\n                return storage.get(this).length\n            }\n        };\n        return ClassQueue.extends(AbstractUuid)\n    }();\n    var ClassProcessor = function() {\n        var storage = new ClassWeakmap;\n\n        function ClassProcessor(queue) {\n            var self = this,\n                properties = {\n                    queue: queue,\n                    current: NULL\n                };\n            storage.set(self, properties);\n            demand.on(EVENT_QUEUE_ENQUEUE + \":\" + queue.uuid, function() {\n                !properties.current && self.process()\n            })\n        }\n        ClassProcessor.prototype = {\n            process: function() {\n                var properties = storage.get(this),\n                    current;\n                if (properties.queue.length) {\n                    current = properties.current = properties.queue.dequeue();\n                    if (!current.pledge.isRejected()) {\n                        current.handler.process && current.handler.process(current);\n                        return\n                    }\n                }\n                properties.current = NULL\n            },\n            get current() {\n                return storage.get(this).current\n            }\n        };\n        return ClassProcessor\n    }();\n\n    function functionResolveSourcemaps(url, source) {\n        var match, replacement;\n        while (match = regexMatchSourcemap.exec(source)) {\n            linkElement.href = url;\n            if (regexIsAbsoluteUri.test(match[2])) {\n                replacement = linkElement.protocol + \"//\" + linkElement.host + match[3]\n            } else {\n                linkElement.pathname += \"/../\" + match[3];\n                replacement = linkElement.protocol + \"//\" + linkElement.host + linkElement.pathname\n            }\n            source = source.replace(match[0], match[1] + \" \" + match[2] + \"=\" + replacement + \".map\" + (match[4] ? \" \" + match[4] : \"\"))\n        }\n        return source\n    }\n\n    function abstractHandler() {}\n    abstractHandler.prototype = {\n        validate: NULL,\n        onPreRequest: NULL,\n        onPostRequest: NULL,\n        onPreProcess: NULL,\n        process: NULL\n    };\n    var handlerModule = function() {\n        var suffix = \".js\",\n            target = document.getElementsByTagName(\"head\")[0],\n            regexMatchType = /^(application|text)\\/(x-)?javascript/;\n\n        function HandlerModule() {}\n        HandlerModule.prototype = {\n            validate: function(type) {\n                return regexMatchType.test(type)\n            },\n            onPreRequest: function(dependency) {\n                var pathname = dependency.url.pathname;\n                dependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname\n            },\n            onPostRequest: function(dependency) {\n                dependency.source = functionResolveSourcemaps(dependency.url, dependency.source)\n            },\n            process: function(dependency) {\n                var script;\n                if (dependency.source) {\n                    script = document.createElement(\"script\");\n                    script.async = TRUE;\n                    script.text = dependency.source;\n                    script.setAttribute(DEMAND_ID + \"-id\", dependency.id);\n                    target.appendChild(script)\n                }\n            }\n        };\n        return new(HandlerModule.extends(abstractHandler))\n    }();\n\n    function ClassFailure(message, module, stack) {\n        var self = this;\n        self.message = message;\n        module && (self.module = module);\n        stack && (self.stack = functionToArray(stack));\n        return self\n    }\n    ClassFailure.prototype = {\n        toString: function() {\n            var self = this,\n                result = DEMAND_ID + \": \" + self.message + \" \" + (self.module ? '\"' + self.module + '\"' : \"\");\n            if (self.stack) {\n                result = ClassFailure.traverse(self.stack, result, 1)\n            }\n            return result\n        }\n    };\n    ClassFailure.traverse = function(stack, value, depth) {\n        var indention = new Array(depth + 1).join(\" \"),\n            i = 0,\n            item;\n        for (; item = stack[i]; i++) {\n            value += \"\\n\" + indention + \"> \" + item.message + \" \" + (item.module ? '\"' + item.module + '\"' : \"\");\n            if (item.stack) {\n                value = ClassFailure.traverse(item.stack, value, depth + 1)\n            }\n        }\n        return value\n    };\n    var handlerBundle = function() {\n        var path = MODULE_PREFIX_HANDLER + \"bundle\",\n            settings = {};\n        demand.on(EVENT_POST_CONFIGURE + \":\" + path, function(options) {\n            if (validatorIsObject(options)) {\n                settings = options;\n                functionIterate(settings, updateDependencies)\n            }\n        });\n\n        function updateDependencies(uri, dependencies) {\n            var i, dependency;\n            for (i = 0; dependency = dependencies[i]; i++) {\n                if (validatorIsTypeOf(dependency, STRING_STRING)) {\n                    dependencies[i] = functionResolveId(dependency)\n                }\n            }\n        }\n\n        function getType(dependencies) {\n            var type, i = 0,\n                temp;\n            for (; temp = dependencies[i]; i++) {\n                temp = temp.match(regexMatchParameter);\n                temp = temp && temp[3] || settings.handler;\n                if (type) {\n                    if (temp !== type) {\n                        return FALSE\n                    }\n                } else {\n                    type = temp\n                }\n            }\n            return type\n        }\n\n        function HandlerBundle() {}\n        HandlerBundle.prototype = {\n            validate: handlerModule.validate,\n            onPreProcess: function(dependency) {\n                var source = dependency.source,\n                    dfd = dependency.dfd,\n                    dependencies = settings[dependency.path],\n                    type, match, pledges, temp, i;\n                dependency.enqueue = FALSE;\n\n                function reject() {\n                    dfd.reject(new ClassFailure(ERROR_RESOLVE, dependency.id, arguments))\n                }\n                if (dependencies && (type = getType(dependencies))) {\n                    while (match = regexMatchSourcemap.exec(source)) {\n                        source = source.replace(match[0], \"\")\n                    }\n                    dependency.source = source;\n                    pledges = [];\n                    for (i = 0; temp = dependencies[i]; i++) {\n                        pledges.push(ClassDependency.resolve(MOCK_PREFIX + temp).pledge)\n                    }\n                    ClassPledge.all(pledges).then(function() {\n                        pledges.length = 0;\n                        for (i = 0; temp = dependencies[i]; i++) {\n                            temp = dependencies[i] = ClassDependency.get(temp) || new ClassDependency(temp);\n                            temp.handler = arguments[i];\n                            pledges.push(temp.pledge)\n                        }\n                        if (type === \"module\") {\n                            queue.enqueue.apply(queue, dependencies);\n                            handlerModule.process(dependency)\n                        } else {\n                            handlerModule.process(dependency);\n                            queue.enqueue.apply(queue, dependencies)\n                        }\n                        ClassPledge.all(pledges).then(dfd.resolve, reject)\n                    }, reject)\n                } else {\n                    reject()\n                }\n            }\n        };\n        return new(HandlerBundle.extends(abstractHandler))\n    }();\n    var handlerComponent = function() {\n        var suffix = \".html\",\n            regexMatchType = /^text\\/.+$/;\n\n        function HandlerComponent() {}\n        HandlerComponent.prototype = {\n            validate: function(type) {\n                return regexMatchType.test(type)\n            },\n            onPreRequest: function(dependency) {\n                var pathname = dependency.url.pathname;\n                dependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname\n            },\n            onPostRequest: function(dependency) {\n                dependency.source = functionResolveSourcemaps(dependency.url, dependency.source)\n            },\n            onPreProcess: function(dependency) {\n                var context = dependency.path,\n                    dfd = dependency.dfd,\n                    container = document.createElement(\"body\"),\n                    modules = [],\n                    pledges = [],\n                    node, handler, path, uri;\n                dependency.enqueue = FALSE;\n                container.innerHTML = dependency.source;\n\n                function reject() {\n                    dfd.reject(new ClassFailure(ERROR_RESOLVE, dependency.id, arguments))\n                }\n                while (node = container.firstElementChild) {\n                    if (handler = node.getAttribute(\"type\")) {\n                        path = node.getAttribute(\"path\");\n                        uri = handler + \"!\" + context + (path ? \"/\" + path : \"\");\n                        node.parentNode.removeChild(node);\n                        modules.push({\n                            source: node.textContent,\n                            uri: uri\n                        });\n                        pledges.push(ClassDependency.resolve(\"mock:\" + uri).pledge)\n                    }\n                }\n                ClassPledge.all(pledges).then(function() {\n                    var i = 0,\n                        module, dependency;\n                    pledges.length = 0;\n                    for (; module = modules[i]; i++) {\n                        dependency = ClassDependency.get(module.uri) || new ClassDependency(module.uri);\n                        dependency.source = functionResolveSourcemaps(dependency.url, module.source);\n                        dependency.handler = arguments[i];\n                        pledges.push(dependency.pledge);\n                        queue.enqueue(dependency)\n                    }\n                    ClassPledge.all(pledges).then(dfd.resolve, reject)\n                }, reject)\n            }\n        };\n        return new(HandlerComponent.extends(abstractHandler))\n    }();\n    var pluginGenie = function() {\n        var path = MODULE_PREFIX_PLUGIN + \"genie\",\n            pattern = [];\n\n        function matchPattern(path) {\n            var i = 0,\n                pointer, match;\n            for (; pointer = pattern[i]; i++) {\n                if (path.indexOf(pointer.prefix) === 0 && (!match || pointer.weight > match.weight)) {\n                    match = pointer\n                }\n            }\n            return match\n        }\n\n        function generateConfiguration(bundle) {\n            var matches = bundle.matches,\n                configuration = {\n                    pattern: {},\n                    modules: {\n                        \"/demand/handler/bundle\": {}\n                    }\n                },\n                i = 0,\n                pointer, dependency;\n            configuration.pattern[bundle.id] = bundle.fn(matches);\n            configuration.modules[MODULE_PREFIX_HANDLER + \"bundle\"][bundle.id] = pointer = [];\n            for (; dependency = matches[i]; i++) {\n                pointer.push(dependency.path)\n            }\n            return configuration\n        }\n\n        function resolveDependencies() {\n            var i = 0,\n                dependency;\n            for (; dependency = this[i]; i++) {\n                dependency.dfd.resolve(arguments[i])\n            }\n        }\n\n        function rejectDependencies() {\n            var i = 0,\n                dependency;\n            for (; dependency = this[i]; i++) {\n                dependency.dfd.reject(new ClassFailure(ERROR_RESOLVE, dependency.id))\n            }\n        }\n\n        function addPattern(property, value) {\n            pattern.push({\n                prefix: property,\n                weight: property.length,\n                fn: value\n            })\n        }\n\n        function resolveBundles(property, value) {\n            var matches = value.matches,\n                i = 0,\n                dependency;\n            if (matches.length > 1) {\n                value.id = path + \"/\" + functionHash(JSON.stringify(value.matches));\n                for (; dependency = matches[i]; i++) {\n                    matches[i] = new ClassDependency(dependency.uri)\n                }\n                demand.configure(generateConfiguration(value));\n                demand(\"bundle!\" + value.id).then(resolveDependencies.bind(matches), rejectDependencies.bind(matches))\n            }\n        }\n        demand.on(EVENT_POST_CONFIGURE + \":\" + path, function(options) {\n            if (validatorIsObject(options)) {\n                pattern.length = 0;\n                functionIterate(options, addPattern)\n            }\n        }).on(EVENT_PRE_RESOLVE, function(dependencies, context) {\n            var bundles = {},\n                i = 0,\n                dependency, pattern;\n            for (; dependency = dependencies[i]; i++) {\n                if (validatorIsTypeOf(dependency, STRING_STRING) && !regexMatchInternal.test(dependency) && !ClassDependency.get(dependency, context)) {\n                    dependency = new ClassDependency(dependency, context, FALSE);\n                    if (dependency.type === \"module\" && (pattern = matchPattern(dependency.path)) && !singletonCache.get(dependency)) {\n                        (bundles[pattern.prefix] || (bundles[pattern.prefix] = {\n                            fn: pattern.fn,\n                            matches: []\n                        })).matches.push(dependency)\n                    }\n                }\n            }\n            functionIterate(bundles, resolveBundles)\n        });\n        return TRUE\n    }();\n    queue = new ClassQueue;\n    processor = new ClassProcessor(queue);\n\n    function assignModule(id, module) {\n        provide(id, function() {\n            return module\n        })\n    }\n    assignModule(MODULE_PREFIX_ABSTRACT + \"uuid\", AbstractUuid);\n    assignModule(MODULE_PREFIX_ABSTRACT + \"handler\", abstractHandler);\n    assignModule(MODULE_PREFIX_HANDLER + \"module\", handlerModule);\n    assignModule(MODULE_PREFIX_HANDLER + \"bundle\", handlerBundle);\n    assignModule(MODULE_PREFIX_HANDLER + \"component\", handlerComponent);\n    assignModule(MODULE_PREFIX_PLUGIN + \"genie\", pluginGenie);\n    assignModule(MODULE_PREFIX_VALIDATOR + \"isTypeOf\", validatorIsTypeOf);\n    assignModule(MODULE_PREFIX_VALIDATOR + \"isArray\", validatorIsArray);\n    assignModule(MODULE_PREFIX_VALIDATOR + \"isObject\", validatorIsObject);\n    assignModule(MODULE_PREFIX_VALIDATOR + \"isInstanceOf\", validatorIsInstanceOf);\n    assignModule(MODULE_PREFIX_FUNCTION + \"resolveUrl\", functionResolveUrl);\n    assignModule(MODULE_PREFIX_FUNCTION + \"resolveSourcemaps\", functionResolveSourcemaps);\n    assignModule(MODULE_PREFIX_FUNCTION + \"merge\", functionMerge);\n    assignModule(MODULE_PREFIX_FUNCTION + \"iterate\", functionIterate);\n    assignModule(MODULE_PREFIX_FUNCTION + \"hash\", functionHash);\n    assignModule(MODULE_PREFIX_FUNCTION + \"defer\", functionDefer);\n    assignModule(MODULE_PREFIX_FUNCTION + \"uuid\", functionUuid);\n    assignModule(MODULE_PREFIX + \"weakmap\", ClassWeakmap);\n    assignModule(MODULE_PREFIX + \"descriptor\", ClassDescriptor);\n    assignModule(MODULE_PREFIX + \"pledge\", ClassPledge);\n    assignModule(MODULE_PREFIX + \"queue\", ClassQueue);\n    assignModule(MODULE_PREFIX + \"xhr\", ClassXhr);\n    assignModule(MODULE_PREFIX + \"failure\", ClassFailure);\n    if (options && options.main) {\n        switch (typeof options.main) {\n            case STRING_STRING:\n                demand(options.main);\n                break;\n            case STRING_FUNCTION:\n                provide(\"main\", options.main());\n                break\n        }\n    }\n})(this.name === \"demand-loader\" ? parent : this, setTimeout, clearTimeout);"]}