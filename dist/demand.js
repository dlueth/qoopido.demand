/**! Qoopido.demand 5.0.3 | https://github.com/dlueth/qoopido.demand | (c) 2018 Dirk Lueth */
!function(e,t,n){"use strict";function r(e,t,n,r){return{__proto__:me,value:e,enumerable:!!r,configurable:!!n,writable:!!t}}function i(e,t){return typeof e===t}function o(e){return e&&i(e,qe)}function u(e){return i(e,Re)&&isFinite(e)&&Math.floor(e)===e&&e>=0}function a(e,t){return e instanceof t}function c(e,t,n){for(var r,i=Qe.keys(e),o=0;(r=i[o])!==ye&&t.call(n,r,e[r])!==we;o++);return n}function s(e,t,n){return Je.call(e,t,n)}function f(){return+new Date}function l(e){return nt.href=e,nt.href}function d(e,t){var n=e.replace(D,"");return A.test(n)||O.test(n)||(n="/"+l((t&&l(t+"/../")||"/")+n).replace(T,"")),n}function h(e,t){var n=e.match(D);return(n&&n[1]?"mock:":"")+(n&&n[3]||ae.handler)+"!"+d(e,t)}function p(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=s(n)),this}function v(e){return"[object Array]"===Ve.call(e)}function g(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}function m(){return i(this.uuid,be)&&this.define("uuid",P()),this}function y(e,t){for(var n,r;n=$.exec(t);)nt.href=e,O.test(n[2])?r=nt.protocol+"//"+nt.host+n[3]:(nt.pathname+="/../"+n[3],r=nt.protocol+"//"+nt.host+nt.pathname),t=t.replace(n[0],n[1]+" "+n[2]+"="+r+".map"+(n[4]?" "+n[4]:""));return t}function w(){}function p(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=s(n)),this}function x(e,t){j(e,function(){return t})}var b,j,q,k,R,E,P,S,C,M,O,A,$,T,I,D,H,N,L,z,_,F,U,X,W,B,G,J,K,Q,V,Y,Z,ee,te,ne,re,ie,oe=e.document,ue="demand"in e&&e.demand,ae={version:"1.0.0",cache:{},timeout:8e3,pattern:{},modules:{},handler:"module"},ce="demand",se="provide",fe="/demand/",le=fe+"abstract/",de=fe+"handler/",he=fe+"plugin/",pe=fe+"function/",ve=fe+"validator/",ge="mock:",me=null,ye=void 0,we=!1,xe=!0,be="undefined",je="string",qe="object",ke="function",Re="number",Ee="pre",Pe="post",Se="Configure",Ce=Ee+Se,Me=Pe+Se,Oe="cache",Ae=Oe+"Miss",$e=Oe+"Hit",Te=Oe+"Exceed",Ie="Resolve",De=Ee+Ie,He=Pe+Ie,Ne="Request",Le=Ee+Ne,ze=Pe+Ne,_e="Process",Fe=Ee+_e,Ue=Pe+_e,Xe="queueEnqueue",We="error loading",Be="error resolving",Ge=Array.prototype,Je=Ge.slice,Ke=Ge.concat,Qe=Object,Ve=Qe.prototype.toString,Ye=Qe.create,Ze=Qe.defineProperty,et=Qe.getOwnPropertyNames,tt=Qe.getOwnPropertyDescriptor,nt=oe.createElement("a");if(function(t){function n(e,t,n,i,o){Ze(this,e,new r(t,n,i,o))}function i(e){for(var n,i=this,o=i[t],u=et(o),a={constructor:new r(i,xe,xe)},c=0;(n=u[c])&&!a[n];c++)a[n]=tt(o,n);try{i[t]=Ye(e[t]||e,a)}catch(e){}if(i[t]===o)throw new TypeError("Unable to extend, prototype is not writable");return i}n.call(Object.prototype,"define",n),n.call(e.Object.prototype,"define",n),Function.prototype.define("extends",i),e.Function.prototype.define("extends",i)}("prototype"),V=/^\bv?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?\b$/i,R=function(e){return i(e,je)&&V.test(e)},E=function(){function e(e,t){var n,r=this[e];t!==ye&&(o(t)?(n=o(r),r=t.length!==ye?n&&r.length!==ye?r:[]:n&&r.length===ye?r:{},this[e]=E(r,t)):this[e]=t)}return function(){for(var t,n=arguments[0],r=1;(t=arguments[r])!==ye;r++)c(t,e,n);return n}}(),P=function(){function e(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}var t=new RegExp("[xy]","g");return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e)}}(),te="setImmediate"in e,S="MutationObserver"in e?function(e){Z=oe.createElement("div"),new MutationObserver(function(){e()}).observe(Z,{attributes:xe}),Z.setAttribute("i","1")}:!te&&"postMessage"in e&&!("importScripts"in e)&&"addEventListener"in e?(Y={},e.addEventListener("message",function(t){var n;t.source===e&&t.data&&(n=Y[t.data])&&(n(),delete Y[t.data])},we),function(t){var n=P();Y[n]=t,e.postMessage(n,"*")}):!te&&"onreadystatechange"in(Z=oe.createElement("script"))?function(e){Z.onreadystatechange=function(){Z.onreadystatechange=me,Z.parentNode.removeChild(Z),e()},oe.body.appendChild(Z)}:(ee=te?setImmediate:t,function(e){ee(e)}),C=function(){function e(e,t,u){var a,c;if(i(t,je)&&i(u,ke))for(t=t.split(" ");a=t.shift();)a=a.split(":"),r.test(a[0])&&((o[a[0]]||(o[a[0]]={on:[],after:[]}))[e].push({callback:u,filter:a[1]}),e===n&&a[0]===Me&&(c=ae.modules[a[1]])&&u(c))}function t(){}var n="on",r=/^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)$/,o={};return t.prototype={emit:function(e,t){var r,i,u,a=o[e];if(a){for(r=s(arguments,2),i=0;u=a[n][i];i++)u.filter&&u.filter!==t||u.callback.apply(me,r);for(i=0;u=a.after[i];i++)u.filter&&u.filter!==t||u.callback.apply(me,r)}return this},on:function(t,r){return e(n,t,r),this},after:function(t,n){return e("after",t,n),this}},new t}(),ne=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,M=function(e){return e.replace(ne,"\\$&")},O=/^(http(s?):)?\/\//i,A=/^\//,$=/((?:\/\/|\/\*)#)\s*(sourceMappingURL)\s*=\s*(?!(?:http[s]?:)?\/\/)(.+?)\.map(?:\s+)?(\*\/)?/g,T=new RegExp("^"+M(l("/"))),I=new RegExp("^demand|"+se+"|path$"),D=/^(mock:)?([+-])?((?:[-\w]+\/?)+)?(?:@(.+?))?(?:#(\d+))?!/,H=function(){function e(e,t){return e<t?-1:e>t?1:0}function t(e){if(!R(e))throw new TypeError('"version" must be a valid semver version string');e=function(t){var n,r=e.split("-"),i=0;for(r=r[1]?Array.prototype.concat(r[0].split("."),r[1].split(".")):r[0].split(".");n=r[i];i++)r[i]=parseInt(n,10).toString()===n?parseInt(n,10):n;return r}(),this.major=e.slice(0,1),this.minor=e.slice(1,2),this.patch=e.slice(2,3),this.identifier=e.slice(3)}return t.prototype={toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.identifier.length?"-"+this.identifier.join("."):"")},compare:function(t){return e(this.major,t.major)||e(this.minor,t.minor)||e(this.patch,t.patch)||function(e,t){var n,r,i,o,u=0;if(e.length&&!t.length)return-1;if(!e.length&&t.length)return 1;if(!e.length&&!t.length)return 0;do{if(n=e[u],o=typeof(r=t[u]),(i=typeof n)===be&&o===be)return 0;if(o===be)return 1;if(i===be)return-1;if(n!==r){if(i===je&&o!==je)return 1;if(i!==je&&o===je)return-1;if(n>r)return 1;if(n<r)return-1}}while(++u)}(this.identifier,t.identifier)}},t}(),N=function(){function t(e){var t;return e.cache!==me?e.cache:(c(ae.cache,function(n,r){0===e.path.indexOf(n)&&(!t||r.weight>t.weight)&&(t=r)}),t?t.state:we)}function n(e){return w.getItem(e)}function r(e,t){w[t?"setItem":"removeItem"](e,t)}function i(e){var t,r=n(e);if(r&&(t=r.match(m)))return s(t,1)}function o(e,t){t[4]=f(),r(e,t.join(","))}function u(e,t,n){C.emit(e,t.id,t,n)}function a(){S(this.clear.expired.bind(this.clear))}var l,d="[demand]",p="[state]",v="[value]",g=new RegExp("^"+M(d)+"\\[(.+?)\\]"+M(p)+"$"),m=/^(.+?),(\d+),(\d*),(.+?),(\d+)$/,y=function(){try{return"localStorage"in e&&e.localStorage}catch(e){return we}}(),w=y?e.localStorage:me,x=y&&"remainingSpace"in w,j={};return C.on(Ae,function(e){S(function(){l.clear(e.id)})}).on(Te,function(e){b("-!/demand/cache/dispose").then(function(t){S(function(){t(e.source.length),l.set(e)})})}).on(ze,function(e){e.source&&t(e)&&(j[e.id]=xe)}).after(Ue,function(e){j[e.id]&&S(function(){l.set(e)})}),a.prototype={get:y?function(e){var r,u;if(t(e)){if(r=d+"["+e.id+"]",!(u=i(r+p)))return;return 1===e.version.compare(new H(u[0]))||u[2]&&e.lifetime&&u[2]<=f()?void(e.invalid=!0):(e.source=n(r+v),S(function(){o(r+p,u)}),xe)}}:function(){},resolve:y?function(e){this.get(e)?u($e,e):u(Ae,e)}:function(e){u(Ae,e)},set:y?function(e){var n,i,a;if(t(e)){n=[e.version,e.source.length,e.lifetime?f()+e.lifetime:me,b.version],i=d+"["+e.id+"]",u("preCache",e,n);try{if(a=x?w.remainingSpace:me,r(i+v,e.source),o(i+p,n),a!==me&&w.remainingSpace===a)throw new Error;u("postCache",e,n)}catch(t){u(Te,e)}}}:function(){},clear:y?function(e){var t=h(e),i=d+"["+t+"]";n(i+p)&&(r(i+p),r(i+v),u("cacheClear",F.get(t)||new F(t,me,we)))}:function(){}},a.prototype.clear.all=y?function(){var e;c(w,function(t){(e=t.match(g))&&this(e[1])},this)}:function(){},a.prototype.clear.expired=y?function(){var e,t;c(w,function(n){(e=n.match(g))&&(t=i(d+"["+e[1]+"]"+p))&&t[2]>0&&t[2]<=f()&&this(e[1])},this)}:function(){},l=new a}(),L="WeakMap"in e?e.WeakMap:function(){function e(e,t){var n;if((n=t[e.id])&&n[0]===t)return n}function t(){this.define("id",n+P())}var n="weakmap-";return t.prototype={set:function(t,n){var r=e(this,t);return r?r[1]=n:t.define(this.id,[t,n]),this},get:function(t){var n=e(this,t);if(n)return n[1]},delete:function(t){var n=e(this,t);n&&(n.length=0,delete t[this.id])},has:function(t){return!!e(this,t)}},t}(),z=function(){function e(e,n,r){e.then(function(){r.resolved[n]=s(arguments),r.count++,t(r)},function(){r.rejected.push(s(arguments)),t(r)})}function t(e){e.count===e.total?e.dfd.resolve.apply(me,Ke.apply([],e.resolved)):e.rejected.length+e.count===e.total&&e.dfd.reject.apply(me,Ke.apply([],e.rejected))}function n(e){var t=this;return u.set(t,{state:r,handle:function(e,t){var n,a,c=u.get(this);for(c.state===r&&(c.state=e,c.value=t);n=c[c.state].shift();)(a=n.handler.apply(me,c.value))&&"function"==typeof a.then?a.then(n.dfd.resolve,n.dfd.reject):n.dfd[c.state===i?"resolve":"reject"].apply(me,c.value);c[i].length=0,c[o].length=0}.bind(t),value:me,resolved:[],rejected:[],count:0}),e(function(){u.get(this).handle(i,arguments)}.bind(t),function(){u.get(this).handle(o,arguments)}.bind(t)),t}var r="pending",i="resolved",o="rejected",u=new L;return n.prototype={catch:function(e){return this.then(function(){},e)},always:function(e){return this.then(e,e)},then:function(e,t){var a=u.get(this),c=n.defer();return e&&a[i].push({handler:e,dfd:c}),t&&a[o].push({handler:t,dfd:c}),a.state!==r&&S(a.handle),c.pledge},isPending:function(){return u.get(this).state===r},isResolved:function(){return u.get(this).state===i},isRejected:function(){return u.get(this).state===o}},n.defer=function(){var e={};return e.pledge=new n(function(t,n){e.resolve=t,e.reject=n}),e},n.all=function(t){var r,i,o=n.defer(),u=0;if(t.length)for(r={dfd:o,resolved:[],rejected:[],total:t.length,count:0};i=t[u];u++)e(i,u,r);else o.resolve();return o.pledge},n.race=function(e){for(var t,r=n.defer(),i=0;t=e[i];i++)t.then(r.resolve,r.reject);return e.length||r.resolve(),r.pledge},n}(),_=function(){function e(){t.set(this,{})}var t=new L;return e.prototype={get:function(e){return e?t.get(this)[e]:t.get(this)},set:function(e,n){t.get(this)[e]=n},remove:function(e){delete t.get(this)[e]}},e}(),p.prototype={toString:function(){var e=this,t=ce+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=p.traverse(e.stack,t,1)),t}},p.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=p.traverse(r.stack,t,n+1));return t},F=function(){function e(e,t){this[e]=t}function t(e){v.test(e)||this.push(e)}function n(e,t){!v.test(e)&&t.pledge.isPending()&&this.push(e)}function r(e,t){!v.test(e)&&t.pledge.isResolved()&&this.push(e)}function i(e,t){!v.test(e)&&t.pledge.isRejected()&&this.push(e)}function o(){return c(l.get(),t,[])}function a(e,t,n){var r=this,i=e.match(D)||g;return r.path=d(e,t),r.mock=i[1]?xe:we,r.cache=i[2]?"+"===i[1]:me,r.type=i[3]||ae.handler,r.version=new H(i[4]||ae.version),r.lifetime=i[5]&&1e3*i[5]||ae.lifetime,r.id=(r.mock?ge:"")+r.type+"!"+r.path,r.uri=(r.mock?ge:"")+r.type+"@"+r.version+(u(r.lifetime)&&r.lifetime>0?"#"+r.lifetime:"")+"!"+r.path,r.dfd=z.defer(),r.pledge=r.dfd.pledge,r.invalid=!1,r.pledge.then(function(){r.value=s(arguments)}),n!==we&&l.set(r.id,r),r}var f="internal!",l=new _,v=/^(?:mock:|internal!)/i,g=[];return o.prototype={pending:function(){return c(l.get(),n,[])},resolved:function(){return c(l.get(),r,[])},rejected:function(){return c(l.get(),i,[])}},a.prototype={enqueue:!0},a.get=function(e,t){return l.get(h(e,t))},a.resolve=function(t,n){var r,i=n&&I.test(t),o=i?this.get(f+n+"/"+t):this.get(t,n);if(!o)if(i){switch(o=new a(f+n+"/"+t),t){case ce:r=c(b,e,b.bind(n));break;case se:r=j.bind(n);break;case"path":r=n}o.dfd.resolve(r)}else o=new a(t,n),b(de+o.type).then(function(e){o.handler=e,o.mock?o.dfd.resolve(e):N.resolve(o)},function(){o.dfd.reject(new p(We+" (handler)",self.id))});return o},a.remove=function(e,t,n){var r=h(e,t),i=oe.querySelector('[demand-id="'+r+'"]');l.remove(r),l.remove(ge+r),i&&i.parentNode.removeChild(i),n!==we&&N.clear(r)},a.list=o,a}(),U=function(){function e(e,t){this[e]={url:l(t).replace(n,"$1"),match:new RegExp("^"+M(t))}}function t(t,n){var r=this;r.weight=t.length,r.match=new RegExp("^"+M(t)),r.location=[].concat(n),c(r.location,e,r.location)}var n=/(.+)\/$/;return t.prototype={matches:function(e){return this.match.test(e)},process:function(e,t){var n=this.location[t];if(n)return e.replace(this.match,n.url)}},t}(),re=XMLHttpRequest,ie="XDomainRequest"in e&&e.XDomainRequest||re,X=function(e){var r,i=z.defer(),o=T.test(e)?new re:new ie,u=function(){this.readyState<4&&this.abort()}.bind(o),a=ae.timeout;return o.ontimeout=o.onerror=o.onabort=function(){i.reject(o.status)},o.onprogress=o.onreadystatechange=function(){n(r),r=t(u,a)},o.onload=function(){r=n(r),"status"in o&&200!==o.status?i.reject(o.status):i.resolve(o.responseText,o.getResponseHeader&&o.getResponseHeader("content-type"))},o.open("GET",e,xe),o.send(),r=t(u,a),i.pledge},b=function(){function t(e,t){this[e]={weight:e.length,state:t}}function n(e,t){"base"!==e&&(this[e]=new U(e,t))}function r(e,t){var n=this[e]=this[e]||{};C.emit(Ce,e,n),E(n,t),C.emit(Me,e,n)}function d(){var t,n,r=s(arguments),o=this!==e?this:me,u=0;for(C.emit(De,me,r,o);t=r[u];u++)i(t,je)?r[u]=F.resolve(t,o).pledge:(r[u]=(n=z.defer()).pledge,n.resolve(t));return(r.length>1?z.all(r):r[0]).always(function(){C.emit(He,me,r,o)})}return d.configure=function(e){var a=e.cache,s=e.version,f=e.timeout,l=e.lifetime,h=e.base,p=e.pattern,v=e.modules,g=ae.modules;return i(a,"boolean")?ae.cache[""]={weight:0,state:a}:o(a)&&c(a,t,ae.cache),R(s)&&(ae.version=s),u(f)&&(ae.timeout=1e3*Math.min(Math.max(f,2),20)),u(l)&&l>0&&(ae.lifetime=1e3*l),i(h,je)&&""!==h&&(ae.pattern.base=new U("",h)),o(p)&&c(p,n,ae.pattern),o(v)&&c(v,r,g),d},d.version="5.0.3",d.on=C.on.bind(d),d.get=function(e,t){var n=F.get(e,t);return n&&n.value},d.list=F.list,d.remove=F.remove,d.cache={clear:N.clear},C.after(Ae,function(e){new function(e){function t(t,n){n&&e.handler.validate&&!e.handler.validate(n)?e.dfd.reject(new p(We+" (content-type)",e.id)):(e.source=t,C.emit(ze,e.type,e))}function n(t){e.dfd.reject(new p(We+(t?" (status)":""),e.id))}var r,i=/^(?:\?|)$/;O.test(e.path)||c(ae.pattern,function(t,n){n.matches(e.path)&&(!r||r.weight<n.weight)&&(r=n)}),function o(u){u=u||0,e.url=oe.createElement("a"),e.url.href=r?l(r.process(e.path,u)):e.path,e.invalid&&(e.url.search+=(i.test(e.url.search)?"":"&")+f()),C.emit(Le,e.type,e),new X(e.url).then(t,r?function(){u++,r.location[u]?o(u):n()}:n)}()}(e)}).after(ze,function(e){var t=e.handler.onPostRequest;t&&t(e)}).after($e+" "+ze,function(e){C.emit(Fe,e.id,e)}).after(Le,function(e){var t=e.handler.onPreRequest;t&&t(e)}).after(Fe,function(e){var t=e.handler.onPreProcess;t&&t(e),e.pledge.then(function(){C.emit(Ue,e.id,e)}),!0===e.enqueue?q.enqueue(e):a(e.enqueue,z)&&e.enqueue.then(function(){q.enqueue(e)})}),d}(),e.define("demand",b),j=function(){var t,n,r=i(arguments[0],je)?arguments[0]:me,o=this!==e?this:me,u=v(arguments[r?1:0])?arguments[r?1:0]:me,a=u?arguments[r?2:1]:arguments[r?1:0];if(!r&&k.current&&(r=(t=k.current).uri,k.process()),r)return t=t||new F(r,o),n=i(a,ke),u?b.apply(t.path,u).then(function(){t.dfd.resolve(n?a.apply(me,arguments):a)},function(){t.dfd.reject(new p("error providing",t.id,arguments))}):t.dfd.resolve(n?a():a),t.dfd.pledge;!i(console,be)&&console.error(new p("unspecified anonymous provide"))},e.define("provide",j),b.configure({cache:xe,base:"/",pattern:{"/demand":l((ue&&ue.url||location.href)+"/../").slice(0,-1)}}),ue&&ue.settings&&b.configure(ue.settings),W=function(){function e(){var e=m.call(this);return t.set(e,[]),e}var t=new L;return e.prototype={enqueue:function(){t.set(this,t.get(this).concat(s(arguments))),C.emit(Xe,this.uuid)},dequeue:function(){return C.emit("queueDequeue",this.uuid),t.get(this).shift()},get current(){return t.get(this)[0]},get length(){return t.get(this).length}},e.extends(m)}(),B=function(){function e(e){var n=this,r={queue:e,current:me};t.set(n,r),b.on(Xe+":"+e.uuid,function(){!r.current&&n.process()})}var t=new L;return e.prototype={process:function(){var e,n=t.get(this);!n.queue.length||(e=n.current=n.queue.dequeue()).pledge.isRejected()?n.current=me:e.handler.process&&e.handler.process(e)},get current(){return t.get(this).current}},e}(),w.prototype={validate:me,onPreRequest:me,onPostRequest:me,onPreProcess:me,process:me},G=function(){function e(){}var t=oe.getElementsByTagName("head")[0],n=/^(application|text)\/(x-)?javascript/;return e.prototype={validate:function(e){return n.test(e)},onPreRequest:function(e){var t=e.url.pathname;e.url.pathname=".js"!==t.slice(-".js".length)?t+".js":t},onPostRequest:function(e){e.source=y(e.url,e.source)},process:function(e){var n;e.source&&((n=oe.createElement("script")).async=xe,n.text=e.source,n.setAttribute(ce+"-id",e.id),t.appendChild(n))}},new(e.extends(w))}(),p.prototype={toString:function(){var e=this,t=ce+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=p.traverse(e.stack,t,1)),t}},p.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=p.traverse(r.stack,t,n+1));return t},J=function(){function e(e,t){var n,r;for(n=0;r=t[n];n++)i(r,je)&&(t[n]=h(r))}function t(){}var n=de+"bundle",r={};return b.on(Me+":"+n,function(t){o(t)&&c(r=t,e)}),t.prototype={validate:G.validate,onPreProcess:function(e){function t(){s.reject(new p(Be,e.id,arguments))}var n,i,o,u,a,c=e.source,s=e.dfd,f=r[e.path];if(e.enqueue=we,f&&(n=function(e){for(var t,n,i=0;n=e[i];i++)if(n=(n=n.match(D))&&n[3]||r.handler,t){if(n!==t)return we}else t=n;return t}(f))){for(;i=$.exec(c);)c=c.replace(i[0],"");for(e.source=c,o=[],a=0;u=f[a];a++)o.push(F.resolve(ge+u).pledge);z.all(o).then(function(){for(o.length=0,a=0;u=f[a];a++)(u=f[a]=F.get(u)||new F(u)).handler=arguments[a],o.push(u.pledge);"module"===n?(q.enqueue.apply(q,f),G.process(e)):(G.process(e),q.enqueue.apply(q,f)),z.all(o).then(s.resolve,t)},t)}else t()}},new(t.extends(w))}(),K=function(){function e(){}var t=".html",n=/^text\/.+$/;return e.prototype={validate:function(e){return n.test(e)},onPreRequest:function(e){var n=e.url.pathname;e.url.pathname=n.slice(-t.length)!==t?n+t:n},onPostRequest:function(e){e.source=y(e.url,e.source)},onPreProcess:function(e){function t(){a.reject(new p(Be,e.id,arguments))}var n,r,i,o,u=e.path,a=e.dfd,c=oe.createElement("body"),s=[],f=[];for(e.enqueue=we,c.innerHTML=e.source;n=c.firstElementChild;)(r=n.getAttribute("type"))&&(o=r+"!"+u+((i=n.getAttribute("path"))?"/"+i:""),n.parentNode.removeChild(n),s.push({source:n.textContent,uri:o}),f.push(F.resolve("mock:"+o).pledge));z.all(f).then(function(){var e,n,r=0;for(f.length=0;e=s[r];r++)(n=F.get(e.uri)||new F(e.uri)).source=y(n.url,e.source),n.handler=arguments[r],f.push(n.pledge),q.enqueue(n);z.all(f).then(a.resolve,t)},t)}},new(e.extends(w))}(),Q=function(){function e(e){for(var t,n,r=0;t=u[r];r++)0===e.indexOf(t.prefix)&&(!n||t.weight>n.weight)&&(n=t);return n}function t(e,t){u.push({prefix:e,weight:e.length,fn:t})}function n(e,t){var n,i=t.matches,o=0;if(i.length>1){for(t.id=r+"/"+g(JSON.stringify(t.matches));n=i[o];o++)i[o]=new F(n.uri);b.configure(function(e){var t,n,r=e.matches,i={pattern:{},modules:{"/demand/handler/bundle":{}}},o=0;for(i.pattern[e.id]=e.fn(r),i.modules[de+"bundle"][e.id]=t=[];n=r[o];o++)t.push(n.path);return i}(t)),b("bundle!"+t.id).then(function(){for(var e,t=0;e=this[t];t++)e.dfd.resolve(arguments[t])}.bind(i),function(){for(var e,t=0;e=this[t];t++)e.dfd.reject(new p(Be,e.id))}.bind(i))}}var r=he+"genie",u=[];return b.on(Me+":"+r,function(e){o(e)&&(u.length=0,c(e,t))}).on(De,function(t,r){for(var o,u,a={},s=0;o=t[s];s++)!i(o,je)||I.test(o)||F.get(o,r)||"module"===(o=new F(o,r,we)).type&&(u=e(o.path))&&!N.get(o)&&(a[u.prefix]||(a[u.prefix]={fn:u.fn,matches:[]})).matches.push(o);c(a,n)}),xe}(),q=new W,k=new B(q),x(le+"uuid",m),x(le+"handler",w),x(de+"module",G),x(de+"bundle",J),x(de+"component",K),x(he+"genie",Q),x(ve+"isTypeOf",i),x(ve+"isArray",v),x(ve+"isObject",o),x(ve+"isInstanceOf",a),x(ve+"isSemver",R),x(pe+"resolveUrl",l),x(pe+"resolveSourcemaps",y),x(pe+"merge",E),x(pe+"iterate",c),x(pe+"hash",g),x(pe+"defer",S),x(pe+"uuid",P),x(fe+"weakmap",L),x(fe+"descriptor",r),x(fe+"pledge",z),x(fe+"queue",W),x(fe+"xhr",X),x(fe+"failure",p),x(fe+"semver",H),ue&&ue.main)switch(typeof ue.main){case je:b(ue.main);break;case ke:j("main",ue.main())}}("demand-loader"===this.name?parent:this,setTimeout,clearTimeout);
//# sourceMappingURL=demand.js.map
