/**! Qoopido.demand 7.2.0 | https://github.com/dlueth/qoopido.demand | (c) 2021 Dirk Lueth */
!function(e,t,n){"use strict";var r,i,o,a,u=e.document,c="demand"in e&&e.demand,s={version:"1.0.0",cache:{},timeout:8e3,pattern:{},modules:{},handler:"module"},f="mock:",d=null,l=void 0,h=!1,p=!0,m="undefined",v="string",g="boolean",y="function",w="postConfigure",b="cacheMiss",x="cacheExceed",j="preResolve",q="postResolve",k="preRequest",P="postRequest",R="preProcess",E="postProcess",M="queueEnqueue",C="provide",T="reject",A="error loading",S="error providing",O="error resolving",$="unspecified anonymous provide",I=Array.prototype,H=I.slice,N=I.concat,D=Object,L=D.create,B=D.defineProperty,F=D.getOwnPropertyNames,U=D.getOwnPropertyDescriptor,z=u.createElement("a"),W=e.requestAnimationFrame;function _(e,t,n,r){return{__proto__:d,value:e,enumerable:!!r,configurable:!!n,writable:!!t}}function X(e,t){return typeof e===t}function G(e){return e&&X(e,"object")}function J(e){return X(e,"number")&&isFinite(e)&&Math.floor(e)===e&&e>=0}function K(e){return e&&X(e.then,y)}!function(t){function n(e,t,n,r,i){B(this,e,new _(t,n,r,i))}function r(e){for(var t,n=this,r=n.prototype,i=F(r),o={constructor:new _(n,p,p)},a=0;(t=i[a])&&!o[t];a++)o[t]=U(r,t);try{n.prototype=L(e.prototype||e,o)}catch(e){}if(n.prototype===r)throw new TypeError("Unable to extend, prototype is not writable");return n}n.call(Object.prototype,"defineProperty",n),n.call(e.Object.prototype,"defineProperty",n),Function.prototype.defineProperty("extends",r),e.Function.prototype.defineProperty("extends",r)}();var Q,V=(Q=/^\bv?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?\b$/i,function(e){return X(e,v)&&Q.test(e)});function Y(e,t,n){for(var r,i=D.keys(e),o=0;(r=i[o])!==l&&t.call(n,r,e[r])!==h;o++);return n}var Z,ee,te=function(){function e(e,t){var n,r=this[e];t!==l&&(G(t)?(n=G(r),r=t.length!==l?n&&r.length!==l?r:[]:n&&r.length===l?r:{},this[e]=te(r,t)):this[e]=t)}return function(){for(var t,n=arguments[0],r=1;(t=arguments[r])!==l;r++)Y(t,e,n);return n}}(),ne=function(){var e=new RegExp("[xy]","g");function t(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t)}}(),re="setImmediate"in e&&"function"==typeof e.setImmediate?e.setImmediate:"MutationObserver"in e&&"function"==typeof e.MutationObserver?(Z={},ee=u.createElement("div"),new MutationObserver((function(e){e.forEach((function(e){var t=e.attributeName.substr(1);Z[t]&&Z[t](),delete Z[t]}))})).observe(ee,{attributes:p}),function(e){var t=ne();Z[t]=e,ee.setAttribute("i"+t,1)}):t;function ie(e,t,n){return H.call(e,t,n)}var oe=function(){var e=/^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)|provide|reject$/,t={};function n(n,r,i){var o,a;if(X(r,v)&&X(i,y))for(r=r.split(" ");o=r.shift();)o=o.split(":"),e.test(o[0])&&((t[o[0]]||(t[o[0]]={on:[],after:[]}))[n].push({callback:i,filter:o[1]}),"on"===n&&o[0]===w&&(a=s.modules[o[1]])&&i(a))}function r(){}return r.prototype={emit:function(e,n){var r,i,o,a=t[e];if(a){for(r=ie(arguments,2),i=0;o=a.on[i];i++)o.filter&&o.filter!==n||o.callback.apply(d,r);for(i=0;o=a.after[i];i++)o.filter&&o.filter!==n||o.callback.apply(d,r)}return this},on:function(e,t){return n("on",e,t),this},after:function(e,t){return n("after",e,t),this}},new r}(),ae="WeakMap"in e&&!("ActiveXObject"in e)?e.WeakMap:function(e){var t=new e;function n(){t.set(this,new e)}return n.prototype={get:function(e){return t.get(this).get(e)},set:function(e,n){return t.get(this).set(e,n),this},has:function(e){return!!this.get(e)},delete:function(e){return t.get(this).delete(e)}},n}(e.WeakMap);function ue(){return X(this.uuid,m)&&this.defineProperty("uuid",ne()),this}var ce=function(){var e=new ae;function t(){var t=ue.call(this);return e.set(t,[]),t}return t.prototype={enqueue:function(){var t=ie(arguments);e.set(this,e.get(this).concat(t)),oe.emit(M,this.uuid,t)},dequeue:function(){var t=e.get(this).shift();return t&&oe.emit("queueDequeue",this.uuid,t),t},get current(){return e.get(this)[0]},get length(){return e.get(this).length}},t.extends(ue)}(),se=function(){var r,i="object"==typeof e.safari&&e.safari.pushNotification?"beforeunload":"visibilitychange",o=e.requestIdleCallback||function(e,n){var r=+new Date;return t((function(){e({didTimeout:h,timeRemaining:function(){return Math.max(0,50-(+new Date-r))}})}),n&&n.timeout)},a=e.cancelIdleCallback||function(e){n(e)},c=new ce;function s(){c.dequeue()(),r=c.length&&o(s)}return e.addEventListener(i,(function(e){var t;if(c.length&&("visibilitychange"!==e.type||"hidden"===u.visibilityState))for(r=a(r);t=c.dequeue();)t()}),p),function(e){c.enqueue(e),!r&&c.length&&(r=o(s))}}();function fe(){return+new Date}function de(e){return z.href=e,z.href}var le=/^(http(s?):)?\/\//i,he=/^\.?\.\//,pe=/((?:\/\/|\/\*)#)\s*(sourceMappingURL)\s*=\s*(?!(?:http[s]?:)?\/\/)(.+?)\.map(?:\s+)?(\*\/)?/g,me=/^\//,ve=/\.\w+$/,ge=new RegExp("^"+de("/")),ye=new RegExp("^demand|provide|path|exports$"),we=/^(mock:)?([+-])?((?:[-\w]+\/?)+)?(?:@(.+?))?(?:#(\d+))?!/;function be(e,t){var n=e.replace(we,"");return he.test(n)&&(n="/"+de((t&&de(t+"/../")||"/")+n).replace(ge,"")),n}function xe(e,t){var n=e.match(we);return(n&&n[1]?"mock:":"")+(n&&n[3]||s.handler)+"!"+be(e,t)}var je=function(){function e(e,t){return e<t?-1:e>t?1:0}function t(e){if(!V(e))throw new TypeError('"version" must be a valid semver version string');e=function(e){var t,n=e.split("-"),r=0;for(n=n[1]?Array.prototype.concat(n[0].split("."),n[1].split(".")):n[0].split(".");t=n[r];r++)n[r]=parseInt(t,10).toString()===t?parseInt(t,10):t;return n}(e),this.major=e.shift(),this.minor=e.shift(),this.patch=e.shift(),this.identifier=e}return t.prototype={toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.identifier.length?"-"+this.identifier.join("."):"")},compare:function(t){return e(this.major,t.major)||e(this.minor,t.minor)||e(this.patch,t.patch)||function(e,t){var n,r,i,o,a=0;if(e.length&&!t.length)return-1;if(!e.length&&t.length)return 1;if(!e.length&&!t.length)return 0;do{if(n=e[a],o=typeof(r=t[a]),(i=typeof n)===m&&o===m)return 0;if(o===m)return 1;if(i===m)return-1;if(n===r);else{if(i===v&&o!==v)return 1;if(i!==v&&o===v)return-1;if(n>r)return 1;if(n<r)return-1}}while(++a)}(this.identifier,t.identifier)}},t}(),qe=function(){var t,n="[state]",i="[value]",o=new RegExp("^[demand]\\[(.+?)\\][state]$"),a=/^(.+?),(\d+),(\d*),(.+?),(\d+)$/,u=function(){try{return"localStorage"in e&&e.localStorage}catch(e){return h}}(),c=u?e.localStorage:d,f=u&&"remainingSpace"in c,l={};function m(e){var t;return e.cache!==d?e.cache:(Y(s.cache,(function(n,r){0===e.path.indexOf(n)&&(!t||r.weight>t.weight)&&(t=r)})),t?t.state:h)}function v(e){return c.getItem(e)}function g(e,t){c[t?"setItem":"removeItem"](e,t)}function y(e){var t,n=v(e);if(n&&(t=n.match(a)))return ie(t,1)}function w(e,t){t[4]=fe(),g(e,t.join(","))}function j(e,t,n){oe.emit(e,t.id,t,n)}function q(){se(this.clear.expired.bind(this.clear),s.delay)}return oe.on(b,(function(e){se((function(){t.clear(e.id)}))})).on(x,(function(e){r("-!/demand/cache/dispose").then((function(n){se((function(){n(e.source.length),t.set(e)}),s.delay)}))})).on(P,(function(e){e.source&&m(e)&&(l[e.id]=p)})).after(E,(function(e){l[e.id]&&se((function(){t.set(e)}),s.delay)})),q.prototype={get:u?function(e){var t,r;if(m(e)){if(t="[demand]["+e.id+"]",!(r=y(t+n)))return;return 1===e.version.compare(new je(r[0]))||r[2]&&e.lifetime&&r[2]<=fe()?void(e.invalid=!0):(e.source=v(t+i),se((function(){w(t+n,r)}),s.delay),p)}}:function(){},resolve:u?function(e){this.get(e)?j("cacheHit",e):j(b,e)}:function(e){j(b,e)},set:u?function(e){var t,o,a;if(m(e)){t=[e.version,e.source.length,e.lifetime?fe()+e.lifetime:d,r.version],o="[demand]["+e.id+"]",j("preCache",e,t);try{if(a=f?c.remainingSpace:d,g(o+i,e.source),w(o+n,t),a!==d&&c.remainingSpace===a)throw new Error;j("postCache",e,t)}catch(t){j(x,e)}}}:function(){},clear:u?function(e){var t=xe(e),r="[demand]["+t+"]";v(r+n)&&(g(r+n),g(r+i),j("cacheClear",Ce.get(t)||new Ce(t,d,h)))}:function(){}},q.prototype.clear.all=u?function(){var e;Y(c,(function(t){(e=t.match(o))&&this(e[1])}),this)}:function(){},q.prototype.clear.expired=u?function(){var e,t;Y(c,(function(r){(e=r.match(o))&&(t=y("[demand]["+e[1]+"]"+n))&&t[2]>0&&t[2]<=fe()&&this(e[1])}),this)}:function(){},t=new q}();function K(e){return e&&X(e.then,y)}function ke(e,t,n){var r=this;return r.message=e,t&&(r.module=t),n&&(r.stack=ie(n)),r}ke.prototype={toString:function(){var e=this,t=e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=ke.traverse(e.stack,t,1)),t}},ke.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=ke.traverse(r.stack,t,n+1));return t};var Pe,Re,Ee=function(){var e="pending",t="resolved",n="rejected",r=new ae;function i(){var e=this,n=arguments;re((function(){r.get(e).handle(t,n)}))}function o(){var e=this,t=arguments;re((function(){r.get(e).handle(n,t)}))}function a(n,i){var o,a,u=r.get(this);for(u.state===e&&(u.state=n,u.value=i);o=u[u.state].shift();)try{if(a=o.handler.apply(d,u.value),K(a)){a.then(o.dfd.resolve,o.dfd.reject);continue}if(u.state===t&&X(a,m)){o.dfd.resolve.apply(d,u.value);continue}o.dfd.resolve(a)}catch(e){o.dfd.reject(e)}u.resolved.length=0,u.rejected.length=0}function u(e,t,n){e.then((function(){n.resolved[t]=ie(arguments),n.count++,c(n)}),(function(){n.rejected.push(ie(arguments)),c(n)}))}function c(e){e.count===e.total?e.dfd.resolve.apply(d,N.apply([],e.resolved)):e.rejected.length+e.count===e.total&&e.dfd.reject.apply(d,N.apply([],e.rejected))}function s(t){var n=this;return r.set(n,{state:e,handle:a.bind(n),value:d,resolved:[],rejected:[],count:0}),t(i.bind(n),o.bind(n)),n}return s.prototype={isPending:function(){return r.get(this).state===e},isResolved:function(){return r.get(this).state===t},isRejected:function(){return r.get(this).state===n},then:function(t,n){var i=r.get(this),o=s.defer();return i.resolved.push({handler:t||s.resolve,dfd:o}),i.rejected.push({handler:n||s.reject,dfd:o}),i.state!==e&&re(i.handle),o.pledge},catch:function(e){return this.then(l,e)},always:function(e){return this.then(e,e)}},s.prototype.finally=s.prototype.always,s.defer=function(){var e={};return e.pledge=new s((function(t,n){e.resolve=t,e.reject=n})),e},s.all=function(e){var t,n,r=s.defer(),i=0;if(e.length)for(t={dfd:r,resolved:[],rejected:[],total:e.length,count:0};n=e[i];i++)u(n,i,t);else r.resolve();return r.pledge},s.race=function(e){for(var t,n=s.defer(),r=0;t=e[r];r++)t.then(n.resolve,n.reject);return e.length||n.resolve(),n.pledge},s.resolve=function(){var e=s.defer();return e.resolve.apply(d,arguments),e.pledge},s.reject=function(){var e=s.defer();return e.reject.apply(d,arguments),e.pledge},s}(),Me=function(){var e=new ae;function t(){e.set(this,{})}return t.prototype={get:function(t){return t?e.get(this)[t]:e.get(this)},set:function(t,n){e.get(this)[t]=n},remove:function(t){delete e.get(this)[t]}},t}(),Ce=function(){var e="internal!",t=new Me,n=/^(?:mock:|internal!)/i,o=[];function c(e,t){this[e]=t}function l(e){n.test(e)||this.push(e)}function m(e,t){!n.test(e)&&t.pledge.isPending()&&this.push(e)}function v(e,t){!n.test(e)&&t.pledge.isResolved()&&this.push(e)}function g(e,t){!n.test(e)&&t.pledge.isRejected()&&this.push(e)}function y(){return Y(t.get(),l,[])}function w(e,n,r){var i=this,u=e.match(we)||o;return i.path=be(e,n),i.mock=u[1]?p:h,i.cache=u[2]?"+"===u[1]:d,i.type=u[3]||s.handler,i.version=new je(u[4]||s.version),i.lifetime=u[5]&&1e3*u[5]||s.lifetime,i.id=(i.mock?f:"")+i.type+"!"+i.path,i.uri=(i.mock?f:"")+i.type+"@"+i.version+(J(i.lifetime)&&i.lifetime>0?"#"+i.lifetime:"")+"!"+i.path,i.dfd=Ee.defer(),i.pledge=i.dfd.pledge,i.invalid=!1,i.pledge.then((function(){i.value=ie(arguments)}),(function(){a.current&&a.process()})),r!==h&&t.set(i.id,i),i}return y.pending=function(){return Y(t.get(),m,[])},y.resolved=function(){return Y(t.get(),v,[])},y.rejected=function(){return Y(t.get(),g,[])},w.prototype={enqueue:!0},w.get=function(e,n){return t.get(xe(e,n))},w.resolve=function(t,n){var o,a=n&&ye.test(t),u=a?this.get(e+n+"/"+t):this.get(t,n);if(!u)if(a){switch(u=new w(e+n+"/"+t),t){case"demand":o=Y(r,c,r.bind(n));break;case"provide":o=i.bind(n);break;case"path":o=n;break;case"exports":o=this.get(n).value={}}u.dfd.resolve(o)}else u=new w(t,n),r("/demand/handler/"+u.type).then((function(e){u.handler=e,u.mock?u.dfd.resolve(e):qe.resolve(u)}),(function(){u.dfd.reject(new ke(A+" (handler)",self.id))}));return u},w.remove=function(e,n,r){var i=xe(e,n),o=u.querySelector('[demand-id="'+i+'"]');t.remove(i),t.remove(f+i),o&&o.parentNode.removeChild(o),r!==h&&qe.clear(i)},w.list=y,w}(),Te=function(){var e=/(.+)\/$/;function t(t,n){this[t]={url:de(n).replace(e,"$1"),match:new RegExp("^"+n)}}function n(e,n){var r=this;r.weight=e.length,r.match=new RegExp("^"+e),r.location=[].concat(n),Y(r.location,t,r.location)}return n.prototype={matches:function(e){return this.match.test(e)},process:function(e,t){var n=this.location[t];if(n)return e.replace(this.match,n.url)}},n}(),Ae=function(){var e={};function t(e){return e instanceof ArrayBuffer||e instanceof MessagePort||"ImageBitmap"in self&&e instanceof ImageBitmap}return function(n){var r,i;return r="$task = "+n+"; $isTransferable = "+t+"; onmessage = "+function(e){var t,n=Array.prototype.slice,r=e.data;function i(e){t||(t=!0,postMessage([r[0],0,e.toString()]))}try{$task.apply($task,[function(){var e;t||(t=!0,e=n.call(arguments),postMessage([r[0],1,e],e.filter($isTransferable)))},i].concat(r[1]))}catch(e){i(e)}},(i=new Worker(URL.createObjectURL(new Blob([r],{type:"application/javascript"})))).onmessage=function(t){var n=t.data[0],r=n?e[n]:null;n&&r&&(t.data[1]?r.resolve.apply(null,t.data[2]):r.reject(t.data[2]),delete e[n])},function(){var n=Ee.defer(),r=ne(),o=ie(arguments);return e[r]=n,i.postMessage([r,o],o.filter(t)),n.pledge}}}(),Se=(Pe=/^(?:\?|)$/,Re=new Ae((function(e,t,n){var r,i,o=new XMLHttpRequest;r=function(){this.readyState<4&&this.abort()}.bind(o),o.ontimeout=o.onerror=o.onabort=function(){t(o.statusText)},o.onprogress=o.onreadystatechange=function(){self.clearTimeout(i),i=self.setTimeout(r,1e4)},o.onload=function(){i=self.clearTimeout(i),"status"in o&&200!==o.status?t(o.statusText):e(o.responseText,o.getResponseHeader&&o.getResponseHeader("content-type"))},o.open("GET",n,!0),o.send(),i=self.setTimeout(r,1e4)})),function(e){var t;function n(t,n){n&&e.handler.validate&&!e.handler.validate(n)?e.dfd.reject(new ke(A+" (content-type)",e.id)):(e.source=t,oe.emit(P,e.type,e))}le.test(e.path)||Y(s.pattern,(function(n,r){r.matches(e.path)&&(!t||t.weight<r.weight)&&(t=r)})),function r(i){i=i||0,e.url=u.createElement("a"),e.url.href=t?de(t.process(e.path,i)):e.path,oe.emit(k,e.type,e),(e.invalid||!1===e.cache)&&(e.url.search+=(Pe.test(e.url.search)?"":"&")+fe()),Re(e.url.href).then(n,(function(n){var o;i++,t&&t.location[i]?r(i):(o=n,e.dfd.reject(new ke(A+(o?" (status)":""),e.id)))}))}()});function Oe(e){return Array.isArray(e)}function $e(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}r=function(){function t(e,t){this[e]={weight:e.length,state:t}}function n(e,t){"base"!==e&&(this[e]=new Te(e,t))}function r(e,t){var n=this[e]=this[e]||{};oe.emit("preConfigure",e,n),te(n,t),oe.emit(w,e,n)}function i(){var t,n,r,i=ie(arguments),o=this!==e?this:d,a=[],u=0;for(oe.emit(j,d,i,o);t=i[u];u++)X(t,v)?i[u]=Ce.resolve(t,o):(i[u]=n=Ee.defer(),n.resolve(t)),a.push(i[u].pledge);return(r=i.length>1?Ee.all(a):a[0]).always((function(){if(oe.emit(q,d,a,o),r.isRejected())return Y(i,(function(e,t){t.pledge.isRejected()&&oe.emit(T,t.path,t)})),Ee.reject.apply(null,arguments)}))}return Object.defineProperty(i,"idle",{get:function(){return!!s.idle},enumerable:!0,configurable:!1}),i.configure=function(e){var o=e.cache,a=e.idle,u=e.version,c=e.delay,f=e.timeout,d=e.lifetime,l=e.base,h=e.pattern,p=e.modules,m=s.modules;return X(o,g)?s.cache[""]={weight:0,state:o}:G(o)&&Y(o,t,s.cache),X(a,g)&&(s.idle=a),V(u)&&(s.version=u),J(c)&&(s.delay=1e3*c),J(f)&&(s.timeout=1e3*Math.min(Math.max(f,2),20)),J(d)&&d>0&&(s.lifetime=1e3*d),X(l,v)&&""!==l&&(s.pattern.base=new Te("",l)),G(h)&&Y(h,n,s.pattern),G(p)&&Y(p,r,m),i},i.version="7.2.0",i.on=oe.on.bind(i),i.get=function(e,t){var n=Ce.get(e,t);return n&&n.value},i.list=Ce.list,i.remove=Ce.remove,i.cache={clear:qe.clear},oe.after(b,(function(e){new Se(e)})).after(P,(function(e){var t=e.handler.onPostRequest;t&&t(e)})).after("cacheHit postRequest",(function(e){oe.emit(R,e.id,e)})).after(k,(function(e){var t=e.handler.onPreRequest;t&&t(e)})).after(R,(function(e){var t=e.handler.onPreProcess;t&&t(e),e.pledge.then((function(){oe.emit(E,e.id,e)})),!0===e.enqueue?o.enqueue(e):K(e.enqueue)&&e.enqueue.then((function(){o.enqueue(e)}))})),i}(),e.defineProperty("demand",r),(i=function(){var t,n,i,o,u=X(arguments[0],v)?arguments[0]:d,c=this!==e?this:d,s=Oe(arguments[u?1:0])?arguments[u?1:0]:d,f=s?arguments[u?2:1]:arguments[u?1:0];if(a.current&&(u=(t=a.current).uri,a.process()),u){if(t=t||new Ce(u,c),n=K(f),i=X(f,y),s&&s.length)r.apply(t.path,s).then((function(){if(i)try{o=f.apply(d,arguments),!t.value&&K(o)?o.then(t.dfd.resolve,(function(){t.dfd.reject(new ke(S,t.id,arguments))})):t.dfd.resolve(t.value||o)}catch(e){console.error(e),t.dfd.reject(new ke(S,t.id,e))}else t.dfd.resolve(f)}),(function(){t.dfd.reject(new ke(S,t.id,arguments))}));else if(n)f.then(t.dfd.resolve,t.dfd.reject);else if(i)try{t.dfd.resolve(f())}catch(e){console.error(e),t.dfd.reject(new ke(S,t.id,e))}else t.dfd.resolve(f);return t.dfd.pledge.then((function(){oe.emit(C,t.path,t)})),t.dfd.pledge}throw new Error($)}).amd=!0,e.defineProperty("provide",i),r.configure({cache:p,base:"/",pattern:{"/demand":de((c&&c.url||location.href)+"/../").slice(0,-1)}}),c&&c.settings&&r.configure(c.settings);var Ie=function(){var e=new ae;function t(t){var n=this,i={queue:t,current:d};e.set(n,i),r.on("queueEnqueue:"+t.uuid,(function(){!i.current&&n.process()}))}return t.prototype={process:function(){var t,n=e.get(this);n.queue.length&&(t=n.current=n.queue.dequeue()).pledge.isPending()?t.handler.process&&t.handler.process(t):n.current=d},get current(){return e.get(this).current}},t}();function He(e,t){for(var n,r;n=pe.exec(t);)le.test(n[3])?r=e.protocol+"//"+e.host+n[3]:(e.pathname+=(ve.test(e.pathname)?"/../":"/")+n[3].replace(me,""),r=e.protocol+"//"+e.host+e.pathname),t=t.replace(n[0],n[1]+" "+n[2]+"="+r+".map"+(n[4]?" "+n[4]:""));return t}var Ne,De,Le=(Ne=performance.now(),De=[Ne],W((function e(){Ne=performance.now(),De.push(Ne),De=De.slice(-300),W(e)})),function(){return Math.floor(De.length/((Ne-De[0])/1e3))}),Be=function(){var e,t,n=new ce,r=1e3/60*(Math.min(60,Le())/60*.2),i=0;function o(u){t=performance.now(),e(),i+=performance.now()-t,e=e=n.dequeue(),i<r?e&&o(u):(i=0,e&&(u?se(a.bind(null,u)):a(u)))}function a(e){W(e?o.bind(null,e):o)}return function(t,r){n.enqueue(r),!e&&(e=n.dequeue())&&(t?se(a.bind(null,t)):a(t))}}();function Fe(){}Fe.prototype={validate:d,onPreRequest:d,onPostRequest:d,onPreProcess:d,process:d};var Ue=function(){var t=u.getElementsByTagName("head")[0],n=/^(application|text)\/(x-)?javascript/,o={umd:!1,suffix:".js"};function a(){}return r.on("postConfigure:/demand/handler/module",(function(e){G(e)&&te(o,e)})),a.prototype={validate:function(e){return n.test(e)},onPreRequest:function(e,t){var n;(t=typeof t!==m?t:o.suffix)&&0!==e.path.indexOf("@")&&(n=e.url.pathname,e.url.pathname=n.slice(-t.length)!==t?n+t:n)},onPostRequest:function(e){e.source=He(e.url,e.source)},onPreProcess:function(e){e.enqueue=new Ee(Be.bind(null,r.idle))},process:function(n){var r,a;n.source&&((r=u.createElement("script")).async=p,r.text=n.source,r.setAttribute("demand-id",n.id),o.umd&&(a=e.define,e.define=i),t.appendChild(r),o.umd&&(e.define=a))}},new(a.extends(Fe))}();function ke(e,t,n){var r=this;return r.message=e,t&&(r.module=t),n&&(r.stack=ie(n)),r}ke.prototype={toString:function(){var e=this,t=e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=ke.traverse(e.stack,t,1)),t}},ke.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=ke.traverse(r.stack,t,n+1));return t};var ze=function(){var e={};function t(e,t){var n,r;for(n=0;r=t[n];n++)X(r,v)&&(t[n]=xe(r))}function n(){}return r.on("postConfigure:/demand/handler/bundle",(function(n){G(n)&&Y(e=n,t)})),n.prototype={validate:Ue.validate,onPreProcess:function(t){var n,r,i,a,u,c=t.source,s=t.dfd,d=e[t.path];function l(){s.reject(new ke(O,t.id,arguments))}if(t.enqueue=h,d&&(n=function(t){for(var n,r,i=0;r=t[i];i++)if(r=(r=r.match(we))&&r[3]||e.handler,n){if(r!==n)return h}else n=r;return n}(d))){for(;r=pe.exec(c);)c=c.replace(r[0],"");for(t.source=c,i=[],u=0;a=d[u];u++)i.push(Ce.resolve(f+a).pledge);Ee.all(i).then((function(){for(i.length=0,u=0;a=d[u];u++)(a=d[u]=Ce.get(a)||new Ce(a)).handler=arguments[u],i.push(a.pledge);"module"===n?(o.enqueue.apply(o,d),Ue.process(t)):(Ue.process(t),o.enqueue.apply(o,d)),Ee.all(i).then(s.resolve,l)}),l)}else l()}},new(n.extends(Fe))}(),We=function(){var e=/^text\/.+$/,t={suffix:".html"};function n(){}return r.on("postConfigure:/demand/handler/component",(function(e){G(e)&&te(t,e)})),n.prototype={validate:function(t){return e.test(t)},onPreRequest:function(e,n){var r;(n=typeof n!==m?n:t.suffix)&&(r=e.url.pathname,e.url.pathname=r.slice(-n.length)!==n?r+n:r)},onPostRequest:function(e){e.source=He(e.url,e.source)},onPreProcess:function(e){var t,n,r,i,a=e.path,c=e.dfd,s=u.createElement("body"),f=[],d=[];function l(){c.reject(new ke(O,e.id,arguments))}for(e.enqueue=h,s.innerHTML=e.source;t=s.firstElementChild;)(n=t.getAttribute("type"))&&(i=n+"!"+a+((r=t.getAttribute("path"))?"/"+r:""),t.parentNode.removeChild(t),f.push({source:t.textContent,uri:i}),d.push(Ce.resolve("mock:"+i).pledge));Ee.all(d).then((function(){var t,n,r,i=[];for(d.length=0,t=0;n=f[t];t++)(r=Ce.get(n.uri)||new Ce(n.uri)).source=He(r.url,n.source),r.handler=arguments[t],i.push(r),d.push(r.pledge),o.enqueue(r);Ee.all(d).then((function(){var r=e.path.length+1,o={};for(t=0;n=arguments[t];t++)o[i[t].path.substr(r)||"main"]=n;c.resolve(o)}),l)}),l)}},new(n.extends(Fe))}(),_e=function(){var e="/demand/plugin/genie",t=[];function n(e){for(var n,r,i=0;n=t[i];i++)n.prefix.test(e)&&(!r||n.weight>r.weight)&&(r=n);return r}function i(){for(var e,t=0;e=this[t];t++)e.dfd.resolve(arguments[t])}function o(){for(var e,t=0;e=this[t];t++)e.dfd.reject(new ke(O,e.id))}function a(e,n){t.push({prefix:new RegExp("^"+e),weight:e.length,fn:n})}function u(t,n){var a,u=n.matches,c=0;if(u.length>1){for(n.id=e+"/"+$e(JSON.stringify(n.matches));a=u[c];c++)u[c]=new Ce(a.uri);r.configure(function(e){var t,n,r=e.matches,i={pattern:{},modules:{"/demand/handler/bundle":{}}},o=0;for(i.pattern[e.id]=e.fn(r),i.modules["/demand/handler/bundle"][e.id]=t=[];n=r[o];o++)t.push(n.path);return i}(n)),r("bundle!"+n.id).then(i.bind(u),o.bind(u))}}return r.on("postConfigure:"+e,(function(e){G(e)&&(t.length=0,Y(e,a))})).on(j,(function(e,t){for(var r,i,o={},a=0;r=e[a];a++)!X(r,v)||ye.test(r)||Ce.get(r,t)||"module"===(r=new Ce(r,t,h)).type&&(i=n(r.path))&&!qe.get(r)&&(o[i.prefix]||(o[i.prefix]={fn:i.fn,matches:[]})).matches.push(r);Y(o,u)})),p}();function Xe(e,t){i(e,(function(){return t}))}if(o=new ce,a=new Ie(o),Xe("/demand/abstract/uuid",ue),Xe("/demand/abstract/handler",Fe),Xe("/demand/handler/module",Ue),Xe("/demand/handler/bundle",ze),Xe("/demand/handler/component",We),Xe("/demand/plugin/genie",_e),Xe("/demand/validator/isTypeOf",X),Xe("/demand/validator/isArray",Oe),Xe("/demand/validator/isObject",G),Xe("/demand/validator/isInstanceOf",(function(e,t){return e instanceof t})),Xe("/demand/validator/isSemver",V),Xe("/demand/validator/isThenable",K),Xe("/demand/function/resolveUrl",de),Xe("/demand/function/resolveSourcemaps",He),Xe("/demand/function/merge",te),Xe("/demand/function/iterate",Y),Xe("/demand/function/hash",$e),Xe("/demand/function/defer",re),Xe("/demand/function/fps",Le),Xe("/demand/function/onIdle",se),Xe("/demand/function/onAnimationFrame",Be),Xe("/demand/function/uuid",ne),Xe("/demand/function/toArray",ie),Xe("/demand/task",Ae),Xe("/demand/weakmap",ae),Xe("/demand/descriptor",_),Xe("/demand/pledge",Ee),Xe("/demand/queue",ce),Xe("/demand/failure",ke),Xe("/demand/semver",je),c&&c.main)switch(typeof c.main){case v:r(c.main);break;case y:i("main",c.main())}}("demand-loader"===this.name?parent:this,setTimeout,clearTimeout);
//# sourceMappingURL=demand.js.map
