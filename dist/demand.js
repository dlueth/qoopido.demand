/**! Qoopido.demand 5.1.0 | https://github.com/dlueth/qoopido.demand | (c) 2018 Dirk Lueth */
!function(m,a,c){"use strict";function s(e,t,n,r){return{__proto__:we,value:e,enumerable:!!r,configurable:!!n,writable:!!t}}function h(e,t){return typeof e===t}function p(e){return e&&h(e,ke)}function v(e){return h(e,Ee)&&isFinite(e)&&Math.floor(e)===e&&0<=e}function n(e,t){return e instanceof t}function y(e,t,n){for(var r,i=Be.keys(e),o=0;(r=i[o])!==xe&&t.call(n,r,e[r])!==be;o++);return n}function w(e,t,n){return Xe.call(e,t,n)}function r(){return h(this.uuid,je)&&this.define("uuid",S()),this}function x(){return+new Date}function f(e){return Ye.href=e,Ye.href}function l(e,t){var n=e.replace(z,"");return D.test(n)||T.test(n)||(n="/"+f((t&&f(t+"/../")||"/")+n).replace(N,"")),n}function b(e,t){var n=e.match(z);return(n&&n[1]?"mock:":"")+(n&&n[3]||se.handler)+"!"+l(e,t)}function d(e,t,n){var r=this;return r.message=e,t&&(r.module=t),n&&(r.stack=w(n)),r}function t(n){function r(e,t){t&&n.handler.validate&&!n.handler.validate(t)?n.dfd.reject(new d(_e+" (content-type)",n.id)):(n.source=e,M.emit(De,n.type,n))}function i(e){n.dfd.reject(new d(_e+(e?" (status)":""),n.id))}var o,u=/^(?:\?|)$/;T.test(n.path)||y(se.pattern,function(e,t){t.matches(n.path)&&(!o||o.weight<t.weight)&&(o=t)}),function e(t){t=t||0,n.url=ae.createElement("a"),n.url.href=o?f(o.process(n.path,t)):n.path,n.invalid&&(n.url.search+=(u.test(n.url.search)?"":"&")+x()),M.emit(Te,n.type,n),new G(n.url).then(r,o?function(){t++,o.location[t]?e(t):i()}:i)}()}function u(e){return"[object Array]"===Ge.call(e)}function g(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}function j(e,t){for(var n,r;n=L.exec(t);)Ye.href=e,r=T.test(n[2])?Ye.protocol+"//"+Ye.host+n[3]:(Ye.pathname+="/../"+n[3],Ye.protocol+"//"+Ye.host+Ye.pathname),t=t.replace(n[0],n[1]+" "+n[2]+"="+r+".map"+(n[4]?" "+n[4]:""));return t}function i(){}function d(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=w(n)),this}function e(e,t){k(e,function(){return t})}var q,k,R,E,P,o,S,C,M,O,A,$,I,T,D,L,N,H,z,_,F,U,X,W,B,G,J,K,Q,V,Y,Z,ee,te,ne,re,ie,oe,ue,ae=m.document,ce="demand"in m&&m.demand,se={version:"1.0.0",cache:{},timeout:8e3,pattern:{},modules:{},handler:"module"},fe="demand",le="provide",de="/demand/",he=de+"abstract/",pe=de+"handler/",ve=de+"plugin/",ge=de+"function/",me=de+"validator/",ye="mock:",we=null,xe=void 0,be=!1,je="undefined",qe="string",ke="object",Re="function",Ee="number",Pe="post",Se=Pe+"Configure",Ce="cache",Me=Ce+"Miss",Oe=Ce+"Hit",Ae=Ce+"Exceed",$e="preResolve",Ie="Request",Te="pre"+Ie,De=Pe+Ie,Le="Process",Ne="pre"+Le,He=Pe+Le,ze="queueEnqueue",_e="error loading",Fe="error resolving",Ue=Array.prototype,Xe=Ue.slice,We=Ue.concat,Be=Object,Ge=Be.prototype.toString,Je=Be.create,Ke=Be.defineProperty,Qe=Be.getOwnPropertyNames,Ve=Be.getOwnPropertyDescriptor,Ye=ae.createElement("a");if(function(a){function e(e,t,n,r,i){Ke(this,e,new s(t,n,r,i))}function t(e){for(var t,n=this,r=n[a],i=Qe(r),o={constructor:new s(n,!0,!0)},u=0;(t=i[u])&&!o[t];u++)o[t]=Ve(r,t);try{n[a]=Je(e[a]||e,o)}catch(e){}if(n[a]===r)throw new TypeError("Unable to extend, prototype is not writable");return n}e.call(Object.prototype,"define",e),e.call(m.Object.prototype,"define",e),Function.prototype.define("extends",t),m.Function.prototype.define("extends",t)}("prototype"),Z=/^\bv?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?\b$/i,P=function(e){return h(e,qe)&&Z.test(e)},o=function(){function r(e,t){var n,r=this[e];t!==xe&&(p(t)?(n=p(r),r=t.length!==xe?n&&r.length!==xe?r:[]:n&&r.length===xe?r:{},this[e]=o(r,t)):this[e]=t)}return function(){for(var e,t=arguments[0],n=1;(e=arguments[n])!==xe;n++)y(e,r,t);return t}}(),S=function(){function e(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}var t=new RegExp("[xy]","g");return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e)}}(),re="setImmediate"in m,C="MutationObserver"in m?function(e){ee=ae.createElement("div"),new MutationObserver(function(){e()}).observe(ee,{attributes:!0}),ee.setAttribute("i","1")}:!re&&"postMessage"in m&&!("importScripts"in m)&&"addEventListener"in m?(ne={},m.addEventListener("message",function(e){var t;e.source===m&&e.data&&(t=ne[e.data])&&(t(),delete ne[e.data])},be),function(e){var t=S();ne[t]=e,m.postMessage(t,"*")}):!re&&"onreadystatechange"in(ee=ae.createElement("script"))?function(e){ee.onreadystatechange=function(){ee.onreadystatechange=we,ee.parentNode.removeChild(ee),e()},ae.body.appendChild(ee)}:(te=re?setImmediate:a,function(e){te(e)}),M=function(){function n(e,t,n){var r,i;if(h(t,qe)&&h(n,Re))for(t=t.split(" ");r=t.shift();)r=r.split(":"),o.test(r[0])&&((u[r[0]]||(u[r[0]]={on:[],after:[]}))[e].push({callback:n,filter:r[1]}),"on"===e&&r[0]===Se&&(i=se.modules[r[1]])&&n(i))}function e(){}var o=/^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)$/,u={};return e.prototype={emit:function(e,t){var n,r,i,o=u[e];if(o){for(n=w(arguments,2),r=0;i=o.on[r];r++)i.filter&&i.filter!==t||i.callback.apply(we,n);for(r=0;i=o.after[r];r++)i.filter&&i.filter!==t||i.callback.apply(we,n)}return this},on:function(e,t){return n("on",e,t),this},after:function(e,t){return n("after",e,t),this}},new e}(),O="WeakMap"in m?m.WeakMap:function(){function r(e,t){var n;if((n=t[e.id])&&n[0]===t)return n}function e(){this.define("id","weakmap-"+S())}return e.prototype={set:function(e,t){var n=r(this,e);return n?n[1]=t:e.define(this.id,[e,t]),this},get:function(e){var t=r(this,e);if(t)return t[1]},delete:function(e){var t=r(this,e);t&&(t.length=0,delete e[this.id])},has:function(e){return!!r(this,e)}},e}(),A=function(){function e(){var e=r.call(this);return t.set(e,[]),e}var t=new O;return e.prototype={enqueue:function(){var e=w(arguments);t.set(this,t.get(this).concat(e)),M.emit(ze,this.uuid,e)},dequeue:function(){var e=t.get(this).shift();return M.emit("queueDequeue",this.uuid,e),e},get current(){return t.get(this)[0]},get length(){return t.get(this).length}},e.extends(r)}(),$=function(){function t(){u.dequeue()(),u.length&&(r=n(t))}var r,i="object"==typeof m.safari&&m.safari.pushNotification?"beforeunload":"visibilitychange",n=m.requestIdleCallback||function(e){var t=+new Date;return a(function(){e({didTimeout:be,timeRemaining:function(){return Math.max(0,50-(+new Date-t))}})})},o=m.cancelIdleCallback||function(e){c(e)},u=new A;return m.addEventListener(i,function e(t){var n;if(u.length&&("visibilitychange"!==t.type||"hidden"===ae.visibilityState))for(m.removeEventListener(i,e,!0),r=o(r);n&&n(),n=u.dequeue(););},!0),function(e){u.enqueue(e),!r&&u.length&&(r=n(t))}}(),ie=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,I=function(e){return e.replace(ie,"\\$&")},T=/^(http(s?):)?\/\//i,D=/^\//,L=/((?:\/\/|\/\*)#)\s*(sourceMappingURL)\s*=\s*(?!(?:http[s]?:)?\/\/)(.+?)\.map(?:\s+)?(\*\/)?/g,N=new RegExp("^"+I(f("/"))),H=new RegExp("^demand|"+le+"|path$"),z=/^(mock:)?([+-])?((?:[-\w]+\/?)+)?(?:@(.+?))?(?:#(\d+))?!/,_=function(){function t(e,t){return e<t?-1:t<e?1:0}function e(i){if(!P(i))throw new TypeError('"version" must be a valid semver version string');i=function(e){var t,n=i.split("-"),r=0;for(n=n[1]?Array.prototype.concat(n[0].split("."),n[1].split(".")):n[0].split(".");t=n[r];r++)n[r]=parseInt(t,10).toString()===t?parseInt(t,10):t;return n}(),this.major=i.slice(0,1),this.minor=i.slice(1,2),this.patch=i.slice(2,3),this.identifier=i.slice(3)}return e.prototype={toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.identifier.length?"-"+this.identifier.join("."):"")},compare:function(e){return t(this.major,e.major)||t(this.minor,e.minor)||t(this.patch,e.patch)||function(e,t){var n,r,i,o,u=0;if(e.length&&!t.length)return-1;if(!e.length&&t.length)return 1;if(!e.length&&!t.length)return 0;do{if(n=e[u],o=typeof(r=t[u]),(i=typeof n)===je&&o===je)return 0;if(o===je)return 1;if(i===je)return-1;if(n===r);else{if(i===qe&&o!==qe)return 1;if(i!==qe&&o===qe)return-1;if(r<n)return 1;if(n<r)return-1}}while(++u)}(this.identifier,e.identifier)}},e}(),F=function(){function i(n){var r;return n.cache!==we?n.cache:(y(se.cache,function(e,t){0===n.path.indexOf(e)&&(!r||t.weight>r.weight)&&(r=t)}),r?r.state:be)}function r(e){return p.getItem(e)}function o(e,t){p[t?"setItem":"removeItem"](e,t)}function u(e){var t,n=r(e);if(n&&(t=n.match(h)))return w(t,1)}function a(e,t){t[4]=x(),o(e,t.join(","))}function c(e,t,n){M.emit(e,t.id,t,n)}function e(){$(this.clear.expired.bind(this.clear))}var n,s="[demand]",f="[state]",l="[value]",d=new RegExp("^"+I(s)+"\\[(.+?)\\]"+I(f)+"$"),h=/^(.+?),(\d+),(\d*),(.+?),(\d+)$/,t=function(){try{return"localStorage"in m&&m.localStorage}catch(e){return be}}(),p=t?m.localStorage:we,v=t&&"remainingSpace"in p,g={};return M.on(Me,function(e){$(function(){n.clear(e.id)})}).on(Ae,function(t){q("-!/demand/cache/dispose").then(function(e){$(function(){e(t.source.length),n.set(t)})})}).on(De,function(e){e.source&&i(e)&&(g[e.id]=!0)}).after(He,function(e){g[e.id]&&$(function(){n.set(e)})}),(e.prototype={get:t?function(e){var t,n;if(i(e)){if(t=s+"["+e.id+"]",!(n=u(t+f)))return;return 1===e.version.compare(new _(n[0]))||n[2]&&e.lifetime&&n[2]<=x()?void(e.invalid=!0):(e.source=r(t+l),$(function(){a(t+f,n)}),!0)}}:function(){},resolve:t?function(e){this.get(e)?c(Oe,e):c(Me,e)}:function(e){c(Me,e)},set:t?function(t){var e,n,r;if(i(t)){e=[t.version,t.source.length,t.lifetime?x()+t.lifetime:we,q.version],n=s+"["+t.id+"]",c("preCache",t,e);try{if(r=v?p.remainingSpace:we,o(n+l,t.source),a(n+f,e),r!==we&&p.remainingSpace===r)throw new Error;c("postCache",t,e)}catch(e){c(Ae,t)}}}:function(){},clear:t?function(e){var t=b(e),n=s+"["+t+"]";r(n+f)&&(o(n+f),o(n+l),c("cacheClear",W.get(t)||new W(t,we,be)))}:function(){}}).clear.all=t?function(){var t;y(p,function(e){(t=e.match(d))&&this(t[1])},this)}:function(){},e.prototype.clear.expired=t?function(){var t,n;y(p,function(e){(t=e.match(d))&&(n=u(s+"["+t[1]+"]"+f))&&0<n[2]&&n[2]<=x()&&this(t[1])},this)}:function(){},n=new e}(),U=function(){function o(e,t,n){e.then(function(){n.resolved[t]=w(arguments),n.count++,r(n)},function(){n.rejected.push(w(arguments)),r(n)})}function r(e){e.count===e.total?e.dfd.resolve.apply(we,We.apply([],e.resolved)):e.rejected.length+e.count===e.total&&e.dfd.reject.apply(we,We.apply([],e.rejected))}function u(e){var t=this;return f.set(t,{state:a,handle:function(e,t){var n,r,i=f.get(this);for(i.state===a&&(i.state=e,i.value=t);n=i[i.state].shift();)(r=n.handler.apply(we,i.value))&&"function"==typeof r.then?r.then(n.dfd.resolve,n.dfd.reject):n.dfd[i.state===c?"resolve":"reject"].apply(we,i.value);i[c].length=0,i[s].length=0}.bind(t),value:we,resolved:[],rejected:[],count:0}),e(function(){f.get(this).handle(c,arguments)}.bind(t),function(){f.get(this).handle(s,arguments)}.bind(t)),t}var a="pending",c="resolved",s="rejected",f=new O;return u.prototype={catch:function(e){return this.then(function(){},e)},always:function(e){return this.then(e,e)},then:function(e,t){var n=f.get(this),r=u.defer();return e&&n[c].push({handler:e,dfd:r}),t&&n[s].push({handler:t,dfd:r}),n.state!==a&&C(n.handle),r.pledge},isPending:function(){return f.get(this).state===a},isResolved:function(){return f.get(this).state===c},isRejected:function(){return f.get(this).state===s}},u.defer=function(){var n={};return n.pledge=new u(function(e,t){n.resolve=e,n.reject=t}),n},u.all=function(e){var t,n,r=u.defer(),i=0;if(e.length)for(t={dfd:r,resolved:[],rejected:[],total:e.length,count:0};n=e[i];i++)o(n,i,t);else r.resolve();return r.pledge},u.race=function(e){for(var t,n=u.defer(),r=0;t=e[r];r++)t.then(n.resolve,n.reject);return e.length||n.resolve(),n.pledge},u}(),X=function(){function e(){n.set(this,{})}var n=new O;return e.prototype={get:function(e){return e?n.get(this)[e]:n.get(this)},set:function(e,t){n.get(this)[e]=t},remove:function(e){delete n.get(this)[e]}},e}(),d.prototype={toString:function(){var e=this,t=fe+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=d.traverse(e.stack,t,1)),t}},d.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=d.traverse(r.stack,t,n+1));return t},W=function(){function o(e,t){this[e]=t}function e(e){s.test(e)||this.push(e)}function t(e,t){!s.test(e)&&t.pledge.isPending()&&this.push(e)}function n(e,t){!s.test(e)&&t.pledge.isResolved()&&this.push(e)}function r(e,t){!s.test(e)&&t.pledge.isRejected()&&this.push(e)}function i(){return y(c.get(),e,[])}function u(e,t,n){var r=this,i=e.match(z)||f;return r.path=l(e,t),r.mock=!!i[1]||be,r.cache=i[2]?"+"===i[1]:we,r.type=i[3]||se.handler,r.version=new _(i[4]||se.version),r.lifetime=i[5]&&1e3*i[5]||se.lifetime,r.id=(r.mock?ye:"")+r.type+"!"+r.path,r.uri=(r.mock?ye:"")+r.type+"@"+r.version+(v(r.lifetime)&&0<r.lifetime?"#"+r.lifetime:"")+"!"+r.path,r.dfd=U.defer(),r.pledge=r.dfd.pledge,r.invalid=!1,r.pledge.then(function(){r.value=w(arguments)}),n!==be&&c.set(r.id,r),r}var a="internal!",c=new X,s=/^(?:mock:|internal!)/i,f=[];return i.pending=function(){return y(c.get(),t,[])},i.resolved=function(){return y(c.get(),n,[])},i.rejected=function(){return y(c.get(),r,[])},u.prototype={enqueue:!0},u.get=function(e,t){return c.get(b(e,t))},u.resolve=function(e,t){var n,r=t&&H.test(e),i=r?this.get(a+t+"/"+e):this.get(e,t);if(!i)if(r){switch(i=new u(a+t+"/"+e),e){case fe:n=y(q,o,q.bind(t));break;case le:n=k.bind(t);break;case"path":n=t}i.dfd.resolve(n)}else i=new u(e,t),q(pe+i.type).then(function(e){i.handler=e,i.mock?i.dfd.resolve(e):F.resolve(i)},function(){i.dfd.reject(new d(_e+" (handler)",self.id))});return i},u.remove=function(e,t,n){var r=b(e,t),i=ae.querySelector('[demand-id="'+r+'"]');c.remove(r),c.remove(ye+r),i&&i.parentNode.removeChild(i),n!==be&&F.clear(r)},u.list=i,u}(),B=function(){function r(e,t){this[e]={url:f(t).replace(n,"$1"),match:new RegExp("^"+I(t))}}function e(e,t){var n=this;n.weight=e.length,n.match=new RegExp("^"+I(e)),n.location=[].concat(t),y(n.location,r,n.location)}var n=/(.+)\/$/;return e.prototype={matches:function(e){return this.match.test(e)},process:function(e,t){var n=this.location[t];if(n)return e.replace(this.match,n.url)}},e}(),oe=XMLHttpRequest,ue="XDomainRequest"in m&&m.XDomainRequest||oe,G=function(e){var t,n=U.defer(),r=N.test(e)?new oe:new ue,i=function(){this.readyState<4&&this.abort()}.bind(r),o=se.timeout;return r.ontimeout=r.onerror=r.onabort=function(){n.reject(r.status)},r.onprogress=r.onreadystatechange=function(){c(t),t=a(i,o)},r.onload=function(){t=c(t),"status"in r&&200!==r.status?n.reject(r.status):n.resolve(r.responseText,r.getResponseHeader&&r.getResponseHeader("content-type"))},r.open("GET",e,!0),r.send(),t=a(i,o),n.pledge},q=function(){function s(e,t){this[e]={weight:e.length,state:t}}function f(e,t){"base"!==e&&(this[e]=new B(e,t))}function l(e,t){var n=this[e]=this[e]||{};M.emit("preConfigure",e,n),o(n,t),M.emit(Se,e,n)}function d(){var e,t,n=w(arguments),r=this!==m?this:we,i=0;for(M.emit($e,we,n,r);e=n[i];i++)h(e,qe)?n[i]=W.resolve(e,r).pledge:(n[i]=(t=U.defer()).pledge,t.resolve(e));return(1<n.length?U.all(n):n[0]).always(function(){M.emit("postResolve",we,n,r)})}return d.configure=function(e){var t=e.cache,n=e.version,r=e.timeout,i=e.lifetime,o=e.base,u=e.pattern,a=e.modules,c=se.modules;return h(t,"boolean")?se.cache[""]={weight:0,state:t}:p(t)&&y(t,s,se.cache),P(n)&&(se.version=n),v(r)&&(se.timeout=1e3*Math.min(Math.max(r,2),20)),v(i)&&0<i&&(se.lifetime=1e3*i),h(o,qe)&&""!==o&&(se.pattern.base=new B("",o)),p(u)&&y(u,f,se.pattern),p(a)&&y(a,l,c),d},d.version="5.1.0",d.on=M.on.bind(d),d.get=function(e,t){var n=W.get(e,t);return n&&n.value},d.list=W.list,d.remove=W.remove,d.cache={clear:F.clear},M.after(Me,function(e){new t(e)}).after(De,function(e){var t=e.handler.onPostRequest;t&&t(e)}).after(Oe+" "+De,function(e){M.emit(Ne,e.id,e)}).after(Te,function(e){var t=e.handler.onPreRequest;t&&t(e)}).after(Ne,function(e){var t=e.handler.onPreProcess;t&&t(e),e.pledge.then(function(){M.emit(He,e.id,e)}),!0===e.enqueue?R.enqueue(e):n(e.enqueue,U)&&e.enqueue.then(function(){R.enqueue(e)})}),d}(),m.define("demand",q),k=function(){var e,t,n=h(arguments[0],qe)?arguments[0]:we,r=this!==m?this:we,i=u(arguments[n?1:0])?arguments[n?1:0]:we,o=i?arguments[n?2:1]:arguments[n?1:0];if(!n&&E.current&&(n=(e=E.current).uri,E.process()),n)return e=e||new W(n,r),t=h(o,Re),i?q.apply(e.path,i).then(function(){e.dfd.resolve(t?o.apply(we,arguments):o)},function(){e.dfd.reject(new d("error providing",e.id,arguments))}):e.dfd.resolve(t?o():o),e.dfd.pledge;!h(console,je)&&console.error(new d("unspecified anonymous provide"))},m.define("provide",k),q.configure({cache:!0,base:"/",pattern:{"/demand":f((ce&&ce.url||location.href)+"/../").slice(0,-1)}}),ce&&ce.settings&&q.configure(ce.settings),J=function(){function e(e){var t=this,n={queue:e,current:we};r.set(t,n),q.on(ze+":"+e.uuid,function(){!n.current&&t.process()})}var r=new O;return e.prototype={process:function(){var e,t=r.get(this);!t.queue.length||(e=t.current=t.queue.dequeue()).pledge.isRejected()?t.current=we:e.handler.process&&e.handler.process(e)},get current(){return r.get(this).current}},e}(),i.prototype={validate:we,onPreRequest:we,onPostRequest:we,onPreProcess:we,process:we},K=function(){function e(){}var n=ae.getElementsByTagName("head")[0],t=/^(application|text)\/(x-)?javascript/;return e.prototype={validate:function(e){return t.test(e)},onPreRequest:function(e){var t=e.url.pathname;e.url.pathname=".js"!==t.slice(-".js".length)?t+".js":t},onPostRequest:function(e){e.source=j(e.url,e.source)},process:function(e){var t;e.source&&((t=ae.createElement("script")).async=!0,t.text=e.source,t.setAttribute(fe+"-id",e.id),n.appendChild(t))}},new(e.extends(i))}(),d.prototype={toString:function(){var e=this,t=fe+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=d.traverse(e.stack,t,1)),t}},d.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=d.traverse(r.stack,t,n+1));return t},Q=function(){function t(e,t){var n,r;for(n=0;r=t[n];n++)h(r,qe)&&(t[n]=b(r))}function e(){}var f={};return q.on(Se+":/demand/handler/bundle",function(e){p(e)&&y(f=e,t)}),e.prototype={validate:K.validate,onPreProcess:function(e){function t(){c.reject(new d(Fe,e.id,arguments))}var n,r,i,o,u,a=e.source,c=e.dfd,s=f[e.path];if(e.enqueue=be,s&&(n=function(e){for(var t,n,r=0;n=e[r];r++)if(n=(n=n.match(z))&&n[3]||f.handler,t){if(n!==t)return be}else t=n;return t}(s))){for(;r=L.exec(a);)a=a.replace(r[0],"");for(e.source=a,i=[],u=0;o=s[u];u++)i.push(W.resolve(ye+o).pledge);U.all(i).then(function(){for(i.length=0,u=0;o=s[u];u++)(o=s[u]=W.get(o)||new W(o)).handler=arguments[u],i.push(o.pledge);"module"===n?(R.enqueue.apply(R,s),K.process(e)):(K.process(e),R.enqueue.apply(R,s)),U.all(i).then(c.resolve,t)},t)}else t()}},new(e.extends(i))}(),V=function(){function e(){}var n=".html",t=/^text\/.+$/;return e.prototype={validate:function(e){return t.test(e)},onPreRequest:function(e){var t=e.url.pathname;e.url.pathname=t.slice(-n.length)!==n?t+n:t},onPostRequest:function(e){e.source=j(e.url,e.source)},onPreProcess:function(e){function r(){a.reject(new d(Fe,e.id,arguments))}var t,n,i,o,u=e.path,a=e.dfd,c=ae.createElement("body"),s=[],f=[];for(e.enqueue=be,c.innerHTML=e.source;t=c.firstElementChild;)(n=t.getAttribute("type"))&&(o=n+"!"+u+((i=t.getAttribute("path"))?"/"+i:""),t.parentNode.removeChild(t),s.push({source:t.textContent,uri:o}),f.push(W.resolve("mock:"+o).pledge));U.all(f).then(function(){var e,t,n=0;for(f.length=0;e=s[n];n++)(t=W.get(e.uri)||new W(e.uri)).source=j(t.url,e.source),t.handler=arguments[n],f.push(t.pledge),R.enqueue(t);U.all(f).then(a.resolve,r)},r)}},new(e.extends(i))}(),Y=function(){function u(e){for(var t,n,r=0;t=i[r];r++)0===e.indexOf(t.prefix)&&(!n||t.weight>n.weight)&&(n=t);return n}function t(e,t){i.push({prefix:e,weight:e.length,fn:t})}function a(e,t){var n,r=t.matches,i=0;if(1<r.length){for(t.id=o+"/"+g(JSON.stringify(t.matches));n=r[i];i++)r[i]=new W(n.uri);q.configure(function(e){var t,n,r=e.matches,i={pattern:{},modules:{"/demand/handler/bundle":{}}},o=0;for(i.pattern[e.id]=e.fn(r),i.modules[pe+"bundle"][e.id]=t=[];n=r[o];o++)t.push(n.path);return i}(t)),q("bundle!"+t.id).then(function(){for(var e,t=0;e=this[t];t++)e.dfd.resolve(arguments[t])}.bind(r),function(){for(var e,t=0;e=this[t];t++)e.dfd.reject(new d(Fe,e.id))}.bind(r))}}var o=ve+"genie",i=[];return q.on(Se+":"+o,function(e){p(e)&&(i.length=0,y(e,t))}).on($e,function(e,t){for(var n,r,i={},o=0;n=e[o];o++)!h(n,qe)||H.test(n)||W.get(n,t)||"module"===(n=new W(n,t,be)).type&&(r=u(n.path))&&!F.get(n)&&(i[r.prefix]||(i[r.prefix]={fn:r.fn,matches:[]})).matches.push(n);y(i,a)}),!0}(),R=new A,E=new J(R),e(he+"uuid",r),e(he+"handler",i),e(pe+"module",K),e(pe+"bundle",Q),e(pe+"component",V),e(ve+"genie",Y),e(me+"isTypeOf",h),e(me+"isArray",u),e(me+"isObject",p),e(me+"isInstanceOf",n),e(me+"isSemver",P),e(ge+"resolveUrl",f),e(ge+"resolveSourcemaps",j),e(ge+"merge",o),e(ge+"iterate",y),e(ge+"hash",g),e(ge+"defer",C),e(ge+"idle",$),e(ge+"uuid",S),e(de+"weakmap",O),e(de+"descriptor",s),e(de+"pledge",U),e(de+"queue",A),e(de+"xhr",G),e(de+"failure",d),e(de+"semver",_),ce&&ce.main)switch(typeof ce.main){case qe:q(ce.main);break;case Re:k("main",ce.main())}}("demand-loader"===this.name?parent:this,setTimeout,clearTimeout);
//# sourceMappingURL=demand.js.map
