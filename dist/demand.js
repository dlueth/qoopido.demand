/**! Qoopido.demand 5.0.4 | https://github.com/dlueth/qoopido.demand | (c) 2018 Dirk Lueth */
!function(m,u,a){"use strict";function c(e,t,n,r){return{__proto__:ye,value:e,enumerable:!!r,configurable:!!n,writable:!!t}}function h(e,t){return typeof e===t}function p(e){return e&&h(e,qe)}function v(e){return h(e,Re)&&isFinite(e)&&Math.floor(e)===e&&0<=e}function n(e,t){return e instanceof t}function y(e,t,n){for(var r,i=We.keys(e),o=0;(r=i[o])!==we&&t.call(n,r,e[r])!==xe;o++);return n}function w(e,t,n){return Ue.call(e,t,n)}function x(){return+new Date}function s(e){return Ve.href=e,Ve.href}function l(e,t){var n=e.replace(H,"");return $.test(n)||A.test(n)||(n="/"+s((t&&s(t+"/../")||"/")+n).replace(I,"")),n}function b(e,t){var n=e.match(H);return(n&&n[1]?"mock:":"")+(n&&n[3]||ce.handler)+"!"+l(e,t)}function d(e,t,n){var r=this;return r.message=e,t&&(r.module=t),n&&(r.stack=w(n)),r}function t(n){function r(e,t){t&&n.handler.validate&&!n.handler.validate(t)?n.dfd.reject(new d(ze+" (content-type)",n.id)):(n.source=e,M.emit(Ie,n.type,n))}function i(e){n.dfd.reject(new d(ze+(e?" (status)":""),n.id))}var o,u=/^(?:\?|)$/;A.test(n.path)||y(ce.pattern,function(e,t){t.matches(n.path)&&(!o||o.weight<t.weight)&&(o=t)}),function e(t){t=t||0,n.url=ue.createElement("a"),n.url.href=o?s(o.process(n.path,t)):n.path,n.invalid&&(n.url.search+=(u.test(n.url.search)?"":"&")+x()),M.emit(Te,n.type,n),new W(n.url).then(r,o?function(){t++,o.location[t]?e(t):i()}:i)}()}function f(e){return"[object Array]"===Be.call(e)}function g(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}function r(){return h(this.uuid,be)&&this.define("uuid",S()),this}function j(e,t){for(var n,r;n=T.exec(t);)Ve.href=e,A.test(n[2])?r=Ve.protocol+"//"+Ve.host+n[3]:(Ve.pathname+="/../"+n[3],r=Ve.protocol+"//"+Ve.host+Ve.pathname),t=t.replace(n[0],n[1]+" "+n[2]+"="+r+".map"+(n[4]?" "+n[4]:""));return t}function i(){}function d(e,t,n){return this.message=e,t&&(this.module=t),n&&(this.stack=w(n)),this}function e(e,t){k(e,function(){return t})}var q,k,R,E,P,o,S,C,M,O,A,$,T,I,D,H,N,L,z,_,F,U,X,W,B,G,J,K,Q,V,Y,Z,ee,te,ne,re,ie,oe,ue=m.document,ae="demand"in m&&m.demand,ce={version:"1.0.0",cache:{},timeout:8e3,pattern:{},modules:{},handler:"module"},se="demand",fe="provide",le="/demand/",de=le+"abstract/",he=le+"handler/",pe=le+"plugin/",ve=le+"function/",ge=le+"validator/",me="mock:",ye=null,we=void 0,xe=!1,be="undefined",je="string",qe="object",ke="function",Re="number",Ee="post",Pe=Ee+"Configure",Se="cache",Ce=Se+"Miss",Me=Se+"Hit",Oe=Se+"Exceed",Ae="preResolve",$e="Request",Te="pre"+$e,Ie=Ee+$e,De="Process",He="pre"+De,Ne=Ee+De,Le="queueEnqueue",ze="error loading",_e="error resolving",Fe=Array.prototype,Ue=Fe.slice,Xe=Fe.concat,We=Object,Be=We.prototype.toString,Ge=We.create,Je=We.defineProperty,Ke=We.getOwnPropertyNames,Qe=We.getOwnPropertyDescriptor,Ve=ue.createElement("a");if(function(a){function e(e,t,n,r,i){Je(this,e,new c(t,n,r,i))}function t(e){for(var t,n=this,r=n[a],i=Ke(r),o={constructor:new c(n,!0,!0)},u=0;(t=i[u])&&!o[t];u++)o[t]=Qe(r,t);try{n[a]=Ge(e[a]||e,o)}catch(e){}if(n[a]===r)throw new TypeError("Unable to extend, prototype is not writable");return n}e.call(Object.prototype,"define",e),e.call(m.Object.prototype,"define",e),Function.prototype.define("extends",t),m.Function.prototype.define("extends",t)}("prototype"),Y=/^\bv?(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?\b$/i,P=function(e){return h(e,je)&&Y.test(e)},o=function(){function r(e,t){var n,r=this[e];t!==we&&(p(t)?(n=p(r),r=t.length!==we?n&&r.length!==we?r:[]:n&&r.length===we?r:{},this[e]=o(r,t)):this[e]=t)}return function(){for(var e,t=arguments[0],n=1;(e=arguments[n])!==we;n++)y(e,r,t);return t}}(),S=function(){function e(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}var t=new RegExp("[xy]","g");return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e)}}(),ne="setImmediate"in m,C="MutationObserver"in m?function(e){Z=ue.createElement("div"),new MutationObserver(function(){e()}).observe(Z,{attributes:!0}),Z.setAttribute("i","1")}:!ne&&"postMessage"in m&&!("importScripts"in m)&&"addEventListener"in m?(te={},m.addEventListener("message",function(e){var t;e.source===m&&e.data&&(t=te[e.data])&&(t(),delete te[e.data])},xe),function(e){var t=S();te[t]=e,m.postMessage(t,"*")}):!ne&&"onreadystatechange"in(Z=ue.createElement("script"))?function(e){Z.onreadystatechange=function(){Z.onreadystatechange=ye,Z.parentNode.removeChild(Z),e()},ue.body.appendChild(Z)}:(ee=ne?setImmediate:u,function(e){ee(e)}),M=function(){function n(e,t,n){var r,i;if(h(t,je)&&h(n,ke))for(t=t.split(" ");r=t.shift();)r=r.split(":"),o.test(r[0])&&((u[r[0]]||(u[r[0]]={on:[],after:[]}))[e].push({callback:n,filter:r[1]}),"on"===e&&r[0]===Pe&&(i=ce.modules[r[1]])&&n(i))}function e(){}var o=/^cache(Miss|Hit|Clear|Exceed)|queue(En|De)queue|(pre|post)(Resolve|Configure|Request|Process|Cache)$/,u={};return e.prototype={emit:function(e,t){var n,r,i,o=u[e];if(o){for(n=w(arguments,2),r=0;i=o.on[r];r++)i.filter&&i.filter!==t||i.callback.apply(ye,n);for(r=0;i=o.after[r];r++)i.filter&&i.filter!==t||i.callback.apply(ye,n)}return this},on:function(e,t){return n("on",e,t),this},after:function(e,t){return n("after",e,t),this}},new e}(),re=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,O=function(e){return e.replace(re,"\\$&")},A=/^(http(s?):)?\/\//i,$=/^\//,T=/((?:\/\/|\/\*)#)\s*(sourceMappingURL)\s*=\s*(?!(?:http[s]?:)?\/\/)(.+?)\.map(?:\s+)?(\*\/)?/g,I=new RegExp("^"+O(s("/"))),D=new RegExp("^demand|"+fe+"|path$"),H=/^(mock:)?([+-])?((?:[-\w]+\/?)+)?(?:@(.+?))?(?:#(\d+))?!/,N=function(){function t(e,t){return e<t?-1:t<e?1:0}function e(i){if(!P(i))throw new TypeError('"version" must be a valid semver version string');i=function(e){var t,n=i.split("-"),r=0;for(n=n[1]?Array.prototype.concat(n[0].split("."),n[1].split(".")):n[0].split(".");t=n[r];r++)n[r]=parseInt(t,10).toString()===t?parseInt(t,10):t;return n}(),this.major=i.slice(0,1),this.minor=i.slice(1,2),this.patch=i.slice(2,3),this.identifier=i.slice(3)}return e.prototype={toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.identifier.length?"-"+this.identifier.join("."):"")},compare:function(e){return t(this.major,e.major)||t(this.minor,e.minor)||t(this.patch,e.patch)||function(e,t){var n,r,i,o,u=0;if(e.length&&!t.length)return-1;if(!e.length&&t.length)return 1;if(!e.length&&!t.length)return 0;do{if(n=e[u],o=typeof(r=t[u]),(i=typeof n)===be&&o===be)return 0;if(o===be)return 1;if(i===be)return-1;if(n!==r){if(i===je&&o!==je)return 1;if(i!==je&&o===je)return-1;if(r<n)return 1;if(n<r)return-1}}while(++u)}(this.identifier,e.identifier)}},e}(),L=function(){function i(n){var r;return n.cache!==ye?n.cache:(y(ce.cache,function(e,t){0===n.path.indexOf(e)&&(!r||t.weight>r.weight)&&(r=t)}),r?r.state:xe)}function r(e){return p.getItem(e)}function o(e,t){p[t?"setItem":"removeItem"](e,t)}function u(e){var t,n=r(e);if(n&&(t=n.match(h)))return w(t,1)}function a(e,t){t[4]=x(),o(e,t.join(","))}function c(e,t,n){M.emit(e,t.id,t,n)}function e(){C(this.clear.expired.bind(this.clear))}var n,s="[demand]",f="[state]",l="[value]",d=new RegExp("^"+O(s)+"\\[(.+?)\\]"+O(f)+"$"),h=/^(.+?),(\d+),(\d*),(.+?),(\d+)$/,t=function(){try{return"localStorage"in m&&m.localStorage}catch(e){return xe}}(),p=t?m.localStorage:ye,v=t&&"remainingSpace"in p,g={};return M.on(Ce,function(e){C(function(){n.clear(e.id)})}).on(Oe,function(t){q("-!/demand/cache/dispose").then(function(e){C(function(){e(t.source.length),n.set(t)})})}).on(Ie,function(e){e.source&&i(e)&&(g[e.id]=!0)}).after(Ne,function(e){g[e.id]&&C(function(){n.set(e)})}),(e.prototype={get:t?function(e){var t,n;if(i(e)){if(t=s+"["+e.id+"]",!(n=u(t+f)))return;return 1===e.version.compare(new N(n[0]))||n[2]&&e.lifetime&&n[2]<=x()?void(e.invalid=!0):(e.source=r(t+l),C(function(){a(t+f,n)}),!0)}}:function(){},resolve:t?function(e){this.get(e)?c(Me,e):c(Ce,e)}:function(e){c(Ce,e)},set:t?function(t){var e,n,r;if(i(t)){e=[t.version,t.source.length,t.lifetime?x()+t.lifetime:ye,q.version],n=s+"["+t.id+"]",c("preCache",t,e);try{if(r=v?p.remainingSpace:ye,o(n+l,t.source),a(n+f,e),r!==ye&&p.remainingSpace===r)throw new Error;c("postCache",t,e)}catch(e){c(Oe,t)}}}:function(){},clear:t?function(e){var t=b(e),n=s+"["+t+"]";r(n+f)&&(o(n+f),o(n+l),c("cacheClear",U.get(t)||new U(t,ye,xe)))}:function(){}}).clear.all=t?function(){var t;y(p,function(e){(t=e.match(d))&&this(t[1])},this)}:function(){},e.prototype.clear.expired=t?function(){var t,n;y(p,function(e){(t=e.match(d))&&(n=u(s+"["+t[1]+"]"+f))&&0<n[2]&&n[2]<=x()&&this(t[1])},this)}:function(){},n=new e}(),z="WeakMap"in m?m.WeakMap:function(){function r(e,t){var n;if((n=t[e.id])&&n[0]===t)return n}function e(){this.define("id","weakmap-"+S())}return e.prototype={set:function(e,t){var n=r(this,e);return n?n[1]=t:e.define(this.id,[e,t]),this},get:function(e){var t=r(this,e);if(t)return t[1]},delete:function(e){var t=r(this,e);t&&(t.length=0,delete e[this.id])},has:function(e){return!!r(this,e)}},e}(),_=function(){function o(e,t,n){e.then(function(){n.resolved[t]=w(arguments),n.count++,r(n)},function(){n.rejected.push(w(arguments)),r(n)})}function r(e){e.count===e.total?e.dfd.resolve.apply(ye,Xe.apply([],e.resolved)):e.rejected.length+e.count===e.total&&e.dfd.reject.apply(ye,Xe.apply([],e.rejected))}function u(e){var t=this;return f.set(t,{state:a,handle:function(e,t){var n,r,i=f.get(this);for(i.state===a&&(i.state=e,i.value=t);n=i[i.state].shift();)(r=n.handler.apply(ye,i.value))&&"function"==typeof r.then?r.then(n.dfd.resolve,n.dfd.reject):n.dfd[i.state===c?"resolve":"reject"].apply(ye,i.value);i[c].length=0,i[s].length=0}.bind(t),value:ye,resolved:[],rejected:[],count:0}),e(function(){f.get(this).handle(c,arguments)}.bind(t),function(){f.get(this).handle(s,arguments)}.bind(t)),t}var a="pending",c="resolved",s="rejected",f=new z;return u.prototype={catch:function(e){return this.then(function(){},e)},always:function(e){return this.then(e,e)},then:function(e,t){var n=f.get(this),r=u.defer();return e&&n[c].push({handler:e,dfd:r}),t&&n[s].push({handler:t,dfd:r}),n.state!==a&&C(n.handle),r.pledge},isPending:function(){return f.get(this).state===a},isResolved:function(){return f.get(this).state===c},isRejected:function(){return f.get(this).state===s}},u.defer=function(){var n={};return n.pledge=new u(function(e,t){n.resolve=e,n.reject=t}),n},u.all=function(e){var t,n,r=u.defer(),i=0;if(e.length)for(t={dfd:r,resolved:[],rejected:[],total:e.length,count:0};n=e[i];i++)o(n,i,t);else r.resolve();return r.pledge},u.race=function(e){for(var t,n=u.defer(),r=0;t=e[r];r++)t.then(n.resolve,n.reject);return e.length||n.resolve(),n.pledge},u}(),F=function(){function e(){n.set(this,{})}var n=new z;return e.prototype={get:function(e){return e?n.get(this)[e]:n.get(this)},set:function(e,t){n.get(this)[e]=t},remove:function(e){delete n.get(this)[e]}},e}(),d.prototype={toString:function(){var e=this,t=se+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=d.traverse(e.stack,t,1)),t}},d.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=d.traverse(r.stack,t,n+1));return t},U=function(){function o(e,t){this[e]=t}function e(e){s.test(e)||this.push(e)}function t(e,t){!s.test(e)&&t.pledge.isPending()&&this.push(e)}function n(e,t){!s.test(e)&&t.pledge.isResolved()&&this.push(e)}function r(e,t){!s.test(e)&&t.pledge.isRejected()&&this.push(e)}function i(){return y(c.get(),e,[])}function u(e,t,n){var r=this,i=e.match(H)||f;return r.path=l(e,t),r.mock=!!i[1]||xe,r.cache=i[2]?"+"===i[1]:ye,r.type=i[3]||ce.handler,r.version=new N(i[4]||ce.version),r.lifetime=i[5]&&1e3*i[5]||ce.lifetime,r.id=(r.mock?me:"")+r.type+"!"+r.path,r.uri=(r.mock?me:"")+r.type+"@"+r.version+(v(r.lifetime)&&0<r.lifetime?"#"+r.lifetime:"")+"!"+r.path,r.dfd=_.defer(),r.pledge=r.dfd.pledge,r.invalid=!1,r.pledge.then(function(){r.value=w(arguments)}),n!==xe&&c.set(r.id,r),r}var a="internal!",c=new F,s=/^(?:mock:|internal!)/i,f=[];return i.pending=function(){return y(c.get(),t,[])},i.resolved=function(){return y(c.get(),n,[])},i.rejected=function(){return y(c.get(),r,[])},u.prototype={enqueue:!0},u.get=function(e,t){return c.get(b(e,t))},u.resolve=function(e,t){var n,r=t&&D.test(e),i=r?this.get(a+t+"/"+e):this.get(e,t);if(!i)if(r){switch(i=new u(a+t+"/"+e),e){case se:n=y(q,o,q.bind(t));break;case fe:n=k.bind(t);break;case"path":n=t}i.dfd.resolve(n)}else i=new u(e,t),q(he+i.type).then(function(e){i.handler=e,i.mock?i.dfd.resolve(e):L.resolve(i)},function(){i.dfd.reject(new d(ze+" (handler)",self.id))});return i},u.remove=function(e,t,n){var r=b(e,t),i=ue.querySelector('[demand-id="'+r+'"]');c.remove(r),c.remove(me+r),i&&i.parentNode.removeChild(i),n!==xe&&L.clear(r)},u.list=i,u}(),X=function(){function r(e,t){this[e]={url:s(t).replace(n,"$1"),match:new RegExp("^"+O(t))}}function e(e,t){var n=this;n.weight=e.length,n.match=new RegExp("^"+O(e)),n.location=[].concat(t),y(n.location,r,n.location)}var n=/(.+)\/$/;return e.prototype={matches:function(e){return this.match.test(e)},process:function(e,t){var n=this.location[t];if(n)return e.replace(this.match,n.url)}},e}(),ie=XMLHttpRequest,oe="XDomainRequest"in m&&m.XDomainRequest||ie,W=function(e){var t,n=_.defer(),r=I.test(e)?new ie:new oe,i=function(){this.readyState<4&&this.abort()}.bind(r),o=ce.timeout;return r.ontimeout=r.onerror=r.onabort=function(){n.reject(r.status)},r.onprogress=r.onreadystatechange=function(){a(t),t=u(i,o)},r.onload=function(){t=a(t),"status"in r&&200!==r.status?n.reject(r.status):n.resolve(r.responseText,r.getResponseHeader&&r.getResponseHeader("content-type"))},r.open("GET",e,!0),r.send(),t=u(i,o),n.pledge},q=function(){function s(e,t){this[e]={weight:e.length,state:t}}function f(e,t){"base"!==e&&(this[e]=new X(e,t))}function l(e,t){var n=this[e]=this[e]||{};M.emit("preConfigure",e,n),o(n,t),M.emit(Pe,e,n)}function d(){var e,t,n=w(arguments),r=this!==m?this:ye,i=0;for(M.emit(Ae,ye,n,r);e=n[i];i++)h(e,je)?n[i]=U.resolve(e,r).pledge:(n[i]=(t=_.defer()).pledge,t.resolve(e));return(1<n.length?_.all(n):n[0]).always(function(){M.emit("postResolve",ye,n,r)})}return d.configure=function(e){var t=e.cache,n=e.version,r=e.timeout,i=e.lifetime,o=e.base,u=e.pattern,a=e.modules,c=ce.modules;return h(t,"boolean")?ce.cache[""]={weight:0,state:t}:p(t)&&y(t,s,ce.cache),P(n)&&(ce.version=n),v(r)&&(ce.timeout=1e3*Math.min(Math.max(r,2),20)),v(i)&&0<i&&(ce.lifetime=1e3*i),h(o,je)&&""!==o&&(ce.pattern.base=new X("",o)),p(u)&&y(u,f,ce.pattern),p(a)&&y(a,l,c),d},d.version="5.0.4",d.on=M.on.bind(d),d.get=function(e,t){var n=U.get(e,t);return n&&n.value},d.list=U.list,d.remove=U.remove,d.cache={clear:L.clear},M.after(Ce,function(e){new t(e)}).after(Ie,function(e){var t=e.handler.onPostRequest;t&&t(e)}).after(Me+" "+Ie,function(e){M.emit(He,e.id,e)}).after(Te,function(e){var t=e.handler.onPreRequest;t&&t(e)}).after(He,function(e){var t=e.handler.onPreProcess;t&&t(e),e.pledge.then(function(){M.emit(Ne,e.id,e)}),!0===e.enqueue?R.enqueue(e):n(e.enqueue,_)&&e.enqueue.then(function(){R.enqueue(e)})}),d}(),m.define("demand",q),k=function(){var e,t,n=h(arguments[0],je)?arguments[0]:ye,r=this!==m?this:ye,i=f(arguments[n?1:0])?arguments[n?1:0]:ye,o=i?arguments[n?2:1]:arguments[n?1:0];if(!n&&E.current&&(n=(e=E.current).uri,E.process()),n)return e=e||new U(n,r),t=h(o,ke),i?q.apply(e.path,i).then(function(){e.dfd.resolve(t?o.apply(ye,arguments):o)},function(){e.dfd.reject(new d("error providing",e.id,arguments))}):e.dfd.resolve(t?o():o),e.dfd.pledge;!h(console,be)&&console.error(new d("unspecified anonymous provide"))},m.define("provide",k),q.configure({cache:!0,base:"/",pattern:{"/demand":s((ae&&ae.url||location.href)+"/../").slice(0,-1)}}),ae&&ae.settings&&q.configure(ae.settings),B=function(){function e(){var e=r.call(this);return t.set(e,[]),e}var t=new z;return e.prototype={enqueue:function(){t.set(this,t.get(this).concat(w(arguments))),M.emit(Le,this.uuid)},dequeue:function(){return M.emit("queueDequeue",this.uuid),t.get(this).shift()},get current(){return t.get(this)[0]},get length(){return t.get(this).length}},e.extends(r)}(),G=function(){function e(e){var t=this,n={queue:e,current:ye};r.set(t,n),q.on(Le+":"+e.uuid,function(){!n.current&&t.process()})}var r=new z;return e.prototype={process:function(){var e,t=r.get(this);!t.queue.length||(e=t.current=t.queue.dequeue()).pledge.isRejected()?t.current=ye:e.handler.process&&e.handler.process(e)},get current(){return r.get(this).current}},e}(),i.prototype={validate:ye,onPreRequest:ye,onPostRequest:ye,onPreProcess:ye,process:ye},J=function(){function e(){}var n=ue.getElementsByTagName("head")[0],t=/^(application|text)\/(x-)?javascript/;return e.prototype={validate:function(e){return t.test(e)},onPreRequest:function(e){var t=e.url.pathname;e.url.pathname=".js"!==t.slice(-".js".length)?t+".js":t},onPostRequest:function(e){e.source=j(e.url,e.source)},process:function(e){var t;e.source&&((t=ue.createElement("script")).async=!0,t.text=e.source,t.setAttribute(se+"-id",e.id),n.appendChild(t))}},new(e.extends(i))}(),d.prototype={toString:function(){var e=this,t=se+": "+e.message+" "+(e.module?'"'+e.module+'"':"");return e.stack&&(t=d.traverse(e.stack,t,1)),t}},d.traverse=function(e,t,n){for(var r,i=new Array(n+1).join(" "),o=0;r=e[o];o++)t+="\n"+i+"> "+r.message+" "+(r.module?'"'+r.module+'"':""),r.stack&&(t=d.traverse(r.stack,t,n+1));return t},K=function(){function t(e,t){var n,r;for(n=0;r=t[n];n++)h(r,je)&&(t[n]=b(r))}function e(){}var f={};return q.on(Pe+":/demand/handler/bundle",function(e){p(e)&&y(f=e,t)}),e.prototype={validate:J.validate,onPreProcess:function(e){function t(){c.reject(new d(_e,e.id,arguments))}var n,r,i,o,u,a=e.source,c=e.dfd,s=f[e.path];if(e.enqueue=xe,s&&(n=function(e){for(var t,n,r=0;n=e[r];r++)if(n=(n=n.match(H))&&n[3]||f.handler,t){if(n!==t)return xe}else t=n;return t}(s))){for(;r=T.exec(a);)a=a.replace(r[0],"");for(e.source=a,i=[],u=0;o=s[u];u++)i.push(U.resolve(me+o).pledge);_.all(i).then(function(){for(i.length=0,u=0;o=s[u];u++)(o=s[u]=U.get(o)||new U(o)).handler=arguments[u],i.push(o.pledge);"module"===n?(R.enqueue.apply(R,s),J.process(e)):(J.process(e),R.enqueue.apply(R,s)),_.all(i).then(c.resolve,t)},t)}else t()}},new(e.extends(i))}(),Q=function(){function e(){}var n=".html",t=/^text\/.+$/;return e.prototype={validate:function(e){return t.test(e)},onPreRequest:function(e){var t=e.url.pathname;e.url.pathname=t.slice(-n.length)!==n?t+n:t},onPostRequest:function(e){e.source=j(e.url,e.source)},onPreProcess:function(e){function r(){a.reject(new d(_e,e.id,arguments))}var t,n,i,o,u=e.path,a=e.dfd,c=ue.createElement("body"),s=[],f=[];for(e.enqueue=xe,c.innerHTML=e.source;t=c.firstElementChild;)(n=t.getAttribute("type"))&&(o=n+"!"+u+((i=t.getAttribute("path"))?"/"+i:""),t.parentNode.removeChild(t),s.push({source:t.textContent,uri:o}),f.push(U.resolve("mock:"+o).pledge));_.all(f).then(function(){var e,t,n=0;for(f.length=0;e=s[n];n++)(t=U.get(e.uri)||new U(e.uri)).source=j(t.url,e.source),t.handler=arguments[n],f.push(t.pledge),R.enqueue(t);_.all(f).then(a.resolve,r)},r)}},new(e.extends(i))}(),V=function(){function u(e){for(var t,n,r=0;t=i[r];r++)0===e.indexOf(t.prefix)&&(!n||t.weight>n.weight)&&(n=t);return n}function t(e,t){i.push({prefix:e,weight:e.length,fn:t})}function a(e,t){var n,r=t.matches,i=0;if(1<r.length){for(t.id=o+"/"+g(JSON.stringify(t.matches));n=r[i];i++)r[i]=new U(n.uri);q.configure(function(e){var t,n,r=e.matches,i={pattern:{},modules:{"/demand/handler/bundle":{}}},o=0;for(i.pattern[e.id]=e.fn(r),i.modules[he+"bundle"][e.id]=t=[];n=r[o];o++)t.push(n.path);return i}(t)),q("bundle!"+t.id).then(function(){for(var e,t=0;e=this[t];t++)e.dfd.resolve(arguments[t])}.bind(r),function(){for(var e,t=0;e=this[t];t++)e.dfd.reject(new d(_e,e.id))}.bind(r))}}var o=pe+"genie",i=[];return q.on(Pe+":"+o,function(e){p(e)&&(i.length=0,y(e,t))}).on(Ae,function(e,t){for(var n,r,i={},o=0;n=e[o];o++)!h(n,je)||D.test(n)||U.get(n,t)||"module"===(n=new U(n,t,xe)).type&&(r=u(n.path))&&!L.get(n)&&(i[r.prefix]||(i[r.prefix]={fn:r.fn,matches:[]})).matches.push(n);y(i,a)}),!0}(),R=new B,E=new G(R),e(de+"uuid",r),e(de+"handler",i),e(he+"module",J),e(he+"bundle",K),e(he+"component",Q),e(pe+"genie",V),e(ge+"isTypeOf",h),e(ge+"isArray",f),e(ge+"isObject",p),e(ge+"isInstanceOf",n),e(ge+"isSemver",P),e(ve+"resolveUrl",s),e(ve+"resolveSourcemaps",j),e(ve+"merge",o),e(ve+"iterate",y),e(ve+"hash",g),e(ve+"defer",C),e(ve+"uuid",S),e(le+"weakmap",z),e(le+"descriptor",c),e(le+"pledge",_),e(le+"queue",B),e(le+"xhr",W),e(le+"failure",d),e(le+"semver",N),ae&&ae.main)switch(typeof ae.main){case je:q(ae.main);break;case ke:k("main",ae.main())}}("demand-loader"===this.name?parent:this,setTimeout,clearTimeout);
//# sourceMappingURL=demand.js.map
