{"version":3,"sources":["cache/dispose.js"],"names":["localStorage","definition","functionIterate","getState","key","matches","state","getItem","match","regexMatchProperties","Array","prototype","slice","call","getKey","id","PREFIX","SUFFIX","filterStates","property","regexMatchState","this","push","compareAccess","a","b","RegExp","demand","clear","path","size","states","sort","length","shift","provide"],"mappings":";CAAC,SAASA,GACT,YAEA,SAASC,GAAWC,GAMnB,QAASC,GAASC,GACjB,GACCC,GADGC,EAAQN,EAAaO,QAAQH,EAGjC,IAAGE,IAAUD,EAAUC,EAAME,MAAMC,IAClC,MAAOC,OAAMC,UAAUC,MAAMC,KAAKR,EAAS,GAI7C,QAASS,GAAOC,GACf,MAAO,IAAMC,EAAS,KAAOD,EAAK,KAAOE,EAAS,IAgBnD,QAASC,GAAaC,GACrB,GACCb,GADGE,EAAQW,EAASX,MAAMY,EAGxBZ,KACFF,EAAWH,EAASW,EAAON,EAAM,KACjCF,EAAM,GAAKE,EAAM,GAEjBa,KAAKC,KAAKhB,IAIZ,QAASiB,GAAcC,EAAGC,GACzB,MAAGD,GAAE,GAAKC,EAAE,IACJ,EAGLD,EAAE,GAAKC,EAAE,GACJ,EAGD,EApDR,GAAIT,GAAuB,SAC1BC,EAAuB,QACvBG,EAAuB,GAAIM,QAAO,OAASV,EAAS,oBAAsBC,EAAS,QACnFR,EAAuB,iCAoDxB,OArCAP,GAAgBF,EAAc,SAASmB,GACtC,GACCb,GADGE,EAAQW,EAASX,MAAMY,EAGxBZ,KACFF,EAAQH,EAASW,EAAON,EAAM,KAE1BF,EAAM,IACTqB,OAAOC,MAAMC,KAAKrB,EAAM,OA6BpB,SAAsBsB,GAC5B,GACCxB,GADGyB,IAOJ,KAJA7B,EAAgBF,EAAckB,EAAca,GAE5CA,EAAOC,KAAKT,GAENO,EAAO,GAAKC,EAAOE,QACxB3B,EAASyB,EAAOG,QAChBJ,GAASxB,EAAM,GAEfqB,OAAOC,MAAMC,KAAKvB,EAAM,KAK3B6B,SAAU,4BAA8BlC,IACvCD","file":"dispose.js","sourcesContent":["(function(localStorage) {\n\t'use strict';\n\n\tfunction definition(functionIterate) {\n\t\tvar PREFIX               = 'demand',\n\t\t\tSUFFIX               = 'state',\n\t\t\tregexMatchState      = new RegExp('^\\\\[' + PREFIX + '\\\\]\\\\[(.+?)\\\\]\\\\[' + SUFFIX + '\\\\]$'),\n\t\t\tregexMatchProperties = /^(.+?),(\\d+),(\\d*),(.+?),(\\d+)$/;\n\n\t\tfunction getState(key) {\n\t\t\tvar state = localStorage.getItem(key),\n\t\t\t\tmatches;\n\n\t\t\tif(state && (matches = state.match(regexMatchProperties))) {\n\t\t\t\treturn Array.prototype.slice.call(matches, 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction getKey(id) {\n\t\t\treturn '[' + PREFIX + '][' + id + '][' + SUFFIX + ']';\n\t\t}\n\n\t\tfunctionIterate(localStorage, function(property) {\n\t\t\tvar match = property.match(regexMatchState),\n\t\t\t\tstate;\n\n\t\t\tif(match) {\n\t\t\t\tstate = getState(getKey(match[1]));\n\n\t\t\t\tif(!state[4]) {\n\t\t\t\t\tdemand.clear.path(match[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction filterStates(property) {\n\t\t\tvar match = property.match(regexMatchState),\n\t\t\t\tstate;\n\n\t\t\tif(match) {\n\t\t\t\tstate    = getState(getKey(match[1]));\n\t\t\t\tstate[5] = match[1];\n\n\t\t\t\tthis.push(state);\n\t\t\t}\n\t\t}\n\n\t\tfunction compareAccess(a, b) {\n\t\t\tif(a[4] < b[4]) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif(a[4] > b[4]) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn function cacheDispose(size) {\n\t\t\tvar states = [],\n\t\t\t\tstate;\n\n\t\t\tfunctionIterate(localStorage, filterStates, states);\n\n\t\t\tstates.sort(compareAccess);\n\n\t\t\twhile(size > 0 && states.length) {\n\t\t\t\tstate  = states.shift();\n\t\t\t\tsize  -= state[1];\n\n\t\t\t\tdemand.clear.path(state[5]);\n\t\t\t}\n\t\t};\n\t}\n\n\tprovide([ '/demand/function/iterate' ], definition);\n}(localStorage));"]}