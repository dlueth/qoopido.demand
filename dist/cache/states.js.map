{"version":3,"sources":["cache/states.js"],"names":["localStorage","provide","functionIterate","PREFIX","SUFFIX","regexMatchState","RegExp","regexMatchProperties","filterStates","property","state","id","match","key","matches","getItem","Array","prototype","slice","call","getState","this","push","version","size","parseInt","expires","Date","demand","accessed"],"mappings":";CAAC,SAASA,GACT,aA4CAC,QAAQ,CAAE,4BA1CV,SAAoBC,GACnB,IAAIC,EAAuB,SAC1BC,EAAuB,QACvBC,EAAuB,IAAIC,OAAO,OAASH,EAAS,oBAAsBC,EAAS,QACnFG,EAAuB,kCAexB,SAASC,EAAaC,GACrB,IACCC,EANcC,EAKXC,EAAQH,EAASG,MAAMP,GAGxBO,IACFF,EAlBF,SAAkBG,GACjB,IACCC,EADGJ,EAAQV,EAAae,QAAQF,GAGjC,GAAGH,IAAUI,EAAUJ,EAAME,MAAML,IAClC,OAAOS,MAAMC,UAAUC,MAAMC,KAAKL,EAAS,GAanCM,EATMT,EASUC,EAAM,GARxB,IAAMT,EAAS,KAAOQ,EAAK,KAAOP,EAAS,MAUjDiB,KAAKC,KAAK,CACTX,GAAUC,EAAM,GAChBW,QAAUb,EAAM,GAChBc,KAAUC,SAASf,EAAM,GAAI,IAC7BgB,QAAUhB,EAAM,GAAK,IAAIiB,KAAKF,SAASf,EAAM,GAAI,KAAO,KACxDkB,OAAUlB,EAAM,GAChBmB,SAAU,IAAIF,KAAKF,SAASf,EAAM,GAAI,QAKzC,OAAO,WACN,OAAOR,EAAgBF,EAAcQ,EAAc,OAzCtD,CA8CER","file":"states.js","sourcesContent":["(function(localStorage) {\n\t'use strict';\n\n\tfunction definition(functionIterate) {\n\t\tvar PREFIX               = 'demand',\n\t\t\tSUFFIX               = 'state',\n\t\t\tregexMatchState      = new RegExp('^\\\\[' + PREFIX + '\\\\]\\\\[(.+?)\\\\]\\\\[' + SUFFIX + '\\\\]$'),\n\t\t\tregexMatchProperties = /^(.+?),(\\d+),(\\d*),(.+?),(\\d+)$/;\n\n\t\tfunction getState(key) {\n\t\t\tvar state = localStorage.getItem(key),\n\t\t\t\tmatches;\n\n\t\t\tif(state && (matches = state.match(regexMatchProperties))) {\n\t\t\t\treturn Array.prototype.slice.call(matches, 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction getKey(id) {\n\t\t\treturn '[' + PREFIX + '][' + id + '][' + SUFFIX + ']';\n\t\t}\n\n\t\tfunction filterStates(property) {\n\t\t\tvar match = property.match(regexMatchState),\n\t\t\t\tstate;\n\n\t\t\tif(match) {\n\t\t\t\tstate = getState(getKey(match[1]));\n\n\t\t\t\tthis.push({\n\t\t\t\t\tid:       match[1],\n\t\t\t\t\tversion:  state[0],\n\t\t\t\t\tsize:     parseInt(state[1], 10),\n\t\t\t\t\texpires:  state[2] ? new Date(parseInt(state[2], 10)) : null,\n\t\t\t\t\tdemand:   state[3],\n\t\t\t\t\taccessed: new Date(parseInt(state[4], 10))\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn function cacheStats() {\n\t\t\treturn functionIterate(localStorage, filterStates, []);\n\t\t};\n\t}\n\n\tprovide([ '/demand/function/iterate' ], definition);\n}(localStorage));\n"]}