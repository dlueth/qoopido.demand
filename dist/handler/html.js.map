{"version":3,"sources":["handler/html.js"],"names":["provide","abstractHandler","regexMatchType","container","document","createElement","HandlerHtml","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","source","node","fragment","createDocumentFragment","innerHTML","firstElementChild","appendChild","parseHtml","extends"],"mappings":";CAAA,WACI,aAkCAA,SAAS,4BAhCT,SAAoBC,GAChB,IACIC,EAAiB,cACjBC,EAAYC,SAASC,cAAc,QAYvC,SAASC,KAeT,OAdAA,EAAYC,WACRC,SAAU,SAASC,GACf,OAAOP,EAAeQ,KAAKD,IAE/BE,aAAc,SAASC,GACnB,IAAIC,EAAWD,EAAWE,IAAID,SAC9BD,EAAWE,IAAID,SArBV,UAqBqBA,EAASE,OArB9B,QAqB4CC,QAAqBH,EArBjE,QAqBqFA,GAE9FI,QAAS,SAASL,GACdZ,QAAQ,WACJ,OArBZ,SAAmBkB,GACf,IACIC,EADAC,EAAWhB,SAASiB,yBAGxB,IADAlB,EAAUmB,UAAYJ,EACfC,EAAOhB,EAAUoB,mBACpBH,EAASI,YAAYL,GAEzB,OAAOC,EAcQK,CAAUb,EAAWM,YAIjC,IAAIZ,EAAYoB,QAAQzB,MAjCvC","file":"html.js","sourcesContent":["(function() {\n    \"use strict\";\n\n    function definition(abstractHandler) {\n        var suffix = \".html\",\n            regexMatchType = /^text\\/html/,\n            container = document.createElement(\"body\");\n\n        function parseHtml(source) {\n            var fragment = document.createDocumentFragment(),\n                node;\n            container.innerHTML = source;\n            while (node = container.firstElementChild) {\n                fragment.appendChild(node)\n            }\n            return fragment\n        }\n\n        function HandlerHtml() {}\n        HandlerHtml.prototype = {\n            validate: function(type) {\n                return regexMatchType.test(type)\n            },\n            onPreRequest: function(dependency) {\n                var pathname = dependency.url.pathname;\n                dependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname\n            },\n            process: function(dependency) {\n                provide(function() {\n                    return parseHtml(dependency.source)\n                })\n            }\n        };\n        return new(HandlerHtml.extends(abstractHandler))\n    }\n    provide([\"/demand/abstract/handler\"], definition)\n})();"]}