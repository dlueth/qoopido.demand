{"version":3,"sources":["handler/html.js"],"names":["provide","abstractHandler","regexMatchType","container","document","createElement","HandlerHtml","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","source","node","fragment","createDocumentFragment","innerHTML","firstElementChild","appendChild","parseHtml","extends"],"mappings":";CAAC,WACA,aAuCAA,SAAU,4BArCV,SAAoBC,GACnB,IACCC,EAAiB,cACjBC,EAAiBC,SAASC,cAAc,QAezC,SAASC,KAgBT,OAdAA,EAAYC,WACXC,SAAU,SAASC,GAClB,OAAOP,EAAeQ,KAAKD,IAE5BE,aAAc,SAASC,GACtB,IAAIC,EAAWD,EAAWE,IAAID,SAE9BD,EAAWE,IAAID,SA1BI,UA0BOA,EAASE,OA1BhB,QA0B8BC,QAAqBH,EA1BnD,QA0BuEA,GAE3FI,QAAS,SAASL,GACjBZ,QAAQ,WAAa,OAzBvB,SAAmBkB,GAClB,IACCC,EADGC,EAAWhB,SAASiB,yBAKxB,IAFAlB,EAAUmB,UAAYJ,EAEhBC,EAAOhB,EAAUoB,mBACtBH,EAASI,YAAYL,GAGtB,OAAOC,EAesBK,CAAUb,EAAWM,YAI5C,IAAKZ,EAAYoB,QAAQzB,MArClC","file":"html.js","sourcesContent":["(function() {\n\t'use strict';\n\n\tfunction definition(abstractHandler) {\n\t\tvar suffix         = '.html',\n\t\t\tregexMatchType = /^text\\/html/,\n\t\t\tcontainer      = document.createElement('body');\n\n\t\tfunction parseHtml(source) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\tnode;\n\n\t\t\tcontainer.innerHTML = source;\n\n\t\t\twhile(node = container.firstElementChild) {\n\t\t\t\tfragment.appendChild(node);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction HandlerHtml() {}\n\n\t\tHandlerHtml.prototype = {\n\t\t\tvalidate: function(type) {\n\t\t\t\treturn regexMatchType.test(type);\n\t\t\t},\n\t\t\tonPreRequest: function(dependency) {\n\t\t\t\tvar pathname = dependency.url.pathname;\n\t\t\t\t\n\t\t\t\tdependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n\t\t\t},\n\t\t\tprocess: function(dependency) {\n\t\t\t\tprovide(function() { return parseHtml(dependency.source); });\n\t\t\t}\n\t\t};\n\n\t\treturn new (HandlerHtml.extends(abstractHandler));\n\t}\n\n\tprovide([ '/demand/abstract/handler' ], definition);\n}());"]}