{"version":3,"sources":["handler/json.js"],"names":["definition","abstractHandler","HandlerJson","suffix","regexMatchType","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","data","JSON","parse","source","provide","extends"],"mappings":";CAAC,WACA,YAEA,SAASA,GAAWC,GAInB,QAASC,MAHT,GAAIC,GAAiB,QACpBC,EAAiB,oBAoBlB,OAhBAF,GAAYG,WACXC,SAAU,SAASC,GAClB,MAAOH,GAAeI,KAAKD,IAE5BE,aAAc,SAASC,GACtB,GAAIC,GAAWD,EAAWE,IAAID,QAE9BD,GAAWE,IAAID,SAAWA,EAASE,OAAOV,EAAOW,UAAYX,EAASQ,EAAWR,EAASQ,GAE3FI,QAAS,SAASL,GACjB,GAAIM,GAAOC,KAAKC,MAAMR,EAAWS,OAEjCC,SAAQ,WAAa,MAAOJ,OAIvB,IAAKd,EAAYmB,QAAQpB,IAGjCmB,SAAU,4BAA8BpB","file":"json.js","sourcesContent":["(function() {\n\t'use strict';\n\n\tfunction definition(abstractHandler) {\n\t\tvar suffix         = '.json',\n\t\t\tregexMatchType = /^application\\/json/;\n\n\t\tfunction HandlerJson() {}\n\n\t\tHandlerJson.prototype = {\n\t\t\tvalidate: function(type) {\n\t\t\t\treturn regexMatchType.test(type);\n\t\t\t},\n\t\t\tonPreRequest: function(dependency) {\n\t\t\t\tvar pathname = dependency.url.pathname;\n\t\t\t\t\n\t\t\t\tdependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n\t\t\t},\n\t\t\tprocess: function(dependency) {\n\t\t\t\tvar data = JSON.parse(dependency.source);\n\n\t\t\t\tprovide(function() { return data; });\n\t\t\t}\n\t\t};\n\n\t\treturn new (HandlerJson.extends(abstractHandler));\n\t}\n\n\tprovide([ '/demand/abstract/handler' ], definition);\n}());"]}