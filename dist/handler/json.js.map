{"version":3,"sources":["handler/json.js"],"names":["provide","path","abstractHandler","isObject","merge","regexMatchType","settings","suffix","HandlerJson","demand","on","options","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","data","JSON","parse","source","extends"],"mappings":";CAAC,WACA,aAwCAA,QAAQ,CAAE,OAAQ,2BAA4B,6BAA8B,2BAtC5E,SAAoBC,EAAMC,EAAiBC,EAAUC,GACpD,IAAIC,EAAiB,qBACpBC,EAAiB,CAAEC,OAAQ,SAS5B,SAASC,KAwBT,OA/BAC,OACEC,GAAG,iBAAmBT,GAAM,SAASU,GAClCR,EAASQ,IACXP,EAAME,EAAUK,MAMnBH,EAAYI,UAAY,CACvBC,SAAU,SAASC,GAClB,OAAOT,EAAeU,KAAKD,IAE5BE,aAAc,SAASC,EAAYV,GAClC,IAAIW,GAEJX,EAA4B,oBAAXA,EAA0BA,EAASD,EAASC,UAG5DW,EAAWD,EAAWE,IAAID,SAE1BD,EAAWE,IAAID,SAAWA,EAASE,OAAOb,EAAOc,UAAYd,EAASW,EAAWX,EAASW,IAG5FI,QAAS,SAASL,GACjB,IAAIM,EAAOC,KAAKC,MAAMR,EAAWS,QAEjC1B,SAAQ,WAAa,OAAOuB,OAIvB,IAAKf,EAAYmB,QAAQzB,OAtClC","file":"json.js","sourcesContent":["(function() {\n\t'use strict';\n\n\tfunction definition(path, abstractHandler, isObject, merge) {\n\t\tvar regexMatchType = /^application\\/json/,\n\t\t\tsettings       = { suffix: '.json' };\n\n\t\tdemand\n\t\t\t.on('postConfigure:' + path, function(options) {\n\t\t\t\tif(isObject(options)) {\n\t\t\t\t\tmerge(settings, options);\n\t\t\t\t}\n\t\t\t});\n\n\t\tfunction HandlerJson() {}\n\n\t\tHandlerJson.prototype = {\n\t\t\tvalidate: function(type) {\n\t\t\t\treturn regexMatchType.test(type);\n\t\t\t},\n\t\t\tonPreRequest: function(dependency, suffix) {\n\t\t\t\tvar pathname;\n\n\t\t\t\tsuffix = (typeof suffix !== 'undefined') ? suffix : settings.suffix;\n\n\t\t\t\tif(suffix) {\n\t\t\t\t\tpathname = dependency.url.pathname;\n\n\t\t\t\t\tdependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n\t\t\t\t}\n\t\t\t},\n\t\t\tprocess: function(dependency) {\n\t\t\t\tvar data = JSON.parse(dependency.source);\n\n\t\t\t\tprovide(function() { return data; });\n\t\t\t}\n\t\t};\n\n\t\treturn new (HandlerJson.extends(abstractHandler));\n\t}\n\n\tprovide([ 'path', '/demand/abstract/handler', '/demand/validator/isObject', '/demand/function/merge' ], definition);\n}());\n"]}