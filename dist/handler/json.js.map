{"version":3,"sources":["handler/json.js"],"names":["provide","abstractHandler","regexMatchType","HandlerJson","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","data","JSON","parse","source","extends"],"mappings":";CAAC,WACA,aA2BAA,SAAU,4BAzBV,SAAoBC,GACnB,IACCC,EAAiB,qBAElB,SAASC,KAkBT,OAhBAA,EAAYC,WACXC,SAAU,SAASC,GAClB,OAAOJ,EAAeK,KAAKD,IAE5BE,aAAc,SAASC,GACtB,IAAIC,EAAWD,EAAWE,IAAID,SAE9BD,EAAWE,IAAID,SAZI,UAYOA,EAASE,OAZhB,QAY8BC,QAAqBH,EAZnD,QAYuEA,GAE3FI,QAAS,SAASL,GACjB,IAAIM,EAAOC,KAAKC,MAAMR,EAAWS,QAEjClB,QAAQ,WAAa,OAAOe,MAIvB,IAAKZ,EAAYgB,QAAQlB,MAzBlC","file":"json.js","sourcesContent":["(function() {\n\t'use strict';\n\n\tfunction definition(abstractHandler) {\n\t\tvar suffix         = '.json',\n\t\t\tregexMatchType = /^application\\/json/;\n\n\t\tfunction HandlerJson() {}\n\n\t\tHandlerJson.prototype = {\n\t\t\tvalidate: function(type) {\n\t\t\t\treturn regexMatchType.test(type);\n\t\t\t},\n\t\t\tonPreRequest: function(dependency) {\n\t\t\t\tvar pathname = dependency.url.pathname;\n\t\t\t\t\n\t\t\t\tdependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n\t\t\t},\n\t\t\tprocess: function(dependency) {\n\t\t\t\tvar data = JSON.parse(dependency.source);\n\n\t\t\t\tprovide(function() { return data; });\n\t\t\t}\n\t\t};\n\n\t\treturn new (HandlerJson.extends(abstractHandler));\n\t}\n\n\tprovide([ '/demand/abstract/handler' ], definition);\n}());"]}