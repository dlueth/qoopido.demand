{"version":3,"sources":["handler/text.js"],"names":["provide","path","abstractHandler","isObject","merge","regexMatchType","settings","HandlerText","demand","on","options","prototype","validate","type","test","onPreRequest","dependency","suffix","pathname","url","slice","length","process","source","extends"],"mappings":";CAAC,WACA,aAsCAA,QAAQ,CAAE,OAAQ,2BAA4B,6BAA8B,2BApC5E,SAAoBC,EAAMC,EAAiBC,EAAUC,GACpD,IAAIC,EAAiB,YACpBC,EAAiB,GASlB,SAASC,KAsBT,OA7BAC,OACEC,GAAG,iBAAmBR,GAAM,SAASS,GAClCP,EAASO,IACXN,EAAME,EAAUI,MAMnBH,EAAYI,UAAY,CACvBC,SAAU,SAASC,GAClB,OAAOR,EAAeS,KAAKD,IAE5BE,aAAc,SAASC,EAAYC,GAClC,IAAIC,GAEJD,EAA4B,oBAAXA,EAA0BA,EAASX,EAASW,UAG5DC,EAAWF,EAAWG,IAAID,SAE1BF,EAAWG,IAAID,SAAWA,EAASE,OAAOH,EAAOI,UAAYJ,EAASC,EAAWD,EAASC,IAG5FI,QAAS,SAASN,GACjBhB,SAAQ,WAAa,OAAOgB,EAAWO,YAIlC,IAAKhB,EAAYiB,QAAQtB,OApClC","file":"text.js","sourcesContent":["(function() {\n\t'use strict';\n\n\tfunction definition(path, abstractHandler, isObject, merge) {\n\t\tvar regexMatchType = /^text\\/.+/,\n\t\t\tsettings       = {};\n\n\t\tdemand\n\t\t\t.on('postConfigure:' + path, function(options) {\n\t\t\t\tif(isObject(options)) {\n\t\t\t\t\tmerge(settings, options);\n\t\t\t\t}\n\t\t\t});\n\n\t\tfunction HandlerText() {}\n\n\t\tHandlerText.prototype = {\n\t\t\tvalidate: function(type) {\n\t\t\t\treturn regexMatchType.test(type);\n\t\t\t},\n\t\t\tonPreRequest: function(dependency, suffix) {\n\t\t\t\tvar pathname;\n\n\t\t\t\tsuffix = (typeof suffix !== 'undefined') ? suffix : settings.suffix;\n\n\t\t\t\tif(suffix) {\n\t\t\t\t\tpathname = dependency.url.pathname;\n\n\t\t\t\t\tdependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n\t\t\t\t}\n\t\t\t},\n\t\t\tprocess: function(dependency) {\n\t\t\t\tprovide(function() { return dependency.source; });\n\t\t\t}\n\t\t};\n\n\t\treturn new (HandlerText.extends(abstractHandler));\n\t}\n\n\tprovide([ 'path', '/demand/abstract/handler', '/demand/validator/isObject', '/demand/function/merge' ], definition);\n}());\n"]}