{"version":3,"sources":["plugin/cookie.js"],"names":["document","provide","path","iterate","isObject","isTypeOf","setCookie","dependency","value","expiration","enabled","pointer","match","i","pattern","indexOf","weight","state","isEnabled","cookie","type","encodeURIComponent","past","demand","on","options","length","key","push","JSON","stringify"],"mappings":";CAAA,SAAAA,GACA,aAsCAC,QAAA,CAAA,OAAA,2BAAA,6BAAA,8BApCA,SAAAC,EAAAC,EAAAC,EAAAC,GACA,SAAAC,EAAAC,EAAAC,EAAAC,IACAC,GAGA,SAAAR,GACA,IAAA,IAAAS,EAAAC,EAAAC,EAAA,EAAAF,EAAAG,EAAAD,GAAAA,IACA,IAAAX,EAAAa,QAAAJ,EAAAG,YAAAF,GAAAD,EAAAK,OAAAJ,EAAAI,UAAAJ,EAAAD,GACA,QAAAC,GAAAA,EAAAK,MANAC,CAAAX,EAAAL,SAAAF,EAAAmB,OAAA,UAAAZ,EAAAa,KAAA,KAAAb,EAAAL,KAAA,KAAAmB,mBAAAb,GAAA,aAAAC,EAAA,YAQA,IAAAC,EAAAY,EAAA,gCAEAR,EAAA,GAsBA,OArBAS,OAAAC,GAAA,iBAAAtB,EAAA,SAAAuB,GACArB,EAAAqB,IACAX,EAAAY,OAAA,EACAvB,EAAAsB,EAAA,SAAAE,EAAAnB,GACAM,EAAAc,KAAA,CACAd,QAAAa,EACAX,OAAAW,EAAAD,OACAT,MAAAT,OAGAH,EAAAoB,EAAA,aAAAf,EAAAe,KAEAD,GAAA,YAAA,SAAAjB,GACAD,EAAAC,EAAA,GAAAe,KAEAE,GAAA,aAAA,SAAAjB,GACAD,EAAAC,EAAA,GAAAe,KAEAE,GAAA,YAAA,SAAAjB,EAAAU,GACAX,EAAAC,EAAAsB,KAAAC,UAAAb,GArBA,oCAuBA,IArCA,CAwCAjB","file":"cookie.js","sourcesContent":["/**! Qoopido.demand 5.1.0 | https://github.com/dlueth/qoopido.demand | (c) 2018 Dirk Lueth */\n(function (document) {\n\t\"use strict\";\n\n\tfunction definition(path, iterate, isObject, isTypeOf) {\n\t\tfunction setCookie(dependency, value, expiration) {\n\t\t\tif (enabled || isEnabled(dependency.path)) document.cookie = \"demand[\" + dependency.type + \"][\" + dependency.path + \"]=\" + encodeURIComponent(value) + \"; expires=\" + expiration + \"; path=/\"\n\t\t}\n\n\t\tfunction isEnabled(path) {\n\t\t\tfor (var pointer, match, i = 0; pointer = pattern[i]; i++)\n\t\t\t\tif (0 === path.indexOf(pointer.pattern) && (!match || pointer.weight > match.weight)) match = pointer;\n\t\t\treturn match ? match.state : false\n\t\t}\n\t\tvar enabled, past = \"Thu, 01 Jan 1970 00:00:00 GMT\",\n\t\t\tfuture = \"Fri, 31 Dec 9999 23:59:59 GMT\",\n\t\t\tpattern = [];\n\t\tdemand.on(\"postConfigure:\" + path, function (options) {\n\t\t\t\tif (isObject(options)) {\n\t\t\t\t\tpattern.length = 0;\n\t\t\t\t\titerate(options, function (key, value) {\n\t\t\t\t\t\tpattern.push({\n\t\t\t\t\t\t\tpattern: key,\n\t\t\t\t\t\t\tweight: key.length,\n\t\t\t\t\t\t\tstate: value\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t} else if (isTypeOf(options, \"boolean\")) enabled = options\n\t\t\t})\n\t\t\t.on(\"cacheMiss\", function (dependency) {\n\t\t\t\tsetCookie(dependency, \"\", past)\n\t\t\t})\n\t\t\t.on(\"cacheClear\", function (dependency) {\n\t\t\t\tsetCookie(dependency, \"\", past)\n\t\t\t})\n\t\t\t.on(\"postCache\", function (dependency, state) {\n\t\t\t\tsetCookie(dependency, JSON.stringify(state), future)\n\t\t\t});\n\t\treturn true\n\t}\n\tprovide([\"path\", \"/demand/function/iterate\", \"/demand/validator/isObject\", \"/demand/validator/isTypeOf\"], definition)\n})(document);\n"]}